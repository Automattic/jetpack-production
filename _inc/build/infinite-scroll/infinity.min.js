(()=>{(function(){var Scroller,ajaxurl,stats,type,text,totop,loading_text,isIE=-1!=navigator.userAgent.search("MSIE");if(isIE){var IEVersion=navigator.userAgent.match(/MSIE\s?(\d+)\.?\d*;/);IEVersion=parseInt(IEVersion[1])}if("https:"==document.location.protocol)infiniteScroll.settings.ajaxurl=infiniteScroll.settings.ajaxurl.replace("http://","https://");function fullscreenState(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?1:0}Scroller=function(e){var t=this;if(this.id=e.id,this.body=document.body,this.window=window,this.element=document.getElementById(e.id),this.wrapperClass=e.wrapper_class,this.ready=!0,this.disabled=!1,this.page=1,this.offset=e.offset,this.currentday=e.currentday,this.order=e.order,this.throttle=!1,this.click_handle=e.click_handle,this.google_analytics=e.google_analytics,this.history=e.history,this.origURL=window.location.href,this.handle=document.createElement("div"),this.handle.setAttribute("id","infinite-handle"),this.handle.innerHTML="<span><button>"+text.replace("\\","")+"</button></span>",this.footer={el:document.getElementById("infinite-footer"),wrap:e.footer},this.checkViewportOnLoadBound=t.checkViewportOnLoad.bind(this),this.wpMediaelement=null,"scroll"==type)this.window.addEventListener("scroll",(function(){t.throttle=!0})),t.gotop(),setInterval((function(){if(t.throttle)t.throttle=!1,t.thefooter(),t.refresh(),t.determineURL()}),250),t.ensureFilledViewport(),this.body.addEventListener("is.post-load",t.checkViewportOnLoadBound);else if("click"==type){if(this.click_handle)this.element.appendChild(this.handle);this.handle.addEventListener("click",(function(){if(t.click_handle)t.handle.parentNode.removeChild(t.handle);t.refresh()}))}this.body.addEventListener("is.post-load",t.initializeMejs)},Scroller.prototype.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},Scroller.prototype.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])if(Object.hasOwn(arguments[t],i))e[i]=arguments[t][i];return e},Scroller.prototype.check=function(){return this.measure(this.element,[this.wrapperClass]).bottom<2*this.window.innerHeight},Scroller.prototype.render=function(e){var t=Array.prototype.slice.call(e.fragment.childNodes);for(this.body.classList.add("infinity-success");t.length>0;){var i=t.shift();this.element.appendChild(i)}this.trigger(this.body,"is.post-load",{jqueryEventName:"post-load",data:e}),this.ready=!0},Scroller.prototype.query=function(){return{page:this.page+this.offset,currentday:this.currentday,order:this.order,scripts:window.infiniteScroll.settings.scripts,styles:window.infiniteScroll.settings.styles,query_args:window.infiniteScroll.settings.query_args,query_before:window.infiniteScroll.settings.query_before,last_post_date:window.infiniteScroll.settings.last_post_date}},Scroller.prototype.animate=function(e,t){var i=performance.now();requestAnimationFrame((function n(o){var r=Math.min(1,(o-i)/t);if(e(r),r<1)requestAnimationFrame(n)}))},Scroller.prototype.gotop=function(){var e=document.getElementById("infinity-blog-title"),t=this;if(e)e.setAttribute("title",totop),e.addEventListener("click",(function(e){var i=t.window.pageYOffset;e.preventDefault(),t.animate((function(e){var t=i-i*e;document.documentElement.scrollTop=document.body.scrollTop=t}),200)}))},Scroller.prototype.thefooter=function(){var e,t,i,n,o=this;if(this.footer&&this.footer.el){if("string"==typeof this.footer.wrap){try{t=(t=document.getElementById(this.footer.wrap).getBoundingClientRect()).width}catch(e){t=0}if(t>479)if(e=this.footer.el.querySelector(".container"))e.style.width=t+"px"}if(i=parseInt(o.footer.el.style.bottom||-50,10),n=this.window.pageYOffset>=350?0:-50,i!==n)o.animate((function(e){var t=i+(n-i)*e;if(o.footer.el.style.bottom=t+"px",1===e)i=n}),200)}},Scroller.prototype.urlEncodeJSON=function(e,t){var i,n,o=[];for(var r in e)if(i=encodeURIComponent(r),n=t?t+"["+i+"]":i,"object"==typeof e[r])if(!Array.isArray(e[r])||e[r].length>0)o.push(this.urlEncodeJSON(e[r],n));else o.push(n+"[]=");else o.push(n+"="+encodeURIComponent(e[r]));return o.join("&")},Scroller.prototype.refresh=function(){var self=this,query,xhr,loader,customized;if(!this.disabled&&this.ready&&this.check()){if(this.ready=!1,this.click_handle){if(!loader)document.getElementById("infinite-aria").textContent=loading_text,loader=document.createElement("div"),loader.classList.add("infinite-loader"),loader.setAttribute("role","progress"),loader.innerHTML='<div class="spinner"><div class="spinner-inner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>';this.element.appendChild(loader)}if(query=self.extend({action:"infinite_scroll"},this.query()),"undefined"!=typeof wp&&wp.customize&&wp.customize.settings.theme)customized={},query.wp_customize="on",query.theme=wp.customize.settings.theme.stylesheet,wp.customize.each((function(e){if(e._dirty)customized[e.id]=e()})),query.customized=JSON.stringify(customized),query.nonce=wp.customize.settings.nonce.preview;return xhr=new XMLHttpRequest,xhr.open("POST",infiniteScroll.settings.ajaxurl,!0),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),xhr.send(self.urlEncodeJSON(query)),xhr.onerror=function(){if(self.click_handle&&loader.parentNode)loader.parentNode.removeChild(loader);self.ready=!0},xhr.onload=function(){var response=JSON.parse(xhr.responseText),httpCheck=xhr.status>=200&&xhr.status<300,responseCheck=void 0!==response.html;if(response&&httpCheck&&responseCheck){if(self.click_handle&&loader.parentNode)loader.parentNode.removeChild(loader);if(response.scripts&&Array.isArray(response.scripts))response.scripts.forEach((function(e){var t=e.footer?"body":"head";if(window.infiniteScroll.settings.scripts.push(e.handle),e.extra_data)self.appendInlineScript(e.extra_data,t);if(e.before_handle)self.appendInlineScript(e.before_handle,t);var i=document.createElement("script");if(i.type="text/javascript",i.src=e.src,i.id=e.handle,i.async=!1,e.after_handle)i.onload=function(){self.appendInlineScript(e.after_handle,t)};if("wp-mediaelement"===e.handle)self.body.removeEventListener("is.post-load",self.initializeMejs);if("wp-mediaelement"===e.handle&&"undefined"==typeof mejs)self.wpMediaelement={},self.wpMediaelement.tag=i,self.wpMediaelement.element=t,setTimeout(self.maybeLoadMejs.bind(self),250);else document.getElementsByTagName(t)[0].appendChild(i)}));if(response.styles&&Array.isArray(response.styles))response.styles.forEach((function(item){window.infiniteScroll.settings.styles.push(item.handle);var style=document.createElement("link");if(style.rel="stylesheet",style.href=item.src,style.id=item.handle+"-css",item.conditional&&(!isIE||!eval(item.conditional.replace(/%ver/g,IEVersion))))style=!1;if(style)document.getElementsByTagName("head")[0].appendChild(style)}));if(response.fragment=document.createElement("div"),response.fragment.innerHTML=response.html,self.page++,stats)(new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?"+stats+"&post=0&baba="+Math.random();if("object"==typeof response.postflair&&"object"==typeof WPCOM_sharing_counts)WPCOM_sharing_counts=self.extend(WPCOM_sharing_counts,response.postflair);if(self.render.call(self,response),"click"==type){if(infiniteScroll.settings.wrapper)document.querySelector("#infinite-view-"+(self.page+self.offset-1)+" a:first-of-type").focus({preventScroll:!0});if(response.lastbatch)if(self.click_handle)self.body.classList.add("infinity-end"),self.body.classList.remove("infinity-success");else self.trigger(this.body,"infinite-scroll-posts-end");else if(self.click_handle)self.element.appendChild(self.handle);else self.trigger(this.body,"infinite-scroll-posts-more")}else if(response.lastbatch)self.disabled=!0,self.body.classList.add("infinity-end"),self.body.classList.remove("infinity-success");if(response.currentday)self.currentday=response.currentday;if(self.google_analytics){var ga_url=self.history.path.replace(/%d/,self.page);if("object"==typeof _gaq)_gaq.push(["_trackPageview",ga_url]);if("function"==typeof ga)ga("send","pageview",ga_url)}}else if(self.click_handle&&loader.parentNode)loader.parentNode.removeChild(loader)},xhr}},Scroller.prototype.appendInlineScript=function(e,t){var i=document.createElement("script"),n=document.createTextNode("//<![CDATA[ \n"+e+"\n//]]>");i.type="text/javascript",i.appendChild(n),document.getElementsByTagName(t)[0].appendChild(i)},Scroller.prototype.maybeLoadMejs=function(){if(null!==this.wpMediaelement)if("undefined"==typeof mejs)setTimeout(this.maybeLoadMejs.bind(this),250);else document.getElementsByTagName(this.wpMediaelement.element)[0].appendChild(this.wpMediaelement.tag),this.wpMediaelement=null,this.body.addEventListener("is.post-load",this.initializeMejs)},Scroller.prototype.initializeMejs=function(e){if(e.detail&&e.detail.html&&(-1!==e.detail.html.indexOf("wp-audio-shortcode")||-1!==e.detail.html.indexOf("wp-video-shortcode")))if("undefined"!=typeof mejs){var t,i={};if("undefined"!=typeof _wpmejsSettings)i.pluginPath=_wpmejsSettings.pluginPath;i.success=function(e){var t=e.attributes.autoplay&&"false"!==e.attributes.autoplay;if("flash"===e.pluginType&&t)e.addEventListener("canplay",(function(){e.play()}),!1)},t=document.querySelectorAll(".wp-audio-shortcode, .wp-video-shortcode"),t=(t=Array.prototype.slice.call(t)).filter((function(e){for(;e.parentNode;){if(e.classList.contains("mejs-container"))return!1;e=e.parentNode}return!0}));for(var n=0;n<t.length;n++)new MediaElementPlayer(t[n],i)}},Scroller.prototype.measure=function(e,t){t=t||[];for(var i,n,o,r=Array.prototype.slice.call(e.children),s=Number.MAX_VALUE,l=0;r.length>0;){for(i=r.shift(),o=0;o<t.length;o++)if(i.classList.contains(t[o])){r=r.concat(Array.prototype.slice.call(i.children));break}n=i.getBoundingClientRect(),s=Math.min(s,n.top),l=Math.max(l,n.bottom)}var a=Math.round(window.innerHeight/2),d=s<=a&&l>=a;return{top:s,bottom:l,height:l-s,factor:(Math.min(l,a)-Math.max(s,0))/a,isActive:d}},Scroller.prototype.ensureFilledViewport=function(){var e=this,t=e.window.innerHeight,i=e.measure(e.element,[e.wrapperClass]);if(e.body.removeEventListener("is.post-load",e.checkViewportOnLoadBound),0!==i.bottom&&i.bottom<t)e.ready=!0,e.refresh()},Scroller.prototype.checkViewportOnLoad=function(){this.ensureFilledViewport()};var previousFullScrenState=fullscreenState();Scroller.prototype.determineURL=function(){var e,t=this,i=-1,n=fullscreenState(),o=0;if(!(previousFullScrenState^n)){previousFullScrenState=n,e=document.querySelectorAll("."+t.wrapperClass);for(var r=0;r<e.length;r++){var s=t.measure(e[r]);if(s.isActive){i=parseInt(e[r].dataset.pageNum,10);break}if(s.factor>o)i=parseInt(e[r].dataset.pageNum,10),o=s.factor}t.updateURL(i)}else previousFullScrenState=n},Scroller.prototype.updateURL=function(e){if(window.history.pushState){var t=this,i=t.origURL;if(-1!==e)i=window.location.protocol+"//"+t.history.host+t.history.path.replace(/%d/,e)+t.history.parameters;if(window.location.href!=i)history.pushState(null,null,i)}},Scroller.prototype.pause=function(){this.disabled=!0},Scroller.prototype.resume=function(){this.disabled=!1},Scroller.prototype.trigger=function(e,t,i){if((i=i||{}).jqueryEventName&&"undefined"!=typeof jQuery)jQuery(e).trigger(i.jqueryEventName,i.data||null);var n;try{n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i.data||null})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i.data||null)}e.dispatchEvent(n)};var jetpackInfinityModule=function(){var e=infiniteScroll.settings.body_class.split(" ");if("object"==typeof infiniteScroll)if(e.forEach((function(e){if(e)document.body.classList.add(e)})),ajaxurl=infiniteScroll.settings.ajaxurl,stats=infiniteScroll.settings.stats,type=infiniteScroll.settings.type,text=infiniteScroll.settings.text,totop=infiniteScroll.settings.totop,loading_text=infiniteScroll.settings.loading_text,infiniteScroll.scroller=new Scroller(infiniteScroll.settings),"click"==type){var t=null;window.addEventListener("scroll",(function(){if(!t)t=setTimeout((function(){infiniteScroll.scroller.determineURL(),t=null}),250)}))}};if("interactive"===document.readyState||"complete"===document.readyState)jetpackInfinityModule();else document.addEventListener("DOMContentLoaded",jetpackInfinityModule)})()})();