!function(){"use strict";var e,t={noop:function(){},texturize:function(e){return(e=(e=(e=(e+="").replace(/'/g,"&#8217;").replace(/&#039;/g,"&#8217;")).replace(/"/g,"&#8221;").replace(/&#034;/g,"&#8221;").replace(/&quot;/g,"&#8221;").replace(/[\u201D]/g,"&#8221;")).replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"')).trim()},applyReplacements:function(e,t){if(e)if(!t)return e;else return e.replace(/{(\d+)}/g,(function(e,i){return void 0!==t[i]?t[i]:e}))},getBackgroundImage:function(e){var t=document.createElement("canvas"),i=t.getContext&&t.getContext("2d");if(e){i.filter="blur(20px) ",i.drawImage(e,0,0);var r=t.toDataURL("image/png");return t=null,r}}},i=function(){function e(e,t){if(Element.prototype.matches)return e.matches(t);if(Element.prototype.msMatchesSelector)return e.msMatchesSelector(t)}function i(e,t,i,r){if(!e)return r();e.style.removeProperty("display"),e.style.opacity=t,e.style.pointerEvents="none";var o=function(a,n){var l=(performance.now()-a)/n;if(l<1)e.style.opacity=t+(i-t)*l,requestAnimationFrame((()=>o(a,n)));else e.style.opacity=i,e.style.removeProperty("pointer-events"),r()};requestAnimationFrame((function(){requestAnimationFrame((function(){o(performance.now(),200)}))}))}return{closest:function(t,i){if(t.closest)return t.closest(i);var r=t;do{if(e(r,i))return r;r=r.parentElement||r.parentNode}while(null!==r&&1===r.nodeType);return null},matches:e,hide:function(e){if(e)e.style.display="none"},show:function(e){if(e)e.style.display="block"},fadeIn:function(e,r){i(e,0,1,r=r||t.noop)},fadeOut:function(e,r){r=r||t.noop,i(e,1,0,(function(){if(e)e.style.display="none";r()}))},scrollToElement:function(e,t,i){if(!e||!t)if(i)return i();else return;var r=t.querySelector(".jp-carousel-info-extra");if(r)r.style.minHeight=window.innerHeight-64+"px";var o=!0,a=Date.now(),n=t.scrollTop,l=Math.max(0,e.offsetTop-Math.max(0,window.innerHeight-function(e){var t=e.querySelector(".jp-carousel-info-footer"),i=e.querySelector(".jp-carousel-info-extra"),r=e.querySelector(".jp-carousel-info-content-wrapper");if(t&&i&&r){var o=window.getComputedStyle(i),a=parseInt(o.paddingTop,10)+parseInt(o.paddingBottom,10);return a=isNaN(a)?0:a,r.offsetHeight+t.offsetHeight+a}return 0}(t)))-t.scrollTop;function s(){o=!1}l=Math.min(l,t.scrollHeight-window.innerHeight),t.addEventListener("wheel",s),function e(){var c,u=Date.now(),d=(c=(u-a)/300)<.5?2*c*c:1-Math.pow(-2*c+2,2)/2,p=(d=d>1?1:d)*l;if(t.scrollTop=n+p,u<=a+300&&o)return requestAnimationFrame(e);if(i)i();if(r)r.style.minHeight="";o=!1,t.removeEventListener("wheel",s)}()},getJSONAttribute:function(e,t){if(e&&e.hasAttribute(t))try{return JSON.parse(e.getAttribute(t))}catch(e){return}},convertToPlainText:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},stripHTML:function(e){return e.replace(/<[^>]*>?/gm,"")},emitEvent:function(e,t,i){var r;try{r=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i||null})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i||null)}e.dispatchEvent(r)},isTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}}}();function r(){var r,o,a,n,l="",s=!1,c="div.gallery, div.tiled-gallery, ul.wp-block-gallery, ul.blocks-gallery-grid, figure.wp-block-gallery.has-nested-images, div.wp-block-jetpack-tiled-gallery, a.single-image-gallery",u=".gallery-item, .tiled-gallery-item, .blocks-gallery-item,  .tiled-gallery__item",d=u+", .wp-block-image",p={},m="undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.stat?wpcom.carousel.stat:t.noop,f="undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.pageview?wpcom.carousel.pageview:t.noop;function g(t){if(!s)switch(t.which){case 38:t.preventDefault(),p.overlay.scrollTop-=100;break;case 40:t.preventDefault(),p.overlay.scrollTop+=100;break;case 39:t.preventDefault(),e.slideNext();break;case 37:case 8:t.preventDefault(),e.slidePrev();break;case 27:t.preventDefault(),L()}}function h(){s=!0}function v(){s=!1}function y(){if(!p.overlay)p.overlay=document.querySelector(".jp-carousel-overlay"),p.container=p.overlay.querySelector(".jp-carousel-wrap"),p.gallery=p.container.querySelector(".jp-carousel"),p.info=p.overlay.querySelector(".jp-carousel-info"),p.caption=p.info.querySelector(".jp-carousel-caption"),p.commentField=p.overlay.querySelector("#jp-carousel-comment-form-comment-field"),p.emailField=p.overlay.querySelector("#jp-carousel-comment-form-email-field"),p.authorField=p.overlay.querySelector("#jp-carousel-comment-form-author-field"),p.urlField=p.overlay.querySelector("#jp-carousel-comment-form-url-field"),function(){if(window.innerWidth<=760)if(Math.round(window.innerWidth/760*110)<40&&i.isTouch());}(),[p.commentField,p.emailField,p.authorField,p.urlField].forEach((function(e){if(e)e.addEventListener("focus",h),e.addEventListener("blur",v)})),p.overlay.addEventListener("click",(function(e){var t,r,o=e.target,a=!!i.closest(o,".jp-carousel-close-hint"),n=!!window.matchMedia("(max-device-width: 760px)").matches;if(o===p.overlay)if(n)return;else L();else if(a)L();else if(o.classList.contains("jp-carousel-image-download"))m("download_original_click");else if(o.classList.contains("jp-carousel-comment-login"))t=p.currentSlide,r=t?t.attrs.attachmentId:"0",window.location.href=jetpackCarouselStrings.login_url+"%23jp-carousel-"+r;else if(i.closest(o,"#jp-carousel-comment-form-container"))!function(e){var t=e.target,r=i.getJSONAttribute(p.container,"data-carousel-extra")||{},o=p.currentSlide.attrs.attachmentId,a=document.querySelector("#jp-carousel-comment-form-submit-and-info-wrapper"),n=document.querySelector("#jp-carousel-comment-form-spinner"),l=document.querySelector("#jp-carousel-comment-form-button-submit"),s=document.querySelector("#jp-carousel-comment-form");if(p.commentField&&p.commentField.getAttribute("id")===t.getAttribute("id"))h(),i.show(a);else if(i.matches(t,'input[type="submit"]')){e.preventDefault(),e.stopPropagation(),i.show(n),s.classList.add("jp-carousel-is-disabled");var c={action:"post_attachment_comment",nonce:jetpackCarouselStrings.nonce,blog_id:r.blog_id,id:o,comment:p.commentField.value};if(!c.comment.length)return void w(jetpackCarouselStrings.no_comment_text,!1);if(1!==Number(jetpackCarouselStrings.is_logged_in))if(c.email=p.emailField.value,c.author=p.authorField.value,c.url=p.urlField.value,1===Number(jetpackCarouselStrings.require_name_email))if(!c.email.length||!c.email.match("@"))return void w(jetpackCarouselStrings.no_comment_email,!1);else if(!c.author.length)return void w(jetpackCarouselStrings.no_comment_author,!1);var u=new XMLHttpRequest;u.open("POST",jetpackCarouselStrings.ajaxurl,!0),u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&this.status>=200&&this.status<300){var e;try{e=JSON.parse(this.response)}catch(e){return void w(jetpackCarouselStrings.comment_post_error,!1)}if("approved"===e.comment_status)w(jetpackCarouselStrings.comment_approved,!0);else if("unapproved"===e.comment_status)w(jetpackCarouselStrings.comment_unapproved,!0);else w(jetpackCarouselStrings.comment_post_error,!1);H(),A(o),l.value=jetpackCarouselStrings.post_comment,i.hide(n),s.classList.remove("jp-carousel-is-disabled")}else w(jetpackCarouselStrings.comment_post_error,!1)};var d=[];for(var m in c)if(m){var f=encodeURIComponent(m)+"="+encodeURIComponent(c[m]);d.push(f.replace(/%20/g,"+"))}var g=d.join("&");u.send(g)}}(e);else if(i.closest(o,".jp-carousel-photo-icons-container")||o.classList.contains("jp-carousel-photo-title"))!function(e){e.preventDefault();var t=e.target,r=p.info.querySelector(".jp-carousel-info-extra"),o=p.info.querySelector(".jp-carousel-image-meta"),a=p.info.querySelector(".jp-carousel-comments-wrapper"),n=p.info.querySelector(".jp-carousel-icon-info"),l=p.info.querySelector(".jp-carousel-icon-comments");function s(){if(l)l.classList.remove("jp-carousel-selected");if(n.classList.toggle("jp-carousel-selected"),a)a.classList.remove("jp-carousel-show");if(o)if(o.classList.toggle("jp-carousel-show"),o.classList.contains("jp-carousel-show"))r.classList.add("jp-carousel-show");else r.classList.remove("jp-carousel-show")}function c(){if(n)n.classList.remove("jp-carousel-selected");if(l.classList.toggle("jp-carousel-selected"),o)o.classList.remove("jp-carousel-show");if(a)if(a.classList.toggle("jp-carousel-show"),a.classList.contains("jp-carousel-show"))r.classList.add("jp-carousel-show");else r.classList.remove("jp-carousel-show")}if(i.closest(t,".jp-carousel-icon-info")||t.classList.contains("jp-carousel-photo-title"))if(o&&o.classList.contains("jp-carousel-show"))i.scrollToElement(p.overlay,p.overlay,s);else s(),i.scrollToElement(p.info,p.overlay);if(i.closest(t,".jp-carousel-icon-comments"))if(a&&a.classList.contains("jp-carousel-show"))i.scrollToElement(p.overlay,p.overlay,c);else c(),i.scrollToElement(p.info,p.overlay)}(e);else if(!i.closest(o,".jp-carousel-info"))return})),window.addEventListener("keydown",g),p.overlay.addEventListener("jp_carousel.afterOpen",(function(){if(v(),!(p.slides.length<=1))if(p.slides.length<=5)i.show(p.info.querySelector(".jp-swiper-pagination"));else i.show(p.info.querySelector(".jp-carousel-pagination"))})),p.overlay.addEventListener("jp_carousel.beforeClose",(function(){if(h(),document.documentElement.style.removeProperty("height"),e)e.enable();i.hide(p.info.querySelector(".jp-swiper-pagination")),i.hide(p.info.querySelector(".jp-carousel-pagination"))})),p.overlay.addEventListener("jp_carousel.afterClose",(function(){if(window.history.pushState)history.pushState("",document.title,window.location.pathname+window.location.search);else window.location.href="";l="",p.isOpen=!1})),p.overlay.addEventListener("touchstart",(function(e){if(e.touches.length>1)e.preventDefault()}))}function w(e,t){var r=p.overlay.querySelector("#jp-carousel-comment-post-results"),o="jp-carousel-comment-post-"+(t?"success":"error");r.innerHTML='<span class="'+o+'">'+e+"</span>",i.hide(p.overlay.querySelector("#jp-carousel-comment-form-spinner")),p.overlay.querySelector("#jp-carousel-comment-form").classList.remove("jp-carousel-is-disabled"),i.show(r)}function j(){var e=document.querySelectorAll("a img[data-attachment-id]");Array.prototype.forEach.call(e,(function(e){var t=e.parentElement,r=t.parentElement;if(!r.classList.contains("gallery-icon"))if(!i.closest(r,u))if(t.hasAttribute("href")){var o=!1;if(t.getAttribute("href").split("?")[0]===e.getAttribute("data-orig-file").split("?")[0]&&1===Number(jetpackCarouselStrings.single_image_gallery_media_file))o=!0;if(t.getAttribute("href")===e.getAttribute("data-permalink"))o=!0;if(o)t.classList.add("single-image-gallery"),t.setAttribute("data-carousel-extra",JSON.stringify({blog_id:Number(jetpackCarouselStrings.blog_id)}))}}))}function S(t,i){if(!p.isOpen)_(t,{startIndex:i});else b(i),e.slideTo(i+1)}function b(r){if(!r||r<0||r>p.slides.length)r=0;p.currentSlide=p.slides[r];var o=p.currentSlide,a=o.attrs.attachmentId;if(function(e){var t=e.el,i=e.attrs,r=t.querySelector("img");if(!r.hasAttribute("data-loaded")){var o=!!i.previewImage,a=i.thumbSize;if(!o||a&&t.offsetWidth>a.width)r.src=i.src;else r.src=i.previewImage;r.setAttribute("itemprop","image"),r.setAttribute("data-loaded",1)}}(p.slides[r]),1===Number(jetpackCarouselStrings.display_background_image)&&!p.slides[r].backgroundImage)!function(t){var i=t.el;if(e&&e.slides)i=e.slides[e.activeIndex];var r=t.attrs.originalElement;if(!r.complete||0===r.naturalHeight)r.onload=function(){E(t,i,r)};else E(t,i,r)}(p.slides[r]);if(i.hide(p.caption),function(e){var t,r,o,a,n="",l="",s="";if(t=p.overlay.querySelector(".jp-carousel-photo-caption"),r=p.overlay.querySelector(".jp-carousel-caption"),o=p.overlay.querySelector(".jp-carousel-photo-title"),a=p.overlay.querySelector(".jp-carousel-photo-description"),i.hide(t),i.hide(r),i.hide(o),i.hide(a),n=q(e.caption)||"",l=q(e.title)||"",s=q(e.desc)||"",n||l||s){if(n)t.innerHTML=n,r.innerHTML=n,i.show(t),i.show(r);if(i.stripHTML(n)===i.stripHTML(l))l="";if(i.stripHTML(n)===i.stripHTML(s))s="";if(i.stripHTML(l)===i.stripHTML(s))s="";if(s)if(a.innerHTML=s,i.show(a),!l&&!n)t.innerHTML=i.stripHTML(s),i.show(t);if(l){var c=i.stripHTML(l);if(o.innerHTML=c,!n)t.innerHTML=c,r.innerHTML=c,i.show(t);i.show(o)}}}({caption:o.attrs.caption,title:o.attrs.title,desc:o.attrs.desc}),function(e){if(!e||1!==Number(jetpackCarouselStrings.display_exif))return!1;var t=p.info.querySelector(".jp-carousel-image-meta ul.jp-carousel-image-exif"),i="";for(var r in e){var o=e[r],a=jetpackCarouselStrings.meta_data||[];if(0!==parseFloat(o)&&o.length&&-1!==a.indexOf(r)){switch(r){case"focal_length":o+="mm";break;case"shutter_speed":o=k(o);break;case"aperture":o="f/"+o}i+="<li><h5>"+jetpackCarouselStrings[r]+"</h5>"+o+"</li>"}}t.innerHTML=i,t.style.removeProperty("display")}(p.slides[r].attrs.imageMeta),function(e){if(!e)return!1;var i,r=[e.attrs.origWidth,e.attrs.origHeight],o=document.createElement("a");if(o.href=e.attrs.src.replace(/\?.+$/,""),null!==o.hostname.match(/^i[\d]{1}\.wp\.com$/i))i=o.href;else i=e.attrs.origFile.replace(/\?.+$/,"");var a=p.info.querySelector(".jp-carousel-download-text"),n=p.info.querySelector(".jp-carousel-image-download");a.innerHTML=t.applyReplacements(jetpackCarouselStrings.download_original,r),n.setAttribute("href",i),n.style.removeProperty("display")}(o),1===Number(jetpackCarouselStrings.display_comments))!function(e){var t=p.container.querySelector(".jp-carousel-comment-form-container");if(1===parseInt(e,10))i.fadeIn(t);else i.fadeOut(t)}(p.slides[r].attrs.commentsOpened),A(a),i.hide(p.info.querySelector("#jp-carousel-comment-post-results"));var n=p.info.querySelector(".jp-carousel-pagination");if(n&&p.slides.length>5){var s=r+1;n.innerHTML="<span>"+s+" / "+p.slides.length+"</span>"}if(jetpackCarouselStrings.stats)(new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?"+jetpackCarouselStrings.stats+"&post="+encodeURIComponent(a)+"&rand="+Math.random();f(a),window.location.hash=l="#jp-carousel-"+a}function L(){document.body.style.overflow=o,document.documentElement.style.overflow=a,H(),h(),i.emitEvent(p.overlay,"jp_carousel.beforeClose"),window.scrollTo(window.scrollX||window.pageXOffset||0,n||0),e.destroy(),p.isOpen=!1,p.slides=[],p.currentSlide=void 0,p.gallery.innerHTML="",i.fadeOut(p.overlay,(function(){i.emitEvent(p.overlay,"jp_carousel.afterClose")}))}function x(e,t,i){var r=i?e.replace(/.*=([\d]+%2C[\d]+).*$/,"$1"):e.replace(/.*-([\d]+x[\d]+)\..+$/,"$1"),o=r!==e?i?r.split("%2C"):r.split("x"):[t,0];if("9999"===o[0])o[0]="0";if("9999"===o[1])o[1]="0";return o}function k(e){if(e>=1)return Math.round(10*e)/10+"s";else return"1/"+Math.round(1/e)+"s"}function q(e){if(!e.match(" ")&&e.match("_"))return"";else return e}function A(e,t){var o=void 0===t,a=p.info.querySelector(".jp-carousel-icon-comments .jp-carousel-has-comments-indicator");if(a.classList.remove("jp-carousel-show"),clearInterval(r),e){if(!t||t<1)t=0;var n=p.info.querySelector(".jp-carousel-comments"),l=p.info.querySelector("#jp-carousel-comments-loading");if(i.show(l),o)i.hide(n),n.innerHTML="";var s=new XMLHttpRequest,c=jetpackCarouselStrings.ajaxurl+"?action=get_attachment_comments&nonce="+jetpackCarouselStrings.nonce+"&id="+e+"&offset="+t;s.open("GET",c),s.setRequestHeader("X-Requested-With","XMLHttpRequest");var u=function(){i.fadeIn(n),i.fadeOut(l)};s.onload=function(){if(p.currentSlide&&p.currentSlide.attrs.attachmentId===e){var c,d=s.status>=200&&s.status<300;try{c=JSON.parse(s.responseText)}catch(e){}if(!d||!c||!Array.isArray(c))return u();if(o)n.innerHTML="";for(var m=0;m<c.length;m++){var f=c[m],g=document.createElement("div");g.classList.add("jp-carousel-comment"),g.setAttribute("id","jp-carousel-comment-"+f.id),g.innerHTML='<div class="comment-gravatar">'+f.gravatar_markup+'</div><div class="comment-content"><div class="comment-author">'+f.author_markup+'</div><div class="comment-date">'+f.date_gmt+"</div>"+f.content+"</div>",n.appendChild(g),clearInterval(r),r=setInterval((function(){if(p.container.scrollTop+150>window.innerHeight)A(e,t+10),clearInterval(r)}),300)}if(c.length>0)i.show(n),a.innerText=c.length,a.classList.add("jp-carousel-show");i.hide(l)}},s.onerror=u,s.send()}}function E(e,i,r){var o=t.getBackgroundImage(r);e.backgroundImage=o,i.style.backgroundImage="url("+o+")",i.style.backgroundSize="cover"}function H(){if(p.commentField)p.commentField.value=""}function T(e,r){p.slides=[];var o={width:window.innerWidth,height:window.innerHeight-64};if(0!==r)(new Image).src=e[r].getAttribute("data-gallery-src");var a=!!i.closest(e[0],".tiled-gallery.type-rectangular");Array.prototype.forEach.call(e,(function(e,r){var n=i.closest(e,"a"),l=e.getAttribute("data-orig-file")||e.getAttribute("src-orig"),s=e.getAttribute("data-attachment-id")||e.getAttribute("data-id")||"0",c=document.querySelector('img[data-attachment-id="'+s+'"] + figcaption');if(c)c=c.innerHTML;else c=e.getAttribute("data-image-caption");var u={originalElement:e,attachmentId:s,commentsOpened:e.getAttribute("data-comments-opened")||"0",imageMeta:i.getJSONAttribute(e,"data-image-meta")||{},title:e.getAttribute("data-image-title")||"",desc:e.getAttribute("data-image-description")||"",mediumFile:e.getAttribute("data-medium-file")||"",largeFile:e.getAttribute("data-large-file")||"",origFile:l||"",thumbSize:{width:e.naturalWidth,height:e.naturalHeight},caption:c||"",permalink:n&&n.getAttribute("href"),src:l||e.getAttribute("src")||""},d=i.closest(e,".tiled-gallery-item"),m=d&&d.querySelector(".tiled-gallery-caption"),f=m&&m.innerHTML;if(f)u.caption=f;var g=function(e){var t=e.getAttribute("data-orig-size")||"";if(t){var i=t.split(",");return{width:parseInt(i[0],10),height:parseInt(i[1],10)}}else return{width:e.getAttribute("data-original-width")||e.getAttribute("width")||void 0,height:e.getAttribute("data-original-height")||e.getAttribute("height")||void 0}}(e);if(u.origWidth=g.width||u.thumbSize.width,u.origHeight=g.height||u.thumbSize.height,"undefined"!=typeof wpcom&&wpcom.carousel&&wpcom.carousel.generateImgSrc)u.src=wpcom.carousel.generateImgSrc(e,o);else u.src=function(e){if("object"!=typeof e)e={};if(void 0===e.origFile)return"";if(void 0===e.origWidth||void 0===e.maxWidth)return e.origFile;if(void 0===e.mediumFile||void 0===e.largeFile)return e.origFile;var t=document.createElement("a");t.href=e.largeFile;var i=/^i[0-2]\.wp\.com$/i.test(t.hostname),r=x(e.mediumFile,e.origWidth,i),o=x(e.largeFile,e.origWidth,i),a=parseInt(o[0],10),n=parseInt(o[1],10),l=parseInt(r[0],10),s=parseInt(r[1],10);if(e.origMaxWidth=e.maxWidth,e.origMaxHeight=e.maxHeight,void 0!==window.devicePixelRatio&&window.devicePixelRatio>1)e.maxWidth=e.maxWidth*window.devicePixelRatio,e.maxHeight=e.maxHeight*window.devicePixelRatio;if(a>=e.maxWidth||n>=e.maxHeight)return e.largeFile;if(l>=e.maxWidth||s>=e.maxHeight)return e.mediumFile;if(i){var c=e.largeFile.lastIndexOf("?"),u=e.largeFile;if(-1!==c)if(u=e.largeFile.substring(0,c),e.origWidth>e.maxWidth||e.origHeight>e.maxHeight)e.origMaxWidth=2*e.maxWidth,e.origMaxHeight=2*e.maxHeight,u+="?fit="+e.origMaxWidth+"%2C"+e.origMaxHeight;return u}return e.origFile}({origFile:u.src,origWidth:u.origWidth,origHeight:u.origHeight,maxWidth:o.width,maxHeight:o.height,mediumFile:u.mediumFile,largeFile:u.largeFile});if(e.setAttribute("data-gallery-src",u.src),"0"!==u.attachmentId){u.title=t.texturize(u.title),u.desc=t.texturize(u.desc),u.caption=t.texturize(u.caption);var h=new Image;h.src=u.src;var v=document.createElement("div");v.classList.add("swiper-slide"),v.setAttribute("itemprop","associatedMedia"),v.setAttribute("itemscope",""),v.setAttribute("itemtype","https://schema.org/ImageObject");var y=document.createElement("div");if(y.classList.add("swiper-zoom-container"),p.gallery.appendChild(v),v.appendChild(y),y.appendChild(h),v.setAttribute("data-attachment-id",u.attachmentId),v.setAttribute("data-permalink",u.permalink),v.setAttribute("data-orig-file",u.origFile),a)u.previewImage=u.src;var w={el:v,attrs:u,index:r};p.slides.push(w)}}))}function _(e,t){if(!window.Swiper670){var r=document.querySelector("#jp-carousel-loading-overlay");i.show(r);var o=document.createElement("script");return o.id="jetpack-carousel-swiper-js",o.src=window.jetpackSwiperLibraryPath.url,o.async=!0,o.onload=function(){i.hide(r),C(e,t)},o.onerror=function(){i.hide(r)},void document.head.appendChild(o)}C(e,t)}function C(t,r){var l,s={imgSelector:".gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id], img[data-attachment-id], img[data-id]",startIndex:0},c=i.getJSONAttribute(t,"data-carousel-extra");if(!c)return;const u=t.querySelectorAll(s.imgSelector);if(u.length)if(y(),!p.isOpen){for(var d in p.isOpen=!0,o=getComputedStyle(document.body).overflow,document.body.style.overflow="hidden",a=getComputedStyle(document.documentElement).overflow,document.documentElement.style.overflow="hidden",n=window.scrollY||window.pageYOffset||0,p.container.setAttribute("data-carousel-extra",JSON.stringify(c)),m(["open","view_image"]),r||{})s[d]=r[d];if(-1===s.startIndex)s.startIndex=0;i.emitEvent(p.overlay,"jp_carousel.beforeOpen"),p.gallery.innerHTML="",p.overlay.style.opacity=1,p.overlay.style.display="block",T(u,s.startIndex),(e=new window.Swiper670(".jp-carousel-swiper-container",{centeredSlides:!0,zoom:!0,loop:p.slides.length>1,enabled:p.slides.length>1,pagination:{el:".jp-swiper-pagination",clickable:!0},navigation:{nextEl:".jp-swiper-button-next",prevEl:".jp-swiper-button-prev"},initialSlide:s.startIndex,on:{init:function(){b(s.startIndex)}},preventClicks:!1,preventClicksPropagation:!1,preventInteractionOnTransition:!i.isTouch(),threshold:5})).on("slideChange",(function(e){var t;if(0===e.activeIndex)t=p.slides.length-1;else if(e.activeIndex===p.slides.length+1)t=0;else t=e.activeIndex-1;b(t),p.overlay.classList.remove("jp-carousel-hide-controls")})),e.on("zoomChange",(function(e,t){if(t>1)p.overlay.classList.add("jp-carousel-hide-controls");if(1===t)p.overlay.classList.remove("jp-carousel-hide-controls")})),e.on("doubleTap",(function(e){if(clearTimeout(l),1===e.zoom.scale)var t=setTimeout((function(){p.overlay.classList.remove("jp-carousel-hide-controls"),clearTimeout(t)}),150)})),e.on("tap",(function(){if(e.zoom.scale>1)l=setTimeout((function(){p.overlay.classList.toggle("jp-carousel-hide-controls")}),150)})),i.fadeIn(p.overlay,(function(){i.emitEvent(p.overlay,"jp_carousel.afterOpen")}))}}function I(e){if("click"!==e.type){if("keydown"===e.type){const t=document.activeElement.parentElement,i=t&&t.classList.contains("tiled-gallery__item");if((" "===e.key||"Enter"===e.key)&&i)return void M(e)}}else M(e)}function M(e){if(window.CSS&&window.CSS.supports&&window.CSS.supports("display","grid")){var t,r=e.target,o=i.closest(r,c);if(o){if(!(t=o)||!t.getAttribute("data-carousel-extra"))return;var a=r.parentElement,n=a.parentElement,l=null;if(n&&n.classList.contains("wp-block-image"))l=a.getAttribute("href");else if(a&&a.classList.contains("wp-block-image")&&a.querySelector(":scope > a"))l=a.querySelector(":scope > a").getAttribute("href");if(l&&l.split("?")[0]!==r.getAttribute("data-orig-file").split("?")[0]&&l!==r.getAttribute("data-permalink"))return;if(a.classList.contains("gallery-caption"))return;if(i.matches(a,"figcaption"))return;document.documentElement.style.height="auto",e.preventDefault(),e.stopPropagation();var s=i.closest(r,d),u=Array.prototype.indexOf.call(o.querySelectorAll(d),s);_(o,{startIndex:u})}}}if(document.body.addEventListener("click",I),document.body.addEventListener("keydown",I),1===Number(jetpackCarouselStrings.single_image_gallery))j(),document.body.addEventListener("is.post-load",(function(){j()}));if(window.addEventListener("hashchange",(function(){var e=/jp-carousel-(\d+)/;if(window.location.hash&&e.test(window.location.hash)){if(window.location.hash!==l||!p.isOpen)if(!window.location.hash||!p.gallery||p.isOpen||!history.back){l=window.location.hash;for(var t=window.location.hash.match(e),i=parseInt(t[1],10),r=document.querySelectorAll(c),o=0;o<r.length;o++){for(var a,n=r[o],s=n.querySelectorAll("img"),u=0;u<s.length;u++)if(parseInt(s[u].getAttribute("data-attachment-id"),10)===i||parseInt(s[u].getAttribute("data-id"),10)===i){a=u;break}if(void 0!==a){S(n,a);break}}}else history.back()}else if(p.isOpen)L()})),window.location.hash)i.emitEvent(window,"hashchange")}if("loading"!==document.readyState)r();else document.addEventListener("DOMContentLoaded",r)}();