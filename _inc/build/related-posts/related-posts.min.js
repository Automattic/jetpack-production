!function(){"use strict";var t={response:null,getEndpointURL:function(t){var e,s="undefined"!=typeof wp&&wp.customize&&wp.customize.settings&&wp.customize.settings.url&&wp.customize.settings.url.self;if(s)(e=document.createElement("a")).href=wp.customize.settings.url.self;else e=document.location;if("string"==typeof t&&t.match(/^https?:\/\//))(e=document.createElement("a")).href=t;var a="relatedposts=1",o=document.querySelector("#jp-relatedposts");if(!o)return!1;if(o.hasAttribute("data-exclude"))a+="&relatedposts_exclude="+o.getAttribute("data-exclude");if(s)a+="&jetpackrpcustomize=1";var r=e.pathname;if("/"!==r[0])r="/"+r;if(""===e.search)return r+"?"+a;else return r+e.search+"&"+a},getAnchor:function(t,e){var s=t.title,a=document.createElement("a");if(a.setAttribute("class",e),a.setAttribute("href",t.url),a.setAttribute("title",s),a.setAttribute("data-origin",t.url_meta.origin),a.setAttribute("data-position",t.url_meta.position),""!==t.rel)a.setAttribute("rel",t.rel);var o=document.createElement("div");o.appendChild(a);var r=o.innerHTML;return[r.substring(0,r.length-4),"</a>"]},generateMinimalHtml:function(t,e){var s=this,a="";return t.forEach((function(t,o){var r=s.getAnchor(t,"jp-relatedposts-post-a"),i="jp-relatedposts-post jp-relatedposts-post"+o;if(t.classes.length>0)i+=" "+t.classes.join(" ");if(a+='<p class="'+i+'" data-post-id="'+t.id+'" data-post-format="'+t.format+'">',a+='<span class="jp-relatedposts-post-title">'+r[0]+t.title+r[1]+"</span>",e.showDate)a+='<time class="jp-relatedposts-post-date" datetime="'+t.date+'">'+t.date+"</time>";if(e.showContext)a+='<span class="jp-relatedposts-post-context">'+t.context+"</span>";a+="</p>"})),'<div class="jp-relatedposts-items jp-relatedposts-items-minimal jp-relatedposts-'+e.layout+' ">'+a+"</div>"},generateVisualHtml:function(t,e){var s=this,a="";return t.forEach((function(t,o){var r=s.getAnchor(t,"jp-relatedposts-post-a"),i="jp-relatedposts-post jp-relatedposts-post"+o;if(t.classes.length>0)i+=" "+t.classes.join(" ");if(!t.img.src)i+=" jp-relatedposts-post-nothumbs";else i+=" jp-relatedposts-post-thumbs";var p=document.createElement("p");p.innerHTML=t.excerpt;var n=p.textContent;if(a+='<div class="'+i+'" data-post-id="'+t.id+'" data-post-format="'+t.format+'">',t.img.src)a+=r[0]+'<img class="jp-relatedposts-post-img" loading="lazy" src="'+t.img.src+'" width="'+t.img.width+'" height="'+t.img.height+(t.img.srcset?'" srcset="'+t.img.srcset:"")+(t.img.sizes?'" sizes="'+t.img.sizes:"")+'" alt="'+t.img.alt_text+'" />'+r[1];else{var l=s.getAnchor(t,"jp-relatedposts-post-a jp-relatedposts-post-aoverlay");a+=l[0]+l[1]}if(a+="<"+related_posts_js_options.post_heading+' class="jp-relatedposts-post-title">'+r[0]+t.title+r[1]+"</"+related_posts_js_options.post_heading+">",a+='<p class="jp-relatedposts-post-excerpt">'+n+"</p>",e.showDate)a+='<time class="jp-relatedposts-post-date" datetime="'+t.date+'">'+t.date+"</time>";if(e.showContext)a+='<p class="jp-relatedposts-post-context">'+t.context+"</p>";a+="</div>"})),'<div class="jp-relatedposts-items jp-relatedposts-items-visual jp-relatedposts-'+e.layout+' ">'+a+"</div>"},setVisualExcerptHeights:function(){var t=document.querySelectorAll("#jp-relatedposts .jp-relatedposts-post-nothumbs .jp-relatedposts-post-excerpt");if(t.length)for(var e=getComputedStyle(t[0]),s=parseInt(e.fontSize,10),a=parseInt(e.lineHeight,10),o=0;o<t.length;o++)t[o].style.maxHeight=5*a/s+"em"},getTrackedUrl:function(t){var e="relatedposts_hit=1";e+="&relatedposts_origin="+t.getAttribute("data-origin"),e+="&relatedposts_position="+t.getAttribute("data-position");var s=t.pathname;if("/"!==s[0])s="/"+s;if(""===t.search)return s+"?"+e;else return s+t.search+"&"+e},cleanupTrackedUrl:function(){if("function"==typeof history.replaceState){var t=document.location.search.replace(/\brelatedposts_[a-z]+=[0-9]*&?\b/gi,"");if("?"===t)t="";if(document.location.search!==t)history.replaceState({},document.title,document.location.pathname+t)}}};function e(){t.setVisualExcerptHeights();var e=document.querySelectorAll("#jp-relatedposts a.jp-relatedposts-post-a");Array.prototype.forEach.call(e,(function(e){document.addEventListener("click",(function(){e.href=t.getTrackedUrl(e)}))}))}function s(){t.cleanupTrackedUrl();var s=t.getEndpointURL(),a=document.querySelector("#jp-relatedposts");if(s)if(!document.querySelectorAll("#jp-relatedposts .jp-relatedposts-post").length){var o=new XMLHttpRequest;o.open("GET",s,!0),o.setRequestHeader("x-requested-with","XMLHttpRequest"),o.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE&&200===this.status)try{var s=JSON.parse(o.responseText);if(0===s.items.length||0===a.length)return;t.response=s;var r,i,p={};if("undefined"!=typeof wp&&wp.customize)i=wp.customize.instance("jetpack_relatedposts[show_thumbnails]").get(),p.showDate=wp.customize.instance("jetpack_relatedposts[show_date]").get(),p.showContext=wp.customize.instance("jetpack_relatedposts[show_context]").get(),p.layout=wp.customize.instance("jetpack_relatedposts[layout]").get();else i=s.show_thumbnails,p.showDate=s.show_date,p.showContext=s.show_context,p.layout=s.layout;r=!i?t.generateMinimalHtml(s.items,p):t.generateVisualHtml(s.items,p);var n=document.createElement("div");if(a.appendChild(n),n.outerHTML=r,p.showDate){var l=a.querySelectorAll(".jp-relatedposts-post-date");Array.prototype.forEach.call(l,(function(t){t.style.display="block"}))}a.style.display="block",e()}catch(t){}},o.send()}else e()}function a(){if("undefined"!=typeof wp&&wp.customize){if(wp.customize.selectiveRefresh)wp.customize.selectiveRefresh.bind("partial-content-rendered",(function(t){if("jetpack_relatedposts"===t.partial.id)s()}));wp.customize.bind("preview-ready",s)}else s()}if("loading"!==document.readyState)a();else document.addEventListener("DOMContentLoaded",a)}();