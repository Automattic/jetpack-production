/*! For license information please see jmpress.min.js.LICENSE.txt */
!function(e,t,s,a){"use strict";var r,n,i,o=(r=t.createElement("dummy").style,n="Webkit Moz O ms Khtml".split(" "),i={},function(e){if(void 0===i[e]){var t=e.charAt(0).toUpperCase()+e.substr(1),s=(e+" "+n.join(t+" ")+t).split(" ");for(var o in i[e]=null,s)if(r[s[o]]!==a){i[e]=s[o];break}}return i[e]});function l(e){if(e){var t=1+e.substr(1).search(/[A-Z]/);return"-"+e.substr(0,t).toLowerCase()+"-"+e.substr(t).toLowerCase()}}function c(e){if(!e)return"";else return e+","}function u(e){if(e.length>0)return e;else return null}var p={stepSelector:".step",containerClass:"",canvasClass:"",areaClass:"",notSupportedClass:"not-supported",fullscreen:!0,animation:{transformOrigin:"top left",transitionProperty:c(l(o("transform")))+c(l(o("perspective")))+"opacity",transitionDuration:"1s",transitionDelay:"500ms",transitionTimingFunction:"ease-in-out",transformStyle:"preserve-3d"},transitionDuration:1500},f={beforeChange:1,beforeInitStep:1,initStep:1,beforeInit:1,afterInit:1,beforeDeinit:1,afterDeinit:1,applyStep:1,unapplyStep:1,setInactive:1,beforeActive:1,setActive:1,selectInitialStep:1,selectPrev:1,selectNext:1,selectHome:1,selectEnd:1,idle:1,applyTarget:1};for(var d in f)p[d]=[];function m(r){r=e.extend(!0,{},r||{});var n={},i=null;for(i in f)n[i]=e.isFunction(r[i])?[r[i]]:r[i],r[i]=[];var o=e.extend(!0,{},p,r);for(i in f)if(n[i])Array.prototype.push.apply(o[i],n[i]);var l=e(this),c=null,d=null,m={container:"",area:""},g=null,b=null,y=!1,j=null,D=!1;function S(t,s){var a=v(t),r={oldStyle:e(t).attr("style")||""},n={data:a,stepData:r};if(C.call(this,"beforeInitStep",e(t),n),r.delegate=a.delegate,C.call(this,"initStep",e(t),n),e(t).data("stepData",r),!e(t).attr("id"))e(t).attr("id","step-"+(s+1));C.call(this,"applyStep",e(t),n)}function w(t){var s=e(t).data("stepData");e(t).attr("style",s.oldStyle),C.call(this,"unapplyStep",e(t),{stepData:s})}function x(){if(y)C.call(this,"setInactive",y,{stepData:e(y).data("stepData"),reason:"deinit"});if(b.jmpressClass)e(l).removeClass(b.jmpressClass);if(C.call(this,"beforeDeinit",e(this),{}),e(o.stepSelector,l).each((function(e){w.call(l,this)})),c.attr("style",m.container),o.fullscreen)e("html").attr("style","");if(d.attr("style",m.area),e(g).children().each((function(){l.append(e(this))})),o.fullscreen)g.remove();else g.remove(),d.remove();C.call(this,"afterDeinit",e(this),{}),e(l).data("jmpressmethods",!1)}function C(t,s,a){a.settings=o,a.current=b,a.container=c,a.parents=s?e(s).parentsUntil(l).not(l).filter(o.stepSelector):null,a.current=b,a.jmpress=this;var r={};return e.each(o[t],(function(e,t){r.value=t.call(l,s,a)||r.value})),r.value}function T(t,s){var r;if(e.isPlainObject(t))r=t.substep,t=t.step;if("string"==typeof t)t=l.find(t).first();if(!t||!e(t).data("stepData"))return!1;P.call(this);var n=e(t).data("stepData"),i=!1;if(C.call(this,"beforeChange",t,{stepData:n,reason:s,cancel:function(){i=!0}}),i)return a;var c={},p=t;if(e(t).data("stepData").delegate)if(p=u(e(t).parentsUntil(l).filter(o.stepSelector).filter(n.delegate))||u(e(t).near(n.delegate))||u(e(t).near(n.delegate,!0))||u(e(n.delegate,l)))n=p.data("stepData");else p=t;if(D)C.call(this,"setInactive",D,{stepData:e(D).data("stepData"),delegatedFrom:y,reason:s,target:c,nextStep:p,nextSubstep:r,nextStepData:n});var f={stepData:n,delegatedFrom:t,reason:s,target:c,substep:r,prevStep:D,prevSubstep:j,prevStepData:D&&e(D).data("stepData")};if(C.call(this,"beforeActive",p,f),C.call(this,"setActive",p,f),b.jmpressClass)e(l).removeClass(b.jmpressClass);if(e(l).addClass(b.jmpressClass="step-"+e(p).attr("id")),b.jmpressDelegatedClass)e(l).removeClass(b.jmpressDelegatedClass);if(e(l).addClass(b.jmpressDelegatedClass="delegating-step-"+e(t).attr("id")),C.call(this,"applyTarget",p,e.extend({canvas:g,area:d,beforeActive:D},f)),y=t,j=f.substep,D=p,b.idleTimeout)clearTimeout(b.idleTimeout);return b.idleTimeout=setTimeout((function(){C.call(this,"idle",p,f)}),Math.max(1,o.transitionDuration-100)),p}function P(){!function t(){if("BODY"===e(c)[0].tagName)try{s.scrollTo(0,0)}catch(e){}function a(){if(0!==e(c).scrollTop()||0!==e(c).scrollLeft())t()}e(c).scrollTop(0),e(c).scrollLeft(0),setTimeout(a,1),setTimeout(a,10),setTimeout(a,100),setTimeout(a,200),setTimeout(a,400)}()}if(l.data("jmpressmethods",{select:T,reselect:function(e){return T({step:y,substep:j},e)},scrollFix:P,goTo:function(e){return T.call(this,e,"jump")},next:function(){return T.call(this,C.call(this,"selectNext",y,{stepData:e(y).data("stepData"),substep:j}),"next")},prev:function(){return T.call(this,C.call(this,"selectPrev",y,{stepData:e(y).data("stepData"),substep:j}),"prev")},home:function(){return T.call(this,C.call(this,"selectHome",y,{stepData:e(y).data("stepData")}),"home")},end:function(){return T.call(this,C.call(this,"selectEnd",y,{stepData:e(y).data("stepData")}),"end")},canvas:function(t){return h(g,t||{}),e(g)},container:function(){return c},settings:function(){return o},active:function(){return D&&e(D)},current:function(){return b},fire:function(t,s,a){if(!f[t])e.error("callback "+t+" is not registered.");else return C.call(this,t,s,a)},init:function(t){S.call(this,e(t),b.nextIdNumber++)},deinit:function(t){if(t)w.call(this,e(t));else x.call(this)},reapply:function(t){C.call(this,"unapplyStep",e(t),{stepData:t.data("stepData")}),C.call(this,"applyStep",e(t),{stepData:t.data("stepData")})}}),0!=(-1===(M=navigator.userAgent.toLowerCase()).search(/(iphone)|(ipod)|(android)/)||-1!==M.search(/(chrome)/))){if(o.notSupportedClass)l.removeClass(o.notSupportedClass);var M,A=e(o.stepSelector,l);if(c=l,d=e("<div />"),g=e("<div />"),e(l).children().filter(A).each((function(){g.append(e(this))})),o.fullscreen)c=e("body"),e("html").css({overflow:"hidden"}),d=l;if(m.area=d.attr("style")||"",m.container=c.attr("style")||"",o.fullscreen)c.css({height:"100%"}),l.append(g);else c.css({position:"relative"}),d.append(g),l.append(d);e(c).addClass(o.containerClass),e(d).addClass(o.areaClass),e(g).addClass(o.canvasClass),t.documentElement.style.height="100%",c.css({overflow:"hidden"});var I={position:"absolute",transitionDuration:"0s"};if(I=e.extend({},o.animation,I),h(d,I),h(d,{top:"50%",left:"50%",perspective:"1000px"}),h(g,I),b={},C.call(this,"beforeInit",null,{}),A.each((function(e){S.call(l,this,e)})),b.nextIdNumber=A.length,C.call(this,"afterInit",null,{}),T.call(this,C.call(this,"selectInitialStep","init",{})),o.initClass)e(A).removeClass(o.initClass)}else if(o.notSupportedClass)l.addClass(o.notSupportedClass)}function h(t,s){var a,r,n={};for(a in s)if(s.hasOwnProperty(a))if(null!==(r=o(a)))n[r]=s[a];return e(t).css(n),t}function v(t){if(e(t)[0].dataset)return e.extend({},e(t)[0].dataset);var s={},a=e(t)[0].attributes;return e.each(a,(function(e,t){if("data-"===t.nodeName.substr(0,5))s[function(e){e=e.split("-");for(var t=1;t<e.length;t++)e[t]=e[t].substr(0,1).toUpperCase()+e[t].substr(1);return e.join("")}(t.nodeName.substr(5))]=t.nodeValue})),s}var g={init:m,initialized:function(){return!!e(this).data("jmpressmethods")},deinit:function(){},css:h,pfx:o,defaults:function(){return p},register:function(t,s){if(e.isFunction(s))if(g[t])e.error("function "+t+" is already registered.");else g[t]=s;else if(f[t])e.error("callback "+t+" is already registered.");else f[t]=1,p[t]=[]},dataset:v};e.fn.jmpress=function(t){function s(){var s=e(this).data("jmpressmethods");if(s&&s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));else if(g[t])return g[t].apply(this,Array.prototype.slice.call(arguments,1));else if(f[t]&&s){var a=s.settings(),r=Array.prototype.slice.call(arguments,1)[0];if(e.isFunction(r))a[t]=a[t]||[],a[t].push(r)}else if("object"==typeof t||!t)return m.apply(this,arguments);else e.error("Method "+t+" does not exist on jQuery.jmpress");return this}var a,r=arguments;return e(this).each((function(e,t){a=s.apply(t,r)})),a},e.extend({jmpress:function(t){if(g[t])return g[t].apply(this,Array.prototype.slice.call(arguments,1));else if(f[t]){var s=Array.prototype.slice.call(arguments,1)[0];if(e.isFunction(s))p[t].push(s);else e.error("Second parameter should be a function: $.jmpress( callbackName, callbackFunction )")}else e.error("Method "+t+" does not exist on jQuery.jmpress")}})}(jQuery,document,window),function(e){"use strict";function t(t,s,a,r){var n;return t.each((function(t,i){if(r)if(n=s(i,a,r))return!1;if(e(i).is(a))return n=i,!1;if(!r)if(n=s(i,a,r))return!1})),n}function s(a,r,n){var i=e(a).children();if(n)i=e(i.get().reverse());return t(i,s,r,n)}function a(a,r,n){return t(e(a)[n?"prevAll":"nextAll"](),s,r,n)}e.fn.near=function(t,r){var n=[];return e(this).each((function(i,o){var l=(r?!1:s(o,t,r))||a(o,t,r)||function(t,s,r){var n,i=e(t).parents();return i=e(i.get()),e.each(i.get(),(function(t,i){if(r&&e(i).is(s))return n=i,!1;if(n=a(i,s,r))return!1;else return})),n}(o,t,r);if(l)n.push(l)})),e(n)}}(jQuery,document,window),function(e){"use strict";function t(e){return Math.round(1e4*e)/1e4+""}var s={3:{transform:function(s,a){var r="translate(-50%,-50%)";e.each(a,(function(e,s){var a,n=["X","Y","Z"];if("translate"===s[0])r+=" translate3d("+t(s[1]||0)+"px,"+t(s[2]||0)+"px,"+t(s[3]||0)+"px)";else if("rotate"===s[0]){var i=s[4]?[1,2,3]:[3,2,1];for(a=0;a<3;a++)r+=" rotate"+n[i[a]-1]+"("+t(s[i[a]]||0)+"deg)"}else if("scale"===s[0])for(a=0;a<3;a++)r+=" scale"+n[a]+"("+t(s[a+1]||1)+")"})),e.jmpress("css",s,e.extend({},{transform:r}))}},2:{transform:function(s,a){var r="translate(-50%,-50%)";e.each(a,(function(e,s){var a=["X","Y"];if("translate"===s[0])r+=" translate("+t(s[1]||0)+"px,"+t(s[2]||0)+"px)";else if("rotate"===s[0])r+=" rotate("+t(s[3]||0)+"deg)";else if("scale"===s[0])for(var n=0;n<2;n++)r+=" scale"+a[n]+"("+t(s[n+1]||1)+")"})),e.jmpress("css",s,e.extend({},{transform:r}))}},1:{transform:function(t,s){var a={top:0,left:0};e.each(s,(function(e,t){if("translate"===t[0])a.left=Math.round(t[1]||0)+"px",a.top=Math.round(t[2]||0)+"px"})),t.animate(a,1e3)}}},a=function(){if(e.jmpress("pfx","perspective"))return s[3];else if(e.jmpress("pfx","transform"))return s[2];else return s[1]}();e.jmpress("defaults").reasonableAnimation={},e.jmpress("initStep",(function(t,s){var a=s.data,r=s.stepData,n=parseFloat;e.extend(r,{x:n(a.x)||0,y:n(a.y)||0,z:n(a.z)||0,r:n(a.r)||0,phi:n(a.phi)||0,rotate:n(a.rotate)||0,rotateX:n(a.rotateX)||0,rotateY:n(a.rotateY)||0,rotateZ:n(a.rotateZ)||0,revertRotate:!1,scale:n(a.scale)||1,scaleX:n(a.scaleX)||!1,scaleY:n(a.scaleY)||!1,scaleZ:n(a.scaleZ)||1})})),e.jmpress("afterInit",(function(t,s){var a=s.settings.stepSelector,r=s.current;r.perspectiveScale=1,r.maxNestedDepth=0;for(var n=e(s.jmpress).find(a).children(a);n.length;)r.maxNestedDepth++,n=n.children(a)})),e.jmpress("applyStep",(function(t,s){if(e.jmpress("css",e(t),{position:"absolute",transformStyle:"preserve-3d"}),s.parents.length>0)e.jmpress("css",e(t),{top:"50%",left:"50%"});var r=s.stepData,n=[["translate",r.x||r.r*Math.sin(r.phi*Math.PI/180),r.y||-r.r*Math.cos(r.phi*Math.PI/180),r.z],["rotate",r.rotateX,r.rotateY,r.rotateZ||r.rotate,!0],["scale",r.scaleX||r.scale,r.scaleY||r.scale,r.scaleZ||r.scale]];a.transform(t,n)})),e.jmpress("setActive",(function(t,s){var a=s.target,r=s.stepData,n=a.transform=[];a.perspectiveScale=1;for(var i=s.current.maxNestedDepth;i>(s.parents.length||0);i--)n.push(["scale"],["rotate"],["translate"]);n.push(["scale",1/(r.scaleX||r.scale),1/(r.scaleY||r.scale),1/r.scaleZ]),n.push(["rotate",-r.rotateX,-r.rotateY,-(r.rotateZ||r.rotate)]),n.push(["translate",-(r.x||r.r*Math.sin(r.phi*Math.PI/180)),-(r.y||-r.r*Math.cos(r.phi*Math.PI/180)),-r.z]),a.perspectiveScale*=r.scaleX||r.scale,e.each(s.parents,(function(t,s){var r=e(s).data("stepData");n.push(["scale",1/(r.scaleX||r.scale),1/(r.scaleY||r.scale),1/r.scaleZ]),n.push(["rotate",-r.rotateX,-r.rotateY,-(r.rotateZ||r.rotate)]),n.push(["translate",-(r.x||r.r*Math.sin(r.phi*Math.PI/180)),-(r.y||-r.r*Math.cos(r.phi*Math.PI/180)),-r.z]),a.perspectiveScale*=r.scaleX||r.scale})),e.each(n,(function(e,t){if("rotate"===t[0])a(1),a(2),a(3);function a(a){if(void 0===s.current["rotate"+a+"-"+e])s.current["rotate"+a+"-"+e]=t[a]||0;var r=s.current["rotate"+a+"-"+e],n=r%360,i=(t[a]||0)%360;if(n<0)n+=360;if(i<0)i+=360;var o=i-n;if(o<-180)o+=360;else if(o>180)o-=360;s.current["rotate"+a+"-"+e]=t[a]=r+o}}))})),e.jmpress("applyTarget",(function(t,s){var r,n=s.target,i=(s.stepData,s.settings),o=1.3*n.perspectiveScale<s.current.perspectiveScale,l=n.perspectiveScale>1.3*s.current.perspectiveScale,c=-1;if(e.each(n.transform,(function(e,t){if(!(t.length<=1))if("rotate"!==t[0]||t[1]%360!=0||t[2]%360!=0||t[3]%360!=0)if("scale"===t[0])c=e;else return!1})),c!==s.current.oldLastScale)o=l=!1,s.current.oldLastScale=c;var u=[];if(-1!==c)for(;c>=0;){if("scale"===n.transform[c][0])u.push(n.transform[c]),n.transform[c]=["scale"];c--}var p=i.animation;if(i.reasonableAnimation[s.reason])p=e.extend({},p,i.reasonableAnimation[s.reason]);if(r={perspective:Math.round(1e3*n.perspectiveScale)+"px"},r=e.extend({},p,r),!o)r.transitionDelay="0s";if(!s.beforeActive)r.transitionDuration="0s",r.transitionDelay="0s";if(e.jmpress("css",s.area,r),a.transform(s.area,u),r=e.extend({},p),!l)r.transitionDelay="0s";if(!s.beforeActive)r.transitionDuration="0s",r.transitionDelay="0s";s.current.perspectiveScale=n.perspectiveScale,e.jmpress("css",s.canvas,r),a.transform(s.canvas,n.transform)}))}(jQuery,document,window),function(e){"use strict";var t=e.jmpress,s="activeClass",a="nestedActiveClass",r=t("defaults");r[a]="nested-active",r[s]="active",t("setInactive",(function(t,r){var n=r.settings,i=n[s],o=n[a];if(i)e(t).removeClass(i);if(o)e.each(r.parents,(function(t,s){e(s).removeClass(o)}))})),t("setActive",(function(t,r){var n=r.settings,i=n[s],o=n[a];if(i)e(t).addClass(i);if(o)e.each(r.parents,(function(t,s){e(s).addClass(o)}))}))}(jQuery,document,window),function(e){"use strict";var t=e.jmpress;function s(t,s){return e(this).find(s.settings.stepSelector).first()}function a(t,s,a,r){if(!s)return!1;var n=a.settings.stepSelector;s=e(s);do{var i=s.near(n,r);if(0===i.length||0===i.closest(t).length)i=e(t).find(n)[r?"last":"first"]();if(!i.length)return!1;s=i}while(s.data("stepData").exclude);return s}t("initStep",(function(e,t){t.stepData.exclude=t.data.exclude&&-1===["false","no"].indexOf(t.data.exclude)})),t("selectInitialStep",s),t("selectHome",s),t("selectEnd",(function(t,s){return e(this).find(s.settings.stepSelector).last()})),t("selectPrev",(function(e,t){return a(this,e,t,!0)})),t("selectNext",(function(e,t){return a(this,e,t)}))}(jQuery,document,window),function(e){"use strict";e.jmpress("selectInitialStep",(function(e,t){return t.settings.start}))}(jQuery,document,window),function(e){"use strict";var t=e.jmpress;function s(t,s,a){for(var r=0;r<s.length-1;r++){var n=s[r],i=s[r+1];if(e(t).jmpress("initialized"))e(n,t).data("stepData")[a]=i;else e(n,t).attr("data-"+a,i)}}function a(t,s,a,r){var n=s.stepData;if(n[a]){var i=e(t).near(n[a],r);if(i&&i.length)return i;if((i=e(n[a],this)[r?"last":"first"]())&&i.length)return i}}t("register","route",(function(e,t,a){if("string"==typeof e)e=[e,e];if(s(this,e,a?"prev":"next"),!t)s(this,e.reverse(),a?"next":"prev")})),t("initStep",(function(e,t){for(var s in{next:1,prev:1})t.stepData[s]=t.data[s]})),t("selectNext",(function(e,t){return a.call(this,e,t,"next")})),t("selectPrev",(function(e,t){return a.call(this,e,t,"prev",!0)}))}(jQuery,document,window),function(e){"use strict";var t=e.jmpress,s="ajax:afterStepLoaded",a="ajax:loadStep";t("register",a),t("register",s),t("defaults").ajaxLoadedClass="loaded",t("initStep",(function(t,s){s.stepData.src=e(t).attr("href")||s.data.src||!1,s.stepData.srcLoaded=!1})),t(a,(function(t,a){var r=a.stepData,n=r&&r.src,i=a.settings;if(n)e(t).addClass(i.ajaxLoadedClass),r.srcLoaded=!0,e(t).load(n,(function(r,n,i){e(a.jmpress).jmpress("fire",s,t,e.extend({},a,{response:r,status:n,xhr:i}))}))})),t("idle",(function(t,s){if(t){var r=s.settings,n=e(this);s.stepData,e(t).add(e(t).near(r.stepSelector)).add(e(t).near(r.stepSelector,!0)).add(n.jmpress("fire","selectPrev",t,{stepData:e(t).data("stepData")})).add(n.jmpress("fire","selectNext",t,{stepData:e(t).data("stepData")})).each((function(){var t=this,s=e(t).data("stepData");if(s.src&&!s.srcLoaded)n.jmpress("fire",a,t,{stepData:e(t).data("stepData")})}))}})),t("setActive",(function(t,s){var r=e(t).data("stepData");if(r.src&&!r.srcLoaded)e(this).jmpress("fire",a,t,{stepData:e(t).data("stepData")})}))}(jQuery,document,window),function(e,t,s){"use strict";var a=e.jmpress,r="a[href^='#']";function n(t){try{var a=e("#"+s.location.hash.replace(/^#\/?/,""));return a.length>0&&a.is(t.stepSelector)?a:void 0}catch(e){}}function i(e){var t="#/"+e;if(s.history&&s.history.pushState){if(s.location.hash!==t)s.history.pushState({},"",t)}else if(s.location.hash!==t)s.location.hash=t}a("defaults").hash={use:!0,update:!0,bindChange:!0},a("selectInitialStep",(function(t,a){var o=a.settings,l=o.hash,c=a.current,u=e(this);if(a.current.hashNamespace=".jmpress-"+Math.round(1e5*Math.random(),0),l.use){if(l.bindChange)e(s).bind("hashchange"+c.hashNamespace,(function(e){var t=n(o);if(u.jmpress("initialized"))u.jmpress("scrollFix");if(t&&t.length){if(t.attr("id")!==u.jmpress("active").attr("id"))u.jmpress("select",t);i(t.attr("id"))}e.preventDefault()})),e(r).on("click"+c.hashNamespace,(function(t){var s=e(this).attr("href");try{if(e(s).is(o.stepSelector))u.jmpress("select",s),t.preventDefault(),t.stopPropagation()}catch(e){}}));return n(o)}})),a("afterDeinit",(function(t,a){e(r).off(a.current.hashNamespace),e(s).unbind(a.current.hashNamespace)})),a("setActive",(function(t,s){var a=s.settings,r=s.current;if(a.hash.use&&a.hash.update)clearTimeout(r.hashtimeout),r.hashtimeout=setTimeout((function(){i(e(s.delegatedFrom).attr("id"))}),a.transitionDuration+200)}))}(jQuery,document,window),function(e,t){"use strict";var s=e.jmpress,a="next",r="prev";function n(e){e.preventDefault(),e.stopPropagation()}s("defaults").keyboard={use:!0,keys:{33:r,37:r,38:r,9:a+":"+r,32:a,34:a,39:a,40:a,36:"home",35:"end"},ignore:{INPUT:[32,37,38,39,40],TEXTAREA:[32,37,38,39,40],SELECT:[38,40]},tabSelector:"a[href]:visible, :input:visible"},s("afterInit",(function(s,a){var r=a.settings,i=r.keyboard,o=i.ignore,l=a.current,c=e(this);if(!r.fullscreen)c.attr("tabindex",0);l.keyboardNamespace=".jmpress-"+Math.round(1e5*Math.random(),0),e(r.fullscreen?t:c).bind("keypress"+l.keyboardNamespace,(function(e){for(var t in o)if(e.target.nodeName===t&&-1!==o[t].indexOf(e.which))return;if(e.which>=37&&e.which<=40||32===e.which)n(e)})),e(r.fullscreen?t:c).bind("keydown"+l.keyboardNamespace,(function(t){var s=e(t.target);if((r.fullscreen||s.closest(c).length)&&i.use){for(var a in o)if(s[0].nodeName===a&&-1!==o[a].indexOf(t.which))return;var l,u=!1;if(9===t.which){if(!s.closest(c.jmpress("active")).length)if(!t.shiftKey)l=c.jmpress("active").find("a[href], :input").filter(":visible").first();else u=!0;else if(l=s.near(i.tabSelector,t.shiftKey),!e(l).closest(r.stepSelector).is(c.jmpress("active")))l=void 0;if(l&&l.length>0)return l.focus(),c.jmpress("scrollFix"),void n(t);else if(t.shiftKey)u=!0}var p=i.keys[t.which];if("string"==typeof p){if(-1!==p.indexOf(":"))p=p.split(":"),p=t.shiftKey?p[1]:p[0];c.jmpress(p),n(t)}else if(e.isFunction(p))p.call(c,t);else if(p)c.jmpress.apply(c,p),n(t);if(u)(l=c.jmpress("active").find("a[href], :input").filter(":visible").last()).focus(),c.jmpress("scrollFix")}}))})),s("afterDeinit",(function(s,a){e(t).unbind(a.current.keyboardNamespace)}))}(jQuery,document,window),function(e,t,s){"use strict";var a,r=(a=navigator.userAgent.toLowerCase(),(/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[])[1]||""),n=e.jmpress("defaults");n.viewPort={width:!1,height:!1,maxScale:0,minScale:0,zoomable:0,zoomBindMove:!0,zoomBindWheel:!0};var i=n.keyboard.keys;function o(e,t){return Math.max(Math.min(e,t),-t)}function l(t,s,a){var r=e(this).jmpress("current"),n=e(this).jmpress("settings"),i=e(this).jmpress("active").data("stepData"),l=e(this).jmpress("container");if(!(0===r.userZoom&&a<0)){var c=i.viewPortZoomable||n.viewPort.zoomable;if(!(r.userZoom===c&&a>0)){r.userZoom+=a;var u=e(l).innerWidth()/2,p=e(l).innerHeight()/2;t=t?t-u:t,s=s?s-p:s,r.userTranslateX=o(r.userTranslateX-a*t/r.zoomOriginWindowScale/c,u*r.userZoom*r.userZoom/c),r.userTranslateY=o(r.userTranslateY-a*s/r.zoomOriginWindowScale/c,p*r.userZoom*r.userZoom/c),e(this).jmpress("reselect","zoom")}}}i["mozilla"===r?107:187]="zoomIn",i["mozilla"===r?109:189]="zoomOut",n.reasonableAnimation.resize={transitionDuration:"0s",transitionDelay:"0ms"},n.reasonableAnimation.zoom={transitionDuration:"0s",transitionDelay:"0ms"},e.jmpress("initStep",(function(e,t){for(var s in{viewPortHeight:1,viewPortWidth:1,viewPortMinScale:1,viewPortMaxScale:1,viewPortZoomable:1})t.stepData[s]=t.data[s]&&parseFloat(t.data[s])})),e.jmpress("afterInit",(function(a,r){var n=this;if(r.current.viewPortNamespace=".jmpress-"+Math.round(1e5*Math.random(),0),e(s).bind("resize"+r.current.viewPortNamespace,(function(t){e(n).jmpress("reselect","resize")})),r.current.userZoom=0,r.current.userTranslateX=0,r.current.userTranslateY=0,r.settings.viewPort.zoomBindWheel)e(r.settings.fullscreen?t:this).bind("mousewheel"+r.current.viewPortNamespace+" DOMMouseScroll"+r.current.viewPortNamespace,(function(t,s){var a=(s=s||t.originalEvent.wheelDelta||-t.originalEvent.detail)/Math.abs(s);if(a<0)e(r.jmpress).jmpress("zoomOut",t.originalEvent.x,t.originalEvent.y);else if(a>0)e(r.jmpress).jmpress("zoomIn",t.originalEvent.x,t.originalEvent.y);return!1}));if(r.settings.viewPort.zoomBindMove)e(r.settings.fullscreen?t:this).bind("mousedown"+r.current.viewPortNamespace,(function(e){if(r.current.userZoom)r.current.userTranslating={x:e.clientX,y:e.clientY},e.preventDefault(),e.stopImmediatePropagation()})).bind("mousemove"+r.current.viewPortNamespace,(function(t){var s=r.current.userTranslating;if(s)e(n).jmpress("zoomTranslate",t.clientX-s.x,t.clientY-s.y),s.x=t.clientX,s.y=t.clientY,t.preventDefault(),t.stopImmediatePropagation()})).bind("mouseup"+r.current.viewPortNamespace,(function(e){if(r.current.userTranslating)r.current.userTranslating=void 0,e.preventDefault(),e.stopImmediatePropagation()}))})),e.jmpress("register","zoomIn",(function(e,t){l.call(this,e||0,t||0,1)})),e.jmpress("register","zoomOut",(function(e,t){l.call(this,e||0,t||0,-1)})),e.jmpress("register","zoomTranslate",(function(t,s){var a=e(this).jmpress("current"),r=e(this).jmpress("settings"),n=e(this).jmpress("active").data("stepData"),i=e(this).jmpress("container"),l=n.viewPortZoomable||r.viewPort.zoomable,c=e(i).innerWidth(),u=e(i).innerHeight();a.userTranslateX=o(a.userTranslateX+t/a.zoomOriginWindowScale,c*a.userZoom*a.userZoom/l),a.userTranslateY=o(a.userTranslateY+s/a.zoomOriginWindowScale,u*a.userZoom*a.userZoom/l),e(this).jmpress("reselect","zoom")})),e.jmpress("afterDeinit",(function(a,r){e(r.settings.fullscreen?t:this).unbind(r.current.viewPortNamespace),e(s).unbind(r.current.viewPortNamespace)})),e.jmpress("setActive",(function(t,s){var a=s.settings.viewPort,r=s.stepData.viewPortHeight||a.height,n=s.stepData.viewPortWidth||a.width,i=s.stepData.viewPortMaxScale||a.maxScale,o=s.stepData.viewPortMinScale||a.minScale,l=r&&e(s.container).innerHeight()/r,c=n&&e(s.container).innerWidth()/n,u=(c||l)&&Math.min(c||l,l||c);if(u){if(u=u||1,i)u=Math.min(u,i);if(o)u=Math.max(u,o);var p=s.stepData.viewPortZoomable||s.settings.viewPort.zoomable;if(p){var f=1/u-1/i;u=1/(1/u-(f/=p)*s.current.userZoom)}if(s.target.transform.reverse(),s.current.userTranslateX&&s.current.userTranslateY)s.target.transform.push(["translate",s.current.userTranslateX,s.current.userTranslateY,0]);else s.target.transform.push(["translate"]);s.target.transform.push(["scale",u,u,1]),s.target.transform.reverse(),s.target.perspectiveScale/=u}s.current.zoomOriginWindowScale=u})),e.jmpress("setInactive",(function(t,s){if(!s.nextStep||!t||e(s.nextStep).attr("id")!==e(t).attr("id"))s.current.userZoom=0,s.current.userTranslateX=0,s.current.userTranslateY=0}))}(jQuery,document,window),function(e){"use strict";var t=e.jmpress;t("defaults").mouse={clickSelects:!0},t("afterInit",(function(t,s){var a=s.settings,r=a.stepSelector,n=s.current,i=e(this);n.clickableStepsNamespace=".jmpress-"+Math.round(1e5*Math.random(),0),i.bind("click"+n.clickableStepsNamespace,(function(t){if(a.mouse.clickSelects&&!n.userZoom){var s=e(t.target).closest(r);if(!s.is(i.jmpress("active")))if(s.length)i.jmpress("select",s[0],"click"),t.preventDefault(),t.stopPropagation()}}))})),t("afterDeinit",(function(t,s){e(this).unbind(s.current.clickableStepsNamespace)}))}(jQuery,document,window),function(e,t){"use strict";var s=e.jmpress;s("afterInit",(function(s,a){var r=a.settings,n=a.current,i=a.jmpress;n.mobileNamespace=".jmpress-"+Math.round(1e5*Math.random(),0);var o,l=[0,0];e(r.fullscreen?t:i).bind("touchstart"+n.mobileNamespace,(function(e){o=e.originalEvent.touches[0],l=[o.pageX,o.pageY]})).bind("touchmove"+n.mobileNamespace,(function(e){return o=e.originalEvent.touches[0],e.preventDefault(),!1})).bind("touchend"+n.mobileNamespace,(function(t){var s=[o.pageX,o.pageY],a=[s[0]-l[0],s[1]-l[1]];if(Math.max(Math.abs(a[0]),Math.abs(a[1]))>50)return a=Math.abs(a[0])>Math.abs(a[1])?a[0]:a[1],e(i).jmpress(a>0?"prev":"next"),t.preventDefault(),!1}))})),s("afterDeinit",(function(s,a){var r=a.settings,n=a.current,i=a.jmpress;e(r.fullscreen?t:i).unbind(n.mobileNamespace)}))}(jQuery,document,window),function(e,t,s,a){"use strict";var r=e.jmpress,n="_template_",i="_applied_template_",o={};function l(t,s,r){for(var n in s){var i=n;if(r)i=r+i.substr(0,1).toUpperCase()+i.substr(1);if(e.isPlainObject(s[n]))l(t,s[n],i);else if(t[i]===a)t[i]=s[n]}}function c(t,s){if(e.isArray(s))if(s.length<t.length)e.error("more nested steps than children in template");else t.each((function(t,a){var r=(a=e(a)).data(n)||{};l(r,s[t]),a.data(n,r)}));else if(e.isFunction(s))t.each((function(a,r){var i=(r=e(r)).data(n)||{};l(i,s(a,r,t)),r.data(n,i)}))}function u(e,t,s,a){if(s.children)c(t.children(a.settings.stepSelector),s.children);!function(e,t){l(e,t)}(e,s)}r("beforeInitStep",(function(t,s){t=e(t);var a=s.data,r=a.template,l=t.data(i),c=t.data(n);if(r)e.each(r.split(" "),(function(e,r){var n=o[r];u(a,t,n,s)}));if(l)u(a,t,l,s);if(c)if(u(a,t,c,s),t.data(n,null),c.template)e.each(c.template.split(" "),(function(e,r){var n=o[r];u(a,t,n,s)}))})),r("beforeInit",(function(t,s){var a=r("dataset",this).template,n=s.settings.stepSelector;if(a){var i=o[a];c(e(this).find(n).filter((function(){return!e(this).parent().is(n)})),i.children)}})),r("register","template",(function(t,s){if(o[t])o[t]=e.extend(!0,{},o[t],s);else o[t]=e.extend(!0,{},s)})),r("register","apply",(function(t,s){if(!s){var a=e(this).jmpress("settings").stepSelector;c(e(this).find(a).filter((function(){return!e(this).parent().is(a)})),t)}else if(e.isArray(s))c(e(t),s);else{var r;if("string"==typeof s)r=o[s];else r=e.extend(!0,{},s);e(t).each((function(t,s){var a=(s=e(s)).data(i)||{};l(a,r),s.data(i,a)}))}}))}(jQuery,document,window),function(e){"use strict";e.jmpress("setActive",(function(t,s){if(s.prevStep!==t)e(t).triggerHandler("enterStep")})),e.jmpress("setInactive",(function(t,s){if(s.nextStep!==t)e(t).triggerHandler("leaveStep")}))}(jQuery,document,window),function(e,t,s,a){"use strict";function r(t,s,a,r){r=r||t.length-1;for(var n=a=a||0;n<r+1;n++)if(e(t[n].element).is(s))return n}function n(t,s,a){e.each(s._on,(function(e,s){t.push({substep:s.substep,delay:s.delay+a}),n(t,s.substep,s.delay+a)}))}e.jmpress("defaults").customAnimationDataAttribute="jmpress",e.jmpress("afterInit",(function(e,t){t.current.animationTimeouts=[],t.current.animationCleanupWaiting=[]})),e.jmpress("applyStep",(function(t,s){var i={},o=[];if(e(t).find("[data-"+s.settings.customAnimationDataAttribute+"]").each((function(a,r){if(e(r).closest(s.settings.stepSelector).is(t))o.push({element:r})})),0!==o.length){e.each(o,(function(t,a){a.info=function(t){for(var s=t.split(" "),a=s[0],r={willClass:"will-"+a,doClass:"do-"+a,hasClass:"has-"+a},n="",i=1;i<s.length;i++){var o=s[i];switch(n){case"":if("after"===o)n="after";else e.warn("unknown keyword in '"+t+"'. '"+o+"' unknown.");break;case"after":if(o.match(/^[1-9][0-9]*m?s?/)){var l=parseFloat(o);if(-1!==o.indexOf("ms"))l*=1;else if(-1!==o.indexOf("s"))l*=1e3;else if(-1!==o.indexOf("m"))l*=6e4;r.delay=l}else r.after=Array.prototype.slice.call(s,i).join(" "),i=s.length}}return r}(e(a.element).data(s.settings.customAnimationDataAttribute)),e(a.element).addClass(a.info.willClass),a._on=[],a._after=null}));var l={_after:a,_on:[],info:{}};if(e.each(o,(function(e,t){var s=t.info.after;if(s)if("step"===s)s=l;else if("prev"===s)s=o[e-1];else{var n=r(o,s,0,e-1);if(n===a)n=r(o,s);s=n===a||n===e?o[e-1]:o[n]}else s=o[e-1];if(s){if(!t.info.delay){if(!s._after)return void(s._after=t);s=s._after}s._on.push({substep:t,delay:t.info.delay||0})}})),l._after===a&&0===l._on.length){var c=r(o,s.stepData.startSubstep)||0;l._after=o[c]}var u=[];do{var p=[{substep:l,delay:0}];n(p,l,0),u.push(p),l=null,e.each(p,f)}while(l);i.list=u,e(t).data("substepsData",i)}function f(e,t){if(t.substep._after)return l=t.substep._after,!1}})),e.jmpress("unapplyStep",(function(t,s){var a=e(t).data("substepsData");if(a)e.each(a.list,(function(t,s){e.each(s,(function(t,s){if(s.substep.info.willClass)e(s.substep.element).removeClass(s.substep.info.willClass);if(s.substep.info.hasClass)e(s.substep.element).removeClass(s.substep.info.hasClass);if(s.substep.info.doClass)e(s.substep.element).removeClass(s.substep.info.doClass)}))}))})),e.jmpress("setActive",(function(t,s){var r=e(t).data("substepsData");if(r){if(s.substep===a)s.substep="prev"===s.reason?r.list.length-1:0;var n=s.substep;e.each(s.current.animationTimeouts,(function(e,t){clearTimeout(t)})),s.current.animationTimeouts=[],e.each(r.list,(function(t,a){var r=t<n,i=t<=n;e.each(a,(function(t,a){if(a.substep.info.hasClass)e(a.substep.element)[(r?"add":"remove")+"Class"](a.substep.info.hasClass);if(i&&!r&&a.delay&&"prev"!==s.reason){if(a.substep.info.doClass)e(a.substep.element).removeClass(a.substep.info.doClass),s.current.animationTimeouts.push(setTimeout((function(){e(a.substep.element).addClass(a.substep.info.doClass)}),a.delay))}else if(a.substep.info.doClass)e(a.substep.element)[(i?"add":"remove")+"Class"](a.substep.info.doClass)}))}))}})),e.jmpress("setInactive",(function(t,s){if(s.nextStep!==t){e.each(s.current.animationCleanupWaiting,(function(t,s){!function(t){e.each(t.list,(function(t,s){e.each(s,(function(t,s){if(s.substep.info.hasClass)e(s.substep.element).removeClass(s.substep.info.hasClass);if(s.substep.info.doClass)e(s.substep.element).removeClass(s.substep.info.doClass)}))}))}(s)})),s.current.animationCleanupWaiting=[];var a=e(t).data("substepsData");if(a)s.current.animationCleanupWaiting.push(a)}})),e.jmpress("selectNext",(function(t,s){if(s.substep!==a){var r=e(t).data("substepsData");if(r)if(s.substep<r.list.length-1)return{step:t,substep:s.substep+1};else return}})),e.jmpress("selectPrev",(function(t,s){if(s.substep!==a)if(e(t).data("substepsData"))if(s.substep>0)return{step:t,substep:s.substep-1};else return}))}(jQuery,document,window),function(e,t){"use strict";e.jmpress("register","toggle",(function(s,a,r){var n=this;if(e(t).bind("keydown",(function(t){if(t.keyCode===s)if(e(n).jmpress("initialized"))e(n).jmpress("deinit");else e(n).jmpress(a)})),r)e(n).jmpress(a)}))}(jQuery,document,window),function(e){"use strict";function t(t,s,a){if(t.secondary&&-1!==t.secondary.split(" ").indexOf(s)){for(var r in t)if(r.length>9&&0===r.indexOf("secondary")){var n=t[r],i=r.substr(9);i=i.substr(0,1).toLowerCase()+i.substr(1),t[r]=t[i],t[i]=n}e(this).jmpress("reapply",e(a))}}e.jmpress("initStep",(function(e,t){for(var s in t.data)if(0===s.indexOf("secondary"))t.stepData[s]=t.data[s]})),e.jmpress("beforeActive",(function(s,a){t.call(a.jmpress,e(s).data("stepData"),"self",s);var r=e(s).parent();e(r).children(a.settings.stepSelector).each((function(s,r){var n=e(r).data("stepData");t.call(a.jmpress,n,"siblings",r)}));for(var n=1;n<a.parents.length;n++)e(a.parents[n]).children(a.settings.stepSelector).each()})),e.jmpress("setInactive",(function(s,a){t.call(a.jmpress,e(s).data("stepData"),"self",s);var r=e(s).parent();function n(s,r){var n=e(r).data("stepData");t.call(a.jmpress,n,"grandchildren",r)}e(r).children(a.settings.stepSelector).each((function(s,r){var n=e(r).data("stepData");t.call(a.jmpress,n,"siblings",r)}));for(var i=1;i<a.parents.length;i++)e(a.parents[i]).children(a.settings.stepSelector).each(n)}))}(jQuery,document,window),function(e,t,s,a){"use strict";e.jmpress("defaults").duration={defaultValue:-1,defaultAction:"next",barSelector:a,barProperty:"width",barPropertyStart:"0",barPropertyEnd:"100%"},e.jmpress("initStep",(function(e,t){t.stepData.duration=t.data.duration&&parseInt(t.data.duration,10),t.stepData.durationAction=t.data.durationAction})),e.jmpress("setInactive",(function(t,s){var a=s.settings.duration,r=s.current;if(s.stepData.duration||a.defaultValue,r.durationTimeout){if(a.barSelector){var n={transitionProperty:a.barProperty,transitionDuration:"0",transitionDelay:"0",transitionTimingFunction:"linear"};n[a.barProperty]=a.barPropertyStart;var i=e(a.barSelector);e.jmpress("css",i,n),i.each((function(t,s){var a=e(s).next(),r=e(s).parent();if(e(s).detach(),a.length)a.insertBefore(s);else r.append(s)}))}clearTimeout(r.durationTimeout),delete r.durationTimeout}})),e.jmpress("setActive",(function(t,s){var r=s.settings,n=r.duration,i=s.current,o=s.stepData.duration||n.defaultValue;if(o&&o>0){if(n.barSelector){var l={transitionProperty:n.barProperty,transitionDuration:o-2*r.transitionDuration/3-100+"ms",transitionDelay:2*r.transitionDuration/3+"ms",transitionTimingFunction:"linear"};l[n.barProperty]=n.barPropertyEnd,e.jmpress("css",e(n.barSelector),l)}var c=this;if(i.durationTimeout)clearTimeout(i.durationTimeout),i.durationTimeout=a;i.durationTimeout=setTimeout((function(){var t=s.stepData.durationAction||n.defaultAction;e(c).jmpress(t)}),o)}}))}(jQuery,document,window),function(e,t,s){"use strict";var a=e.jmpress,r="jmpress-presentation-";a("defaults").presentationMode={use:!0,url:"presentation-screen.html",notesUrl:!1,transferredValues:["userZoom","userTranslateX","userTranslateY"]},a("defaults").keyboard.keys[80]="presentationPopup",a("afterInit",(function(t,a){var n=a.current;if(n.selectMessageListeners=[],a.settings.presentationMode.use){s.addEventListener("message",(function(t){try{if("string"!=typeof t.data||0!==t.data.indexOf(r))return;var i=JSON.parse(t.data.slice(21));switch(i.type){case"select":if(e.each(a.settings.presentationMode.transferredValues,(function(e,t){a.current[t]=i[t]})),/[a-z0-9\-]+/i.test(i.targetId)&&typeof i.substep in{number:1,undefined:1})e(a.jmpress).jmpress("select",{step:"#"+i.targetId,substep:i.substep},i.reason);else e.error("For security reasons the targetId must match /[a-z0-9\\-]+/i and substep must be a number.");break;case"listen":n.selectMessageListeners.push(t.source);break;case"ok":clearTimeout(n.presentationPopupTimeout);break;case"read":try{t.source.postMessage(r+JSON.stringify({type:"url",url:s.location.href,notesUrl:a.settings.presentationMode.notesUrl}),"*")}catch(t){e.error("Cannot post message to source: "+t)}break;default:throw"Unknown message type: "+i.type}}catch(t){e.error("Received message is malformed: "+t)}}));try{if(s.parent&&s.parent!==s)s.parent.postMessage(r+JSON.stringify({type:"afterInit"}),"*")}catch(t){e.error("Cannot post message to parent: "+t)}}})),a("afterDeinit",(function(t,a){if(a.settings.presentationMode.use)try{if(s.parent&&s.parent!==s)s.parent.postMessage(r+JSON.stringify({type:"afterDeinit"}),"*")}catch(t){e.error("Cannot post message to parent: "+t)}})),a("setActive",(function(t,s){var a=e(s.delegatedFrom).attr("id"),n=s.substep,i=s.reason;e.each(s.current.selectMessageListeners,(function(t,o){try{var l={type:"select",targetId:a,substep:n,reason:i};e.each(s.settings.presentationMode.transferredValues,(function(e,t){l[t]=s.current[t]})),o.postMessage(r+JSON.stringify(l),"*")}catch(t){e.error("Cannot post message to listener: "+t)}}))})),a("register","presentationPopup",(function(){var t,a=e(this);if(a.jmpress("settings").presentationMode.use)t=s.open(e(this).jmpress("settings").presentationMode.url),a.jmpress("current").presentationPopupTimeout=setTimeout((function e(){a.jmpress("current").presentationPopupTimeout=setTimeout(e,100);try{t.postMessage(r+JSON.stringify({type:"url",url:s.location.href,notesUrl:a.jmpress("settings").presentationMode.notesUrl}),"*")}catch(e){}}),100)}))}(jQuery,document,window);