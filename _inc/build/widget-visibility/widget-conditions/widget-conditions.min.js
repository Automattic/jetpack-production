jQuery((function(i){var e=i("#widgets-editor");if(0===e.length)if(0===(e=i("div#widgets-right")).length)e=i("form#customize-controls");function t(e){var t,n;if(!i("body").hasClass("wp-customizer"))if(e.hasClass("expanded")){if(e.attr("style"))e.data("original-style",e.attr("style"));if((t=e.width())<400)if(n=400-t,isRtl)e.css("position","relative").css("right","-"+n+"px").css("width","400px");else e.css("position","relative").css("left","-"+n+"px").css("width","400px")}else if(e.data("original-style"))e.attr("style",e.data("original-style")).data("original-style",null);else e.removeAttr("style");else e.find(".widget-inside").css("top",0)}function n(i){var e=i.find("a.display-options").first(),t=i.find("input.widget-control-save");if(0===t.length)t=i.find("div.widget-conditional");e.insertBefore(t),e.parent().removeClass("widget-control-noform").find(".spinner").remove().css("float","left").prependTo(e.parent())}function o(e){var t,n,o,s,a,c,l,r,h,p,f,g,u=e.find(".conditions-rule-minor").html(""),v=e.data("rule-major");if(v&&"post_type"!==v){for(t=e.data("rule-minor"),n=e.data("rule-has-children"),s=0,r=(o=widget_conditions_data[v]).length;s<r;s++)if(c=o[s][0],"object"==typeof(l=o[s][1])){for(g=i("<optgroup/>").attr("label",c),a=0,h=l.length;a<h;a++)p=o[s][1][a][0],f=o[s][1][a][1],g.append(i("<option/>").val(p).text(d(f.replace(/&nbsp;/g," "))));u.append(g)}else u.append(i("<option/>").val(c).text(d(l.replace(/&nbsp;/g," "))));if(u.removeAttr("disabled"),u.val(t),"page"===v&&t in widget_conditions_parent_pages){if(u.siblings("span.conditions-rule-has-children").show(),n)u.siblings("span.conditions-rule-has-children").find('input[type="checkbox"]').attr("checked","checked")}else u.siblings("span.conditions-rule-has-children").hide().find('input[type="checkbox"]').removeAttr("checked")}else u.attr("disabled","disabled")}function s(e){var t=0;e.find("span.conditions-rule-has-children").find('input[type="checkbox"]').each((function(){i(this).attr("name","conditions[page_children]["+t+"]"),t++}))}function d(i){var e=document.createElement("textarea");return e.innerHTML=i,e.value}i(".widget").each((function(){n(i(this))})),i(document).on("widget-added",(function(i,e){if(0===e.find("div.widget-control-actions a.display-options").length)n(e)})),e.on("click.widgetconditions","a.add-condition",(function(e){var t=i(this).closest("div.condition"),n=t.clone().data("rule-major","").data("rule-minor","").data("has-children","").insertAfter(t);e.preventDefault(),n.find("select.conditions-rule-major").val(""),n.find("select.conditions-rule-minor").html("").attr("disabled"),n.find("span.conditions-rule-has-children").hide().find('input[type="checkbox"]').removeAttr("checked"),s(n.closest(".conditions"))})),e.on("click.widgetconditions","a.display-options",(function(e){var n=i(this).closest("div.widget");if(e.preventDefault(),n.find("div.widget-conditional").toggleClass("widget-conditional-hide"),i(this).toggleClass("active"),n.toggleClass("expanded"),t(n),i(this).hasClass("active"))n.find("input[name=widget-conditions-visible]").val("1"),n.find(".condition").each((function(){o(i(this))}));else n.find("input[name=widget-conditions-visible]").val("0")})),e.on("click.widgetconditions","a.delete-condition",(function(e){var t=i(this).closest("div.condition");if(e.preventDefault(),t.is(":first-child")&&t.is(":last-child"))i(this).closest("div.widget").find("a.display-options").click(),t.find("select.conditions-rule-major").val("").change();else t.find("select.conditions-rule-major").change(),t.detach();s(t.closest(".conditions"))})),e.on("click.widgetconditions","div.widget-top",(function(){var e=i(this).closest("div.widget"),n=e.find("a.display-options");if(n.hasClass("active"))n.attr("opened","true");if(n.attr("opened"))n.removeAttr("opened"),e.toggleClass("expanded"),t(e)})),e.on("change.widgetconditions","input.conditions-match-all",(function(){i(this).parents(".widget-conditional").toggleClass("conjunction").toggleClass("intersection")})),i(document).on("change.widgetconditions","select.conditions-rule-major",(function(){var e=i(this),t=e.siblings("select.conditions-rule-minor:first"),n=e.siblings("span.conditions-rule-has-children"),s=t.closest(".condition");if(s.data("rule-minor","").data("rule-major",e.val()),e.val())o(s);else e.siblings("select.conditions-rule-minor").attr("disabled","disabled").html(""),n.hide().find('input[type="checkbox"]').removeAttr("checked")})),i(document).on("change.widgetconditions","select.conditions-rule-minor",(function(){var e=i(this),t=e.siblings("select.conditions-rule-major"),n=e.siblings("span.conditions-rule-has-children");if(e.closest(".condition").data("rule-minor",e.val()),"page"===t.val())if(e.val()in widget_conditions_parent_pages)n.show();else n.hide().find('input[type="checkbox"]').removeAttr("checked");else n.hide().find('input[type="checkbox"]').removeAttr("checked")})),i(document).on("widget-updated widget-synced",(function(e,t){t.find(".condition").each((function(){o(i(this))}))}))}));