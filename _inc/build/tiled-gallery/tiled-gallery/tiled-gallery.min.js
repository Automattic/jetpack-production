!function(){function e(){this.galleries=[],this.findAndSetupNewGalleries()}function t(e){this.gallery=e,this.addCaptionEvents(),this.resize(),this.gallery.classList.remove("tiled-gallery-unresized")}e.prototype.findAndSetupNewGalleries=function(){var e=this,i=document.querySelectorAll(".tiled-gallery.tiled-gallery-unresized");Array.prototype.forEach.call(i,(function(i){e.galleries.push(new t(i))}))},e.prototype.resizeAll=function(){Array.prototype.forEach.call(this.galleries,(function(e){e.resize()}))},t.prototype.resizeableElementsSelector=".gallery-row, .gallery-group, .tiled-gallery-item img",t.prototype.addCaptionEvents=function(){var e=this.gallery.querySelectorAll(".tiled-gallery-caption");Array.prototype.forEach.call(e,(function(e){e.style.display="none"}));var t=function(e){var t=e.target.closest(".tiled-gallery-item"),i="mouseover"===e.type?"block":"none";if(t){var r=t.querySelector(".tiled-gallery-caption");if(r)r.style.display=i}};this.gallery.addEventListener("mouseover",t),this.gallery.addEventListener("mouseout",t)},t.prototype.getExtraDimension=function(e,t,i){if("horizontal"===i){var r="border"===t?"borderLeftWidth":t+"Left",n="border"===t?"borderRightWidth":t+"Right";return(parseInt(e.style[r],10)||0)+(parseInt(e.style[n],10)||0)}else if("vertical"===i){var o="border"===t?"borderTopWidth":t+"Top",l="border"===t?"borderBottomWidth":t+"Bottom";return(parseInt(e.style[o],10)||0)+(parseInt(e.style[l],10)||0)}else return 0},t.prototype.resize=function(){var e=parseInt(this.gallery.dataset.originalWidth,10),t=parseFloat(getComputedStyle(this.gallery.parentNode,null).width.replace("px","")),i=Math.min(1,t/e),r=this,n=this.gallery.querySelectorAll(this.resizeableElementsSelector);Array.prototype.forEach.call(n,(function(e){var t=r.getExtraDimension(e,"margin","horizontal"),n=r.getExtraDimension(e,"margin","vertical"),o=r.getExtraDimension(e,"padding","horizontal"),l=r.getExtraDimension(e,"padding","vertical"),a=r.getExtraDimension(e,"border","horizontal"),s=r.getExtraDimension(e,"border","vertical"),d=parseInt(e.dataset.originalWidth,10)+o+a+t,c=parseInt(e.dataset.originalHeight,10)+l+s+n;e.style.width=Math.floor(i*d)-t+"px",e.style.height=Math.floor(i*c)-n+"px"}))};var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;!function(e){if("loading"!==document.readyState)e();else document.addEventListener("DOMContentLoaded",e)}((function(){var t=new e;if(document.body.addEventListener("is.post-load",(function(){t.findAndSetupNewGalleries()})),window.chrome&&i)!function(e){var t=!1,r=null;function n(){if(e.resizeAll(),t)i(n)}window.addEventListener("resize",(function(){if(clearTimeout(r),!t)i(n);t=!0,r=setTimeout((function(){t=!1}),15)}))}(t);else!function(e){window.addEventListener("resize",(function(){e.resizeAll()}))}(t);if("undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh)wp.customize.selectiveRefresh.bind("partial-content-rendered",(function(e){if(wp.isJetpackWidgetPlaced(e,"gallery"))t.findAndSetupNewGalleries()}))}))}();