(()=>{const e=window.jetpackContactForm||{};document.addEventListener("DOMContentLoaded",(()=>{t()}));const t=()=>{document.querySelectorAll(".wp-block-jetpack-contact-form-container form.contact-form").forEach(r)},r=e=>{e.hasAttribute("novalidate")||e.setAttribute("novalidate",!0);const t={hasInsetLabel:d(e)};let r={};e.addEventListener("submit",(i=>{i.preventDefault(),a(e)||(g(e,r,t),n(e)?(r={},w(e)):r=_(e,t))}))},n=e=>{let t=e.checkValidity();if(!t)return!1;const r=p(e);for(const e of r)if(s(e)&&!u(e))return!1;return t},a=e=>!0===e.getAttribute("data-submitting"),i=e=>"fieldset"===e.tagName.toLowerCase()&&e.classList.contains("grunion-checkbox-multiple-options"),o=e=>"fieldset"===e.tagName.toLowerCase()&&e.classList.contains("grunion-radio-options"),s=e=>e.hasAttribute("data-required"),c=e=>e.validity.valid,l=e=>{const t=Array.from(e.querySelectorAll('input[type="radio"]'));return t.length>0&&t.every((e=>e.validity.valid))},u=e=>{if(!s(e))return!0;const t=Array.from(e.querySelectorAll('input[type="checkbox"]'));return t.length>0&&t.some((e=>e.checked))},d=e=>{const t=e.querySelector(".wp-block-jetpack-contact-form");if(!t)return!1;const r=t.classList;return r.contains("is-style-outlined")||r.contains("is-style-animated")},m=e=>e.querySelector('[type="submit"]')||e.querySelector('button:not([type="reset"])'),p=e=>Array.from(e.querySelectorAll(".grunion-checkbox-multiple-options")),f=e=>{const t=A((e=>Array.from(e.elements).filter((e=>!["hidden","submit"].includes(e.type)&&null!==e.offsetParent)))(e)),r={simple:t.default,singleChoice:[],multipleChoice:[]},n=t.radios.reduce(((e,t)=>e.includes(t.name)?e:[...e,t.name]),[]);for(const t of n){const n=e.querySelector(`input[type="radio"][name="${t}"]`);if(n){const e=n.closest("fieldset");e&&r.singleChoice.push(e)}}const a=t.checkboxes.reduce(((e,t)=>e.includes(t.name)?e:[...e,t.name]),[]);for(const t of a){const n=e.querySelector(`input[type="checkbox"][name="${t}"]`);if(n){const e=n.closest("fieldset");e&&r.multipleChoice.push(e)}}return r},h=e=>e.querySelector(".contact-form__error"),b=e=>e.querySelectorAll("[aria-invalid]"),y=t=>{const r=document.createDocumentFragment();return r.appendChild((()=>{const t=document.createElement("span");return t.classList.add("contact-form__warning-icon"),t.setAttribute("aria-label",e.warning||"Warning"),t})()),r.appendChild((e=>{const t=document.createElement("span");return t.textContent=e,t})(t)),r},v=e=>{const t=document.createElement("div");return t.id=e,t.classList.add("contact-form__input-error"),t},A=e=>e.reduce(((e,t)=>{switch(t.type){case"radio":e.radios.push(t);break;case"checkbox":t.name.indexOf("[]")===t.name.length-2?e.checkboxes.push(t):e.default.push(t);break;default:e.default.push(t)}return e}),{default:[],radios:[],checkboxes:[]}),g=(e,t,r)=>{C(e,r);for(const r in t)e.querySelectorAll(`[name="${r}"]`).forEach((e=>e.removeEventListener(t[r][0],t[r][1])))},C=(e,t)=>{L(e),q(e,t)},L=e=>{const t=h(e);t&&t.replaceChildren()},q=(e,t)=>{for(const r of b(e))o(r)||i(r)?k(r):S(r,t)},k=e=>{e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby");const t=e.querySelector(".contact-form__input-error");t&&t.replaceChildren()},S=(e,t)=>{e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby");const r=e.closest(t.hasInsetLabel?".contact-form__inset-label-wrap":".grunion-field-wrap");if(!r)return;const n=r.querySelector(".contact-form__input-error");n&&n.replaceChildren()},w=e=>{E(e),e.setAttribute("data-submitting",!0),e.submit()},E=t=>{const r=m(t);r&&(r.setAttribute("aria-disabled",!0),r.appendChild((()=>{const t=document.createElement("span"),r=document.createElement("span"),n=document.createElement("span");return r.setAttribute("aria-hidden",!0),r.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"/><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z"><animateTransform attributeName="transform" type="rotate" dur="0.75s" values="0 12 12;360 12 12" repeatCount="indefinite"/></path></svg>',n.classList.add("visually-hidden"),n.textContent=e.submittingForm||"Submitting form",t.classList.add("contact-form__spinner"),t.appendChild(r),t.appendChild(n),t})()))},_=(e,t)=>(N(e,t),x(e,t)),x=(e,t)=>{let r={};const n=()=>D(e);for(const c of b(e)){let l;l=o(c)&&(a=c,Array.from(a.querySelectorAll('input[type="radio"]')).some((e=>e.hasAttribute("required")||e.hasAttribute("aria-required"))))?M(c,n,e,t):i(c)&&s(c)?$(c,n,e,t):F(c,n,e,t),r={...r,...l}}var a;return r},M=(e,t,r,n)=>{const a={},i=()=>{l(e)?k(e):V(e,r,n),t()},o=e.querySelectorAll('input[type="radio"]');for(const e of o)e.addEventListener("blur",i),e.addEventListener("change",i),a[e.name]=["blur",i],a[e.name]=["change",i];return a},$=(e,t,r,n)=>{const a={},i=()=>{u(e)?k(e):Z(e,r,n),t()},o=e.querySelectorAll('input[type="checkbox"]');for(const e of o)e.addEventListener("blur",i),e.addEventListener("change",i),a[e.name]=["blur",i],a[e.name]=["change",i];return a},F=(e,t,r,n)=>{const a=e.validity.valueMissing,i={},o=()=>{c(e)?S(e,n):P(e,r,n),t()},s=()=>{e.validity.valueMissing?P(e,r,n):S(e,n),t()};return e.addEventListener("blur",o),i[e.name]=["blur",o],a&&(e.addEventListener("input",s),i[e.name]=["input",s]),i},N=(e,t)=>{j(e),I(e,t)},j=t=>{let r=h(t);if(!r){r=(()=>{const e=document.createElement("div");return e.classList.add("contact-form__error"),e.setAttribute("aria-live","assertive"),e.setAttribute("role","alert"),e})();const e=m(t);e?e.parentNode.insertBefore(r,e):t.appendChild(r)}r.appendChild(y(e.invalidForm||"Please make sure all fields are correct."))},D=e=>{L(e),e.checkValidity()||j(e)},I=(e,t)=>{const{simple:r,singleChoice:n,multipleChoice:a}=f(e);for(const n of r)c(n)||P(n,e,t);for(const r of n)l(r)||V(r,e,t);for(const r of a)u(r)||Z(r,e,t)},P=(e,t,r)=>{const n=`${e.name}-error`;let a=t.querySelector(`#${n}`);if(!a){a=v(n);const t=e.closest(r.hasInsetLabel?".contact-form__inset-label-wrap":".grunion-field-wrap");t&&t.appendChild(a)}a.replaceChildren(y(e.validationMessage)),e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",n)},V=(e,t,r)=>{B(e,t,r)},Z=(t,r,n)=>{B(t,r,{...n,message:e.checkboxMissingValue||"Please select at least one option."})},B=(e,t,r)=>{const n=e.querySelector("input");if(!n)return;const a=`${n.name.replace("[]","")}-error`;let i=t.querySelector(`#${a}`);i||(i=v(a)),i.replaceChildren(y(n.validationMessage||r.message||"Error")),e.appendChild(i),e.setAttribute("aria-invalid","true"),e.setAttribute("aria-describedby",a)}})();