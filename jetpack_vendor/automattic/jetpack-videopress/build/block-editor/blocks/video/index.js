/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={1113:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(6087);const o=(0,n.forwardRef)((function({icon:e,size:t=24,...r},o){return(0,n.cloneElement)(e,{width:t,height:t,...r,ref:o})}))},7913:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})})},3512:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(n.Path,{d:"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z"})})},5938:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)(n.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})})},5855:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(n.Path,{d:"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z"})})},7326:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,o.jsx)(n.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})})},311:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5573),o=r(790);const a=(0,o.jsx)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,o.jsx)(n.Path,{d:"M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zm1.13 9.38l.35-6.46H8.52l.35 6.46h2.26zm-.09 3.36c.24-.23.37-.55.37-.96 0-.42-.12-.74-.36-.97s-.59-.35-1.06-.35-.82.12-1.07.35-.37.55-.37.97c0 .41.13.73.38.96.26.23.61.34 1.06.34s.8-.11 1.05-.34z"})})},6941:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if("%%"!==e)if(n++,"%c"===e)o=n})),t.splice(o,0,r)},t.save=function(e){try{if(e)t.storage.setItem("debug",e);else t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}if(!e&&"undefined"!=typeof process&&"env"in process)e=process.env.DEBUG;return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{if(!e)e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(3212)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},3212:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,a,i=null;function s(...e){if(!s.enabled)return;const n=s,o=Number(new Date),a=o-(r||o);if(n.diff=a,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0])e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";i++;const a=t.formatters[o];if("function"==typeof a){const t=e[i];r=a.call(n,t),e.splice(i,1),i--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}if(s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(null!==i)return i;if(o!==t.namespaces)o=t.namespaces,a=t.enabled(e);return a},set:e=>{i=e}}),"function"==typeof t.init)t.init(s);return s}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)if(n[r])if("-"===(e=n[r].replace(/\*/g,".*?"))[0])t.skips.push(new RegExp("^"+e.slice(1)+"$"));else t.names.push(new RegExp("^"+e+"$"))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7378),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},633:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},n={floor:Math.floor,ceil:Math.ceil};function o(o){var a,i,s,l,c,u,p,d,f,m,h,v,g,y,b,k,w,_,E,R,C,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=[],P=0;if(isNaN(o))throw new TypeError("Invalid number");if(s=!0===S.bits,b=!0===S.unix,v=!0===S.pad,i=S.base||10,g=void 0!==S.round?S.round:b?1:2,p=void 0!==S.locale?S.locale:"",d=S.localeOptions||{},k=void 0!==S.separator?S.separator:"",w=void 0!==S.spacer?S.spacer:b?"":" ",E=S.symbols||{},_=2===i?S.standard||"iec":"jedec",h=S.output||"string",c=!0===S.fullform,u=S.fullforms instanceof Array?S.fullforms:[],a=void 0!==S.exponent?S.exponent:-1,R=n[S.roundingMethod]||Math.round,f=(m=Number(o))<0,l=i>2?1e3:1024,C=!1===isNaN(S.precision)?parseInt(S.precision,10):0,f&&(m=-m),(-1===a||isNaN(a))&&(a=Math.floor(Math.log(m)/Math.log(l)))<0&&(a=0),a>8&&(C>0&&(C+=8-a),a=8),"exponent"===h)return a;if(0===m)A[0]=0,y=A[1]=b?"":t[_][s?"bits":"bytes"][a];else{P=m/(2===i?Math.pow(2,10*a):Math.pow(1e3,a)),s&&(P*=8)>=l&&a<8&&(P/=l,a++);var j=Math.pow(10,a>0?g:0);A[0]=R(P*j)/j,A[0]===l&&a<8&&void 0===S.exponent&&(A[0]=1,a++),y=A[1]=10===i&&1===a?s?"kbit":"kB":t[_][s?"bits":"bytes"][a],b&&(A[1]=A[1].charAt(0),e.test(A[1])&&(A[0]=Math.floor(A[0]),A[1]=""))}if(f&&(A[0]=-A[0]),C>0&&(A[0]=A[0].toPrecision(C)),A[1]=E[A[1]]||A[1],!0===p?A[0]=A[0].toLocaleString():p.length>0?A[0]=A[0].toLocaleString(p,d):k.length>0&&(A[0]=A[0].toString().replace(".",k)),v&&!1===Number.isInteger(A[0])&&g>0){var x=k||".",T=A[0].toString().split(x),U=T[1]||"",O=U.length,N=g-O;A[0]="".concat(T[0]).concat(x).concat(U.padEnd(O+N,"0"))}return c&&(A[1]=u[a]?u[a]:r[_][a]+(s?"bit":"byte")+(1===A[0]?"":"s")),"array"===h?A:"object"===h?{value:A[0],symbol:A[1],exponent:a,unit:y}:A.join(w)}return o.partial=function(e){return function(t){return o(t,e)}},o}()},7560:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n={button:"zI5tJ_qhWE6Oe6Lk75GY","is-icon-button":"tuBt2DLqimiImoqVzPqo",small:"Na39I683LAaSA99REg14",normal:"ipS7tKy9GntCS4R3vekF",icon:"paGLQwtPEaJmtArCcmyK",regular:"lZAo6_oGfclXOO9CC6Rd","full-width":"xJDOiJxTt0R_wSl8Ipz_",loading:"q_tVWqMjl39RcY6WtQA6","external-icon":"CDuBjJp_8jxzx5j6Nept"}},2604:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n={"help-message":"MVuHtQ6MxijxzLoKaiAD"}},941:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n={"timestamp-control__controls-wrapper":"rcGUZgpe4CGD8uYmerUD","timestamp-range-control":"iZjYt7tDXuSRYGSpgL1y","timestamp-input-wrapper":"dx9xZVwTj45XWtgjLwf2","timestamp-control-input":"Uge3H06ePl7rnHIbnUgo","is-disabled":"AmMha5bHq6c3gHoP7k28","timestamp-control-divider":"aN3nKQFl5a3qMbO8CaVg"}},8766:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n={container:"ianknO6MB_ng2EieMQdE","play-icon":"no33D8j7N4nzdafpETZy","video-player-wrapper":"VFzg5w6i04b05mkee2SA","video-player-spinner-wrapper":"PHuqvGT1Z0IVZgjAtUZw",spinner:"xwBn5mUH0mhSBqas1dog",video:"k5rpcKdHL3HKU39CrUhe",range:"sgykjydBL76DT5yDw_ka"}},7378:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,a=7*o,i=365.25*o;function s(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var l=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);else if("number"===c&&isFinite(e))return l.long?function(e){var a=Math.abs(e);if(a>=o)return s(e,a,o,"day");if(a>=n)return s(e,a,n,"hour");if(a>=r)return s(e,a,r,"minute");if(a>=t)return s(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=o)return Math.round(e/o)+"d";if(a>=n)return Math.round(e/n)+"h";if(a>=r)return Math.round(e/r)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},4588:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){var n,a,i=[];if("string"!=typeof(t=t||""))t="?";for(a in e)if(r.call(e,a)){if(!(n=e[a])&&(null==n||isNaN(n)))n="";if(a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),i=n(t[2]);if(null!==a&&null!==i&&!(a in o))o[a]=i}return o}},6811:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},372:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(6941);const o=r.n(n)()("dops:analytics");let a,i;window._tkq=window._tkq||[],window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date;const s={initialize:function(e,t,r){s.setUser(e,t),s.setSuperProps(r),s.identifyUser()},setGoogleAnalyticsEnabled:function(e,t=null){this.googleAnalyticsEnabled=e,this.googleAnalyticsKey=t},setMcAnalyticsEnabled:function(e){this.mcAnalyticsEnabled=e},setUser:function(e,t){i={ID:e,username:t}},setSuperProps:function(e){a=e},assignSuperProps:function(e){a=Object.assign(a||{},e)},mc:{bumpStat:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&x_"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);o("Bumping stats %o",e)}else r="&x_"+encodeURIComponent(e)+"="+encodeURIComponent(t),o('Bumping stat "%s" in group "%s"',t,e);return r}(e,t);if(s.mcAnalyticsEnabled)(new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom-no-pv"+r+"&t="+Math.random()},bumpStatWithPageView:function(e,t){const r=function(e,t){let r="";if("object"==typeof e){for(const t in e)r+="&"+encodeURIComponent(t)+"="+encodeURIComponent(e[t]);o("Built stats %o",e)}else r="&"+encodeURIComponent(e)+"="+encodeURIComponent(t),o('Built stat "%s" in group "%s"',t,e);return r}(e,t);if(s.mcAnalyticsEnabled)(new Image).src=document.location.protocol+"//pixel.wp.com/g.gif?v=wpcom"+r+"&t="+Math.random()}},pageView:{record:function(e,t){s.tracks.recordPageView(e),s.ga.recordPageView(e,t)}},purchase:{record:function(e,t,r,n,o,a,i){s.ga.recordPurchase(e,t,r,n,o,a,i)}},tracks:{recordEvent:function(e,t){if(t=t||{},0===e.indexOf("akismet_")||0===e.indexOf("jetpack_")){if(a)o("- Super Props: %o",a),t=Object.assign(t,a);o('Record event "%s" called with props %s',e,JSON.stringify(t)),window._tkq.push(["recordEvent",e,t])}else o('- Event name must be prefixed by "akismet_" or "jetpack_"')},recordJetpackClick:function(e){const t="object"==typeof e?e:{target:e};s.tracks.recordEvent("jetpack_wpa_click",t)},recordPageView:function(e){s.tracks.recordEvent("akismet_page_view",{path:e})},setOptOut:function(e){o("Pushing setOptOut: %o",e),window._tkq.push(["setOptOut",e])}},ga:{initialized:!1,initialize:function(){let e={};if(!s.ga.initialized){if(i)e={userId:"u-"+i.ID};window.ga("create",this.googleAnalyticsKey,"auto",e),s.ga.initialized=!0}},recordPageView:function(e,t){if(s.ga.initialize(),o("Recording Page View ~ [URL: "+e+"] [Title: "+t+"]"),this.googleAnalyticsEnabled)window.ga("set","page",e),window.ga("send",{hitType:"pageview",page:e,title:t})},recordEvent:function(e,t,r,n){s.ga.initialize();let a="Recording Event ~ [Category: "+e+"] [Action: "+t+"]";if(void 0!==r)a+=" [Option Label: "+r+"]";if(void 0!==n)a+=" [Option Value: "+n+"]";if(o(a),this.googleAnalyticsEnabled)window.ga("send","event",e,t,r,n)},recordPurchase:function(e,t,r,n,o,a,i){window.ga("require","ecommerce"),window.ga("ecommerce:addTransaction",{id:e,revenue:n,currency:i}),window.ga("ecommerce:addItem",{id:e,name:t,sku:r,price:o,quantity:a}),window.ga("ecommerce:send")}},identifyUser:function(){if(i)window._tkq.push(["identifyUser",i.ID,i.username])},setProperties:function(e){window._tkq.push(["setProperties",e])},clearedIdentity:function(){window._tkq.push(["clearIdentity"])}},l=s},1112:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(6072),o=r.n(n),a=r(6427),i=r(7723),s=r(1113),l=r(3512),c=r(3022),u=r(1609),p=r.n(u),d=r(7560);const __=i.__,f=(0,u.forwardRef)(((e,t)=>{const{children:r,variant:n="primary",size:i="normal",weight:u="bold",icon:f,iconSize:m,disabled:h,isDestructive:v,isLoading:g,isExternalLink:y,className:b,text:k,fullWidth:w,..._}=e,E=(0,c.A)(d.A.button,b,{[d.A.normal]:"normal"===i,[d.A.small]:"small"===i,[d.A.icon]:Boolean(f),[d.A.loading]:g,[d.A.regular]:"regular"===u,[d.A["full-width"]]:w,[d.A["is-icon-button"]]:Boolean(f)&&!r});_.ref=t;const R="normal"===i?20:16,C=y&&p().createElement(p().Fragment,null,p().createElement(s.A,{size:R,icon:l.A,className:d.A["external-icon"]}),p().createElement(a.VisuallyHidden,{as:"span"},/* translators: accessibility text */
__("(opens in a new tab)","jetpack-videopress-pkg"))),S=y?"_blank":void 0,A=r?.[0]&&null!==r[0]&&"components-tooltip"!==r?.[0]?.props?.className;return p().createElement(a.Button,o()({target:S,variant:n,className:(0,c.A)(E,{"has-text":!!f&&A}),icon:!y?f:void 0,iconSize:m,disabled:h,"aria-disabled":h,isDestructive:v,text:k},_),g&&p().createElement(a.Spinner,null),p().createElement("span",null,r),C)}));f.displayName="Button";const m=f},3924:(e,t,r)=>{"use strict";function n(e,t={}){const r={};let n;if("undefined"!=typeof window)n=window?.JP_CONNECTION_INITIAL_STATE?.calypsoEnv;if(0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,r.url=encodeURIComponent(e)}else r.source=encodeURIComponent(e);for(const e in t)r[e]=encodeURIComponent(t[e]);if(!Object.keys(r).includes("site")&&"undefined"!=typeof jetpack_redirects&&Object.hasOwn(jetpack_redirects,"currentSiteRawUrl"))r.site=jetpack_redirects.currentBlogID??jetpack_redirects.currentSiteRawUrl;if(n)r.calypso_env=n;return"https://jetpack.com/redirect/?"+Object.keys(r).map((e=>e+"="+r[e])).join("&")}r.d(t,{A:()=>n})},5985:(e,t,r)=>{"use strict";r.d(t,{Sy:()=>n.Sy});var n=r(2634);r(2034),r(5595),r(3265),r(3489),r(6923),r(5877),r(335),r(8290)},5877:(e,t,r)=>{"use strict";r(1609)},335:(e,t,r)=>{"use strict";r(6087)},3489:(e,t,r)=>{"use strict";var n=r(372);r(9384),r(6087);const{tracks:o}=n.A,{recordEvent:a}=o},6923:(e,t,r)=>{"use strict";r(7143),r(6087),r(8290)},7105:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,E9:()=>p});var n=r(7143),o=r(2634),a=r(4478),i=r(8290);const s="SET_JETPACK_MODULES",l="SET_MODULE_UPDATING";function c(e){return p({isLoading:e})}function u(e,t){return{type:l,name:e,isUpdating:t}}function p(e){return{type:s,options:e}}const d={updateJetpackModuleStatus:function*(e){try{yield u(e.name,!0),yield(0,a.sB)(e);const t=yield(0,a.wz)();return yield p({data:t}),!0}catch(e){const t=(0,n.select)(i.F).getJetpackModules();return yield p(t),!1}finally{yield u(e.name,!1)}},setJetpackModules:p,fetchModules:function*(){if((0,o.Sy)())return!0;try{yield c(!0);const e=yield(0,a.wz)();return yield p({data:e}),!0}catch(e){const t=(0,n.select)(i.F).getJetpackModules();return yield p(t),!1}finally{yield c(!1)}}}},4478:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>c,sB:()=>l,wz:()=>s});var n=r(1455),o=r.n(n);const a="FETCH_JETPACK_MODULES",i="UPDATE_JETPACK_MODULE_STATUS",s=()=>({type:a}),l=e=>({type:i,settings:e}),c={[a]:function(){return o()({path:"/jetpack/v4/module/all",method:"GET"})},[i]:function({settings:e}){return o()({path:`/jetpack/v4/module/${e.name}/active`,method:"POST",data:{active:e.active}})}}},8290:(e,t,r)=>{"use strict";r.d(t,{F:()=>c});var n=r(7143),o=r(7105),a=r(4478),i=r(8862),s=r(2701),l=r(1640);const c="jetpack-modules",u=(0,n.createReduxStore)(c,{reducer:i.A,actions:o.Ay,controls:a.Ay,resolvers:s.A,selectors:l.A});(0,n.register)(u);const p=window?.Initial_State?.getModules||window?.Jetpack_Editor_Initial_State?.modules||null;if(null!==p)(0,n.dispatch)(c).setJetpackModules({data:{...p}})},8862:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});const n={isLoading:!1,isUpdating:{},data:{}},o=(e=n,t)=>{switch(t.type){case"SET_JETPACK_MODULES":return{...e,...t.options};case"SET_MODULE_UPDATING":return{...e,isUpdating:{...e.isUpdating,[t.name]:t.isUpdating}}}return e}},2701:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(7105),o=r(4478);const a={getJetpackModules:function*(){try{const e=yield(0,o.wz)();if(e)return(0,n.E9)({data:e})}catch(e){console.error(e)}}}},1640:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(2634);const o={getJetpackModules:e=>e.data,isModuleActive:(e,t)=>(0,n.Sy)()||(e?.data?.[t]?.activated??!1),areModulesLoading:e=>e.isLoading??!1,isModuleUpdating:(e,t)=>e?.isUpdating?.[t]??!1}},3265:(e,t,r)=>{"use strict";var n=r(7723);r(3832),r(8468);const __=n.__;__("Upgrade your plan to use video covers","jetpack-videopress-pkg"),__("Upgrade your plan to upload audio","jetpack-videopress-pkg")},2034:(e,t,r)=>{"use strict";r(2279)},2634:(e,t,r)=>{"use strict";function n(){return"object"==typeof window&&"string"==typeof window._currentSiteType?window._currentSiteType:null}function o(){return"simple"===n()}r.d(t,{Sy:()=>o})},5595:(e,t,r)=>{"use strict";r(6072),r(9491)},9079:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(6427),o=r(7723),a=r(9152);const __=o.__;function i({onConnect:e,isModuleActive:t,isConnected:r,isConnecting:o}){if(r)return null;let i=__("Connect","jetpack-videopress-pkg");if(o)i=__("Redirecting…","jetpack-videopress-pkg");const s=__("Connect your account to continue using VideoPress","jetpack-videopress-pkg"),l=__("Enable Jetpack module to continue using VideoPress","jetpack-videopress-pkg");return React.createElement(a.A,{action:React.createElement(n.Button,{variant:"primary",onClick:e,disabled:o,isBusy:o},i)},t?s:l)}},9152:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(6427),o=r(311),a=r(1113);function i({icon:e=o.A,action:t,children:r,isLoading:i}){return React.createElement("div",{className:"block-banner"},React.createElement(a.A,{icon:e}),React.createElement("div",{className:"block-banner__content"},r),i&&React.createElement(n.Spinner,null),t&&React.createElement("div",{className:"block-banner__action"},t))}},8226:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(4715),o=r(6427),a=r(9491),i=r(6087),s=r(7723),l=r(8770),c=r(8894);const __=s.__;function u({clientId:e,attributes:t,setAttributes:r}){const{useAverageColor:s,seekbarColor:u,seekbarLoadingColor:p,seekbarPlayedColor:d}=t,f={seekbarPlayedColor:d,seekbarLoadingColor:p,seekbarColor:u},[m,h]=(0,i.useState)(f),v=(0,a.useDebounce)((e=>{r(e)}),2e3),g=(0,i.useCallback)((e=>{h((t=>({...t,...e}))),v(e)}),[]),y=(0,i.useCallback)((()=>{h({}),r({useAverageColor:!0,seekbarColor:"",seekbarLoadingColor:"",seekbarPlayedColor:""})}),[]);return React.createElement(o.__experimentalToolsPanelItem,{className:"videopress-playback-bar-colors-panel-item",hasValue:()=>!s,label:__("Dynamic color","jetpack-videopress-pkg"),resetAllFilter:y,isShownByDefault:!0,panelId:e,onDeselect:y},React.createElement(o.PanelRow,{className:"videopress-color-panel__title"},__("Playback bar colors","jetpack-videopress-pkg")),React.createElement(o.ToggleControl,{label:__("Dynamic color","jetpack-videopress-pkg"),help:React.createElement(React.Fragment,null,__("Playback bar colors adapt to the video as it plays.","jetpack-videopress-pkg"),React.createElement("img",{className:"videopress-dynamic-color-example",src:(0,l.A)(c),alt:__("Dynamic colors example","jetpack-videopress-pkg")})),onChange:e=>r({useAverageColor:e}),checked:s}),!s&&React.createElement(n.PanelColorSettings,{className:"videopress-color-panel",opened:!s,showTitle:!1,colorSettings:[{label:__("Main","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarColor,onChange:e=>g({seekbarColor:e})},{label:__("Loaded","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarLoadingColor,onChange:e=>g({seekbarLoadingColor:e})},{label:__("Progress","jetpack-videopress-pkg"),showTitle:!0,value:m.seekbarPlayedColor,onChange:e=>g({seekbarPlayedColor:e})}]}))}},917:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(6427),o=r(6087),a=r(7723),i=r(6151),s=r(2843),l=r(2439);const __=a.__,c=31;function u({filename:e,chapter:t,isAutoGeneratedChapter:r,attributes:a,setAttributes:u,isRequestingVideoData:p,updateError:d,videoBelongToSite:f}){const{title:m,description:h}=a,{hasIncompleteChapters:v}=(0,l.A)(h),g=h?.length?h.split("\n").map((e=>Math.ceil(e.length/c)||1)).reduce(((e,t)=>e+t),0):4,y=Math.min(12,Math.max(g,4)),b=v?null:React.createElement(i.A,null),k=!!t&&!r;return React.createElement(n.PanelBody,{title:__("Details","jetpack-videopress-pkg")},!f&&React.createElement(n.Notice,{status:"warning",isDismissible:!1,className:"not-belong-to-site-notice"},__("This video is not owned by this site. You can still embed it and customize the player, but you won’t be able to edit the video.","jetpack-videopress-pkg")),React.createElement(n.TextControl,{label:__("Title","jetpack-videopress-pkg"),value:m,placeholder:e?.length?`${e} video`:__("Video title","jetpack-videopress-pkg"),onChange:e=>u({title:e}),disabled:p||!!d||!f}),React.createElement(n.TextareaControl,{label:__("Description","jetpack-videopress-pkg"),value:h,placeholder:__("Video description","jetpack-videopress-pkg"),onChange:e=>u({description:e}),rows:y,disabled:p||!!d||!f,help:b}),!k&&v&&React.createElement(s.A,{className:"incomplete-chapters-notice"}),k&&React.createElement(n.Notice,{status:"success",className:"learn-how-notice",isDismissible:!1},React.createElement("p",{className:"learn-how-notice__message"},(0,o.createInterpolateElement)(__("You already have chapter information on an attached VTT file, so adding chapters to the description will not change the original ones. <link>Learn more</link>","jetpack-videopress-pkg"),{link:React.createElement(n.ExternalLink,{href:"https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video"})}))),!!d&&React.createElement(n.Notice,{status:"error",className:"details-panel__error",isDismissible:!1},__("Error updating the video details.","jetpack-videopress-pkg")))}},6592:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(6427),o=r(7723);const __=o.__;function a({isOpen:e,onClose:t}){if(!e)return null;else return React.createElement(n.Modal,{title:__("Chapters in VideoPress","jetpack-videopress-pkg"),isDismissible:!1,className:"learn-how-modal",onRequestClose:t},React.createElement("p",null,__("Chapters are a great way to split up longer videos and organize them into different sections.","jetpack-videopress-pkg")),React.createElement("p",null,__("They allow your visitors to see what each section is about and skip to their favorite parts.","jetpack-videopress-pkg")),React.createElement("p",{className:"learn-how-modal__heading"},__("How to add Chapters to your VideoPress videos","jetpack-videopress-pkg")),React.createElement("ol",null,React.createElement("li",null,__("In the Description, add a list of timestamps and titles.","jetpack-videopress-pkg")),React.createElement("li",null,__("Make sure that the first timestamp starts with 00:00.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add at least three chapters entries and as many as you need.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add your chapters entries in consecutive order, with at least 10-second intervals between each.","jetpack-videopress-pkg"))),React.createElement("p",{className:"learn-how-modal__heading"},__("Example","jetpack-videopress-pkg")),React.createElement("p",null,__("00:00 Intro","jetpack-videopress-pkg")),React.createElement("p",null,__("00:24 Mountains arise","jetpack-videopress-pkg")),React.createElement("p",null,__("02:38 Coming back home","jetpack-videopress-pkg")),React.createElement("p",null,__("03:04 Credits","jetpack-videopress-pkg")),React.createElement("div",{className:"learn-how-modal__buttons"},React.createElement(n.Button,{className:"learn-how-modal__button",onClick:t,variant:"primary"},__("Got it, thanks","jetpack-videopress-pkg"))))}},3534:(e,t,r)=>{"use strict";r.d(t,{K:()=>o,a:()=>a});var n=r(6427);const o=React.createElement(n.SVG,{width:"29",height:"21",viewBox:"0 0 29 21",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.79037 0.59375C4.0363 0.59375 5.13102 1.41658 5.47215 2.60947L8.8452 14.4044C8.8486 14.4164 8.85411 14.4273 8.86124 14.4368L12.8572 0.59375H15.0927H21.2721C25.6033 0.59375 28.5066 3.39892 28.5066 7.64565C28.5066 11.9411 25.5272 14.6196 21.0818 14.6196H18.1499H14.3719L13.6379 16.8813C12.9796 18.9095 11.0827 20.2839 8.94152 20.2839C6.80035 20.2839 4.90341 18.9095 4.24517 16.8813L0.137069 4.22276C-0.444671 2.43022 0.898038 0.59375 2.79037 0.59375ZM15.7374 10.4119H20.0156C21.8718 10.4119 22.9856 9.35018 22.9856 7.64565C22.9856 5.93137 21.8718 4.91839 20.0156 4.91839H17.5202L15.7374 10.4119Z"})),a=React.createElement(n.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M7 15.5H17V17H7V15.5Z"}),React.createElement(n.Path,{d:"M17 12.5H7V14H17V12.5Z"}),React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7 3H5.3C4 3 3 4 3 5.3V18.7C3 20 4 21 5.3 21H18.7C20 21 21 20 21 18.7V5.3C21 4 20 3 18.7 3ZM19.5 18.7C19.5 19.1 19.1 19.5 18.7 19.5H5.3C4.9 19.5 4.5 19.1 4.5 18.7V5.3C4.5 4.9 4.9 4.5 5.3 4.5H18.7C19.1 4.5 19.5 4.9 19.5 5.3V18.7Z"}))},396:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6427),o=r(6087),a=r(7723),i=r(2604);const __=a.__;function s({attributes:e,setAttributes:t}){const{autoplay:r,loop:a,muted:s,controls:l,playsinline:c,preload:u,posterData:p}=e,d=p?.previewOnHover,f=(0,o.useCallback)(((e,r)=>n=>{t({[e]:r??n})}),[t]),m=()=>{if(d)return React.createElement("span",{className:i.A["help-message"]},__("Autoplay is turned off as the preview on hover is active.","jetpack-videopress-pkg"));else return React.createElement(React.Fragment,null,React.createElement("span",{className:i.A["help-message"]},__("Start playing the video as soon as the page loads.","jetpack-videopress-pkg")),r&&React.createElement("span",{className:i.A["help-message"]},__("Note: Autoplaying videos may cause usability issues for some visitors.","jetpack-videopress-pkg")))};return React.createElement(n.PanelBody,{title:__("Playback","jetpack-videopress-pkg")},React.createElement(n.ToggleControl,{label:__("Autoplay","jetpack-videopress-pkg"),onChange:f("autoplay"),checked:r&&!d,disabled:d,help:React.createElement(m,null)}),React.createElement(n.ToggleControl,{label:__("Loop","jetpack-videopress-pkg"),onChange:f("loop"),checked:a,help:__("Restarts the video when it reaches the end.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Muted","jetpack-videopress-pkg"),onChange:f("muted"),checked:s}),React.createElement(n.ToggleControl,{label:__("Show Controls","jetpack-videopress-pkg"),onChange:f("controls"),checked:l,help:__("Display the video playback controls.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Play Inline","jetpack-videopress-pkg"),onChange:f("playsinline"),checked:c,help:__("Play the video inline instead of full-screen on mobile devices.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Preload Metadata","jetpack-videopress-pkg"),onChange:f("preload","metadata"===u?"none":"metadata"),checked:"metadata"===u,help:__("Preload the video metadata when the page is loaded.","jetpack-videopress-pkg")}),(0,o.createInterpolateElement)(__("Send us your <a>VideoPress feedback</a>","jetpack-videopress-pkg"),{a:React.createElement(n.ExternalLink,{href:"https://automattic.survey.fm/videopress-feedback"})}))}},7137:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(4715),o=r(6427),a=r(6087),i=r(7723),s=r(4954);const __=i.__,l=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});l.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}if(window?.videoPressEditorState?.playerBridgeUrl)l.push(window.videoPressEditorState.playerBridgeUrl);function c({showCaption:e,html:t,isSelected:r,attributes:i,setAttributes:c,preview:u,isRequestingEmbedPreview:p}){const d=(0,a.useRef)(),f=(0,a.useRef)(),{maxWidth:m,caption:h,videoRatio:v}=i,[g,y]=(0,a.useState)(400);function b(){y(f.current.offsetWidth*v/100+12)}const[k,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(f?.current)if(!u.html){if(v)b(),setTimeout((()=>{b()}),0),w(!1)}else setTimeout((()=>{y("auto")}),250)}),[f,v,u]),(0,a.useEffect)((()=>{if(!t)w(!1);else w(!0)}),[t]);const _=(0,a.useCallback)((e=>{const{data:t}=e||{},{event:r}=t;if("videopress_loading_state"===r)w("loaded"===t?.state)}),[]);(0,a.useEffect)((()=>{const e=(0,s.Q)(f);if(e&&!p)return e.addEventListener("message",_),()=>e?.removeEventListener("message",_)}),[f,p]);const{atTime:E,previewOnHover:R,previewAtTime:C,previewLoopDuration:S,type:A}=i.posterData;let P;if("video-frame"===A)if(R)P=C;else P=E;else P=E;(0,s.A)(f,p,{initialTimePosition:P,autoplay:i.autoplay,wrapperElement:d?.current,previewOnHover:R?{atTime:C,duration:S}:void 0}),(0,a.useEffect)((()=>{if(p)b()}),[k,p]);const j=(0,a.useCallback)(((e,t,r)=>{let n=getComputedStyle(r).width;if(null!==r.parentElement){if(n===getComputedStyle(r.parentElement).width)n="100%"}y("auto"),c({maxWidth:n})}),[c]),x={},T=(0,a.useCallback)((e=>{if(e&&!h)e.focus()}),[h]);if("auto"!==g)x.height=g||200,x.paddingBottom=g?12:0;return React.createElement("figure",{ref:d,className:"jetpack-videopress-player"},React.createElement(o.ResizableBox,{enable:{top:!1,bottom:!1,left:!1,right:!0},maxWidth:"100%",size:{width:m,height:"auto"},style:{marginRight:"auto"},onResizeStop:j,onResizeStart:()=>y("auto")},!r&&React.createElement("div",{className:"jetpack-videopress-player__overlay"}),React.createElement("div",{className:"jetpack-videopress-player__wrapper",ref:f,style:x},React.createElement(React.Fragment,null,!p&&React.createElement(o.SandBox,{html:t,scripts:l}),!k&&React.createElement("div",{className:"jetpack-videopress-player__loading"},__("Loading…","jetpack-videopress-pkg"))))),e&&(!n.RichText.isEmpty(h)||r)&&React.createElement(n.RichText,{identifier:"caption",tagName:"figcaption","aria-label":__("Video caption text","jetpack-videopress-pkg"),placeholder:__("Add caption","jetpack-videopress-pkg"),value:h,onChange:e=>c({caption:e}),inlineToolbar:!0,ref:T}))}},4749:(e,t,r)=>{"use strict";r.d(t,{A:()=>p,z:()=>u});var n=r(4715),o=r(6427),a=r(6087),i=r(7723),s=r(5938),l=r(5855),c=r(9069);const __=i.__;function u({poster:e,className:t}){const r=(0,a.createInterpolateElement)(__("No custom Poster image selected.<help>You can upload or select an image from your media library to override the default video image.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})}),n=(0,a.createInterpolateElement)(__("You are currently overriding the default Poster image.<help>Remove it if you want to use the default image generated by VideoPress.</help>","jetpack-videopress-pkg"),{help:React.createElement("p",{className:"poster-panel-control__help"})});return React.createElement("div",{className:t},e?n:r)}function p({attributes:e,setAttributes:t,clientId:r}){const{poster:a}=e;return React.createElement(o.Dropdown,{contentClassName:"dropdown-content",renderToggle:({isOpen:e,onToggle:t})=>React.createElement(o.ToolbarButton,{label:__("Poster image","jetpack-videopress-pkg"),showTooltip:!0,"aria-expanded":e,"aria-haspopup":"true",onClick:t,icon:s.A}),renderContent:({onClose:e})=>{const p=`video-block__poster-image-description-${r}`;return React.createElement(React.Fragment,null,React.createElement(o.NavigableMenu,{className:"poster-image-block-control__wrapper"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r=>{(e=>{t({poster:e.url})})(r),e()},allowedTypes:c.o,render:({open:e})=>React.createElement(o.MenuItem,{icon:s.A,onClick:e,"aria-describedby":p},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:p,hidden:!0},a?(0,i.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),a):__("There is no poster image currently selected","jetpack-videopress-pkg")))})),React.createElement(u,{poster:a,className:"current-media"}),!!a&&React.createElement(o.MenuItem,{className:"poster-image-block-control__remove-button",variant:"tertiary",isDestructive:!0,onClick:()=>{t({poster:""}),e()},icon:l.A},__("Remove and use default","jetpack-videopress-pkg"))))}})}},8864:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>S,ZC:()=>k});var n=r(4715),o=r(6427),a=r(6087),i=r(7723),s=r(5938),l=r(5855),c=r(3022),u=r(3685),p=r(9689),d=r(6302),f=r(4967),m=r(4954),h=r(9069),v=r(4749);const __=i.__,g=3e3,y=1e4,b=5e3,k=()=>!!window?.Jetpack_Editor_Initial_State?.available_blocks?.["v6-video-frame-poster"],w=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify({...window.videopressAjax,context:"sandbox"})};`],{type:"text/javascript"});w.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}if(window?.videoPressEditorState?.playerBridgeUrl)w.push(window.videoPressEditorState.playerBridgeUrl);function _({clientId:e,attributes:t,setAttributes:r}){const l=`video-block__poster-image-description-${e}`,{poster:c}=t,u=(0,a.useCallback)((e=>{r({poster:e.url,posterData:{...t.posterData,type:"media-library",id:e.id,url:e.url}})}),[t]),p=__("Select Poster Image","jetpack-videopress-pkg"),d=__("Replace Poster Image","jetpack-videopress-pkg"),f=(0,a.useRef)(null),m=Number(t?.videoRatio)/100||9/16,[v,g]=(0,a.useState)(140);return(0,a.useEffect)((()=>{if(!c||!f?.current)return;const{current:e}=f,t=e?.offsetWidth;if(t)g(t*m)}),[c,f,m]),React.createElement(o.Dropdown,{contentClassName:"poster-panel__dropdown",placement:"top left",renderToggle:({isOpen:e,onToggle:t})=>React.createElement(o.Button,{ref:f,style:{backgroundImage:c?`url(${c})`:void 0,height:v,minHeight:v},className:"poster-panel__button "+(c?"has-poster":""),variant:"secondary",onClick:t,"aria-expanded":e},React.createElement("span",null,!c?p:d)),renderContent:({onClose:e})=>React.createElement(o.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:t=>{u(t),e()},allowedTypes:h.o,render:({open:e})=>React.createElement(o.MenuItem,{icon:s.A,onClick:e,"aria-describedby":l},__("Open Media Library","jetpack-videopress-pkg"),React.createElement("p",{id:l,hidden:!0},c?(0,i.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),c):__("There is no poster image currently selected","jetpack-videopress-pkg")))})))})}const E=e=>{const t=e?.current?.querySelector("iframe.components-sandbox");return t?.contentWindow};function R({guid:e,isGeneratingPoster:t,atTime:r=.1,onVideoFrameSelect:n,duration:i}){const[s,l]=(0,a.useState)(r),d=(0,a.useRef)(null),h=(0,p.ep)(e,{autoplay:!0,muted:!0,controls:!1,loop:!1}),{preview:v={html:null},isRequestingEmbedPreview:g}=(0,f.g)(h),{html:y}=v,{playerIsReady:b,pause:k}=(0,m.A)(d,g,{initialTimePosition:r});(0,a.useEffect)((()=>{if(b)k()}),[b,k]);const _=(0,a.useCallback)((e=>{const t=E(d);t?.postMessage({event:"videopress_action_set_currenttime",currentTime:e/1e3}),n(e)}),[E,n]);return React.createElement("div",{className:"poster-panel__frame-picker"},React.createElement("div",{ref:d,className:(0,c.A)("poster-panel__frame-picker__sandbox-wrapper",{"is-player-ready":b,"is-generating-poster":t})},(!b||t)&&React.createElement(o.Spinner,null),React.createElement(o.SandBox,{html:y,scripts:w})),t&&React.createElement(o.Notice,{status:"info",className:"poster-panel__notice",isDismissible:!1},__("Generating video poster image. It may take a few seconds.","jetpack-videopress-pkg")),React.createElement(u.Ay,{label:__("Video frame","jetpack-videopress-pkg"),help:__("Select the frame you want to use as poster image","jetpack-videopress-pkg"),disabled:g||t,max:i,value:s,wait:250,fineAdjustment:50,onChange:l,onDebounceChange:_}))}function C({previewOnHover:e=!1,previewAtTime:t=0,loopDuration:r=b,videoDuration:n,onPreviewOnHoverChange:s,onPreviewAtTimeChange:l,onLoopDurationChange:c}){const p=!n,f=Math.max(n-g,0),[m,h]=(0,a.useState)(Math.min(y,n-t)),v=Math.floor(m/10)/100,k=(0,a.createInterpolateElement)((0,i.sprintf)(/* translators: placeholder is video duration */
__("Video duration: <em>%s</em>.","jetpack-videopress-pkg"),(0,d.ZO)(n)),{em:React.createElement("em",null)}),w=(0,a.createInterpolateElement)((0,i.sprintf)(/* translators: placeholders are the minimum and maximum lapse duration for the previewOnHover, in seconds */
__("Minimum: <em>%1$ss</em>. Maximum: <em>%2$ss</em>.","jetpack-videopress-pkg"),Math.min(g/1e3,v),v),{em:React.createElement("em",null)}),_=0===f,E=m<=g,R=(0,a.useCallback)((e=>{l(e);const t=Math.min(y,n-e);if(h(t),r>t)c(t)}),[l,n,r,c]);return React.createElement(React.Fragment,null,React.createElement(o.ToggleControl,{className:"poster-panel__preview-toggle",label:__("Video preview on hover","jetpack-videopress-pkg"),checked:e,onChange:s,disabled:!e&&p}),e&&React.createElement(React.Fragment,null,React.createElement(u.Ay,{label:__("Starting point","jetpack-videopress-pkg"),max:f,fineAdjustment:50,value:t,onDebounceChange:R,wait:300,disabled:p||_,help:k}),React.createElement(u.Ay,{max:m,min:g,fineAdjustment:50,label:__("Loop duration","jetpack-videopress-pkg"),value:r,onDebounceChange:c,wait:300,help:w,disabled:p||E,marksEvery:1e3})))}function S({attributes:e,setAttributes:t,isGeneratingPoster:r,videoBelongToSite:n}){const{poster:i,posterData:s}=e,u=e?.duration,p="video-frame"===s?.type,d=s?.previewOnHover||!1,f=s?.previewAtTime??s?.atTime??0;let m=s?.previewLoopDuration??b;if(m>u-f)m=u-f;const h=(0,a.useCallback)((r=>{t({posterData:{...e.posterData,type:r?"video-frame":"media-library"},poster:r?"":e.posterData.url||""})}),[e]),g=(0,a.useCallback)((r=>{let n={...e.posterData,previewOnHover:r};if(r)n={previewAtTime:f,previewLoopDuration:m,...n};t({posterData:n,controls:r?!1:e.controls})}),[e]),y=(0,a.useCallback)((r=>{t({posterData:{...e.posterData,previewAtTime:r}})}),[e]),w=(0,a.useCallback)((r=>{let n=f;if(f+r>u)n=u-r;t({posterData:{...e.posterData,previewLoopDuration:r,previewAtTime:n}})}),[e]),E=k()?__("Poster and preview","jetpack-videopress-pkg"):__("Poster","jetpack-videopress-pkg");return React.createElement(o.PanelBody,{title:E,className:"poster-panel",initialOpen:!1},React.createElement(o.ToggleControl,{label:__("Pick from video frame","jetpack-videopress-pkg"),checked:p&&n,onChange:h,disabled:!n}),React.createElement("div",{className:(0,c.A)("poster-panel__frame-wrapper",{"is-selected":p})},React.createElement(R,{isGeneratingPoster:r,guid:e?.guid,atTime:s?.atTime,duration:u,onVideoFrameSelect:r=>{t({posterData:{...e.posterData,type:"video-frame",atTime:r},poster:""})}})),React.createElement("div",{className:(0,c.A)("poster-panel__image-wrapper",{"is-selected":!p})},React.createElement(_,{attributes:e,setAttributes:t}),React.createElement(v.z,{poster:i,className:"poster-panel-card"}),i&&React.createElement(o.MenuItem,{onClick:()=>{t({poster:"",posterData:{...e.posterData,url:""}})},icon:l.A,isDestructive:!0,variant:"tertiary"},__("Remove and use default","jetpack-videopress-pkg"))),k()&&React.createElement(C,{previewOnHover:d,previewAtTime:f,loopDuration:m,videoDuration:u,onPreviewOnHoverChange:g,onPreviewAtTimeChange:y,onLoopDurationChange:w}))}},9573:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(3829);function o({attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:o}){return React.createElement(n.A,{attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:o})}},3829:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(6427),o=r(7723),a=r(8962);const __=o.__,_x=o._x;function i({attributes:e,setAttributes:t,privateEnabledForSite:r,videoBelongToSite:o}){const{privacySetting:i,rating:s,allowDownload:l,displayEmbed:c}=e,u={private:_x("Site Default (Private)","VideoPress privacy setting","jetpack-videopress-pkg"),public:_x("Site Default (Public)","VideoPress privacy setting","jetpack-videopress-pkg")},p={value:String(a.zG.indexOf(a.CR)),label:r?u.private:u.public},d={value:String(a.zG.indexOf(a.az)),label:_x("Public","VideoPress privacy setting","jetpack-videopress-pkg")},f={value:String(a.zG.indexOf(a.o0)),label:_x("Private","VideoPress privacy setting","jetpack-videopress-pkg")};return React.createElement(n.PanelBody,{title:__("Privacy and rating","jetpack-videopress-pkg"),initialOpen:!1},React.createElement(n.SelectControl,{label:_x("Rating","The age rating for this video.","jetpack-videopress-pkg"),value:s??"",options:[{label:_x("G",'Video rating for "General Audiences".',"jetpack-videopress-pkg"),value:a.ko},{label:_x("PG-13",'Video rating for "Parental Guidance", unsuitable for children under 13.',"jetpack-videopress-pkg"),value:a.z7},{label:_x("R",'Video rating for "Restricted", not recommended for children under 17.',"jetpack-videopress-pkg"),value:a.iL}],onChange:e=>{t({rating:e})},disabled:!o}),React.createElement(n.SelectControl,{label:__("Privacy","jetpack-videopress-pkg"),onChange:e=>{const n={};if(e!==p.value)n.isPrivate=e===f.value;else n.isPrivate=r;n.privacySetting=Number(e),t(n)},value:String(i),options:[p,d,f],disabled:!o}),React.createElement(n.ToggleControl,{label:__("Allow download","jetpack-videopress-pkg"),checked:l,onChange:e=>{t({allowDownload:e})},disabled:!o}),React.createElement(n.ToggleControl,{label:__("Show video sharing menu","jetpack-videopress-pkg"),checked:c,onChange:e=>{t({displayEmbed:e})},help:__("Gives viewers the option to share the video link and HTML embed code","jetpack-videopress-pkg"),disabled:!o}))}},9454:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4715),o=r(9069);const a=({attributes:e,onUploadFileStart:t,onSelectVideoFromLibrary:r,onSelectURL:a})=>{const i=e.isPrivate?"https://video.wordpress.com/v":"https://videopress.com/v";return React.createElement(n.MediaReplaceFlow,{mediaId:e.id,handleUpload:!1,accept:"video/*",allowedTypes:o.N,onSelect:function(e){if(!(e?.[0]?.name&&e?.[0]?.size&&e?.[0]?.type))r(e);else t(e[0])},mediaURL:`${i}/${e.guid}`,onSelectURL:a})}},4554:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(6427),o=r(3582),a=r(7143),i=r(6087),s=r(7723),l=r(7326),c=r(6941),u=r.n(c),p=r(9689),d=r(8634),f=r(3534),m=r(3348);const __=s.__,h=u()("videopress:tracks:tracks-control");function v({track:e,guid:t,onDelete:r}){const[o,a]=(0,i.useState)(!1),{kind:s,label:l,srcLang:c}=e;return React.createElement("div",{className:"video-tracks-control__track-item "+(o?"is-deleting":"")},React.createElement("div",{className:"video-tracks-control__track-item-label"},React.createElement("strong",null,l),React.createElement("span",{className:"video-tracks-control__track-item-kind"},s,c?.length?` [${c}]`:"")),React.createElement(n.Button,{variant:"link",isDestructive:!0,onClick:()=>{a(!0),(0,d.Dr)(e,t).then((()=>{a(!1),r?.(e)}))},disabled:o},__("Delete","jetpack-videopress-pkg")))}function g({tracks:e,guid:t,onTrackListUpdate:r}){if(!e?.length)return React.createElement(n.MenuGroup,null,React.createElement("div",{className:"video-tracks-control__track_list__no-tracks"},__("Tracks can be subtitles, captions, chapters, or descriptions. They help make your content more accessible to a wider range of users.","jetpack-videopress-pkg")));const o=(0,i.useCallback)((t=>{const n=[...e].filter((e=>e!==t));r(n)}),[e]);return React.createElement(n.MenuGroup,{className:"video-tracks-control__track_list",label:__("Text tracks","jetpack-videopress-pkg")},e.map(((e,r)=>React.createElement(v,{key:`${e.kind}-${r}`,track:e,guid:t,onDelete:o}))))}function y({attributes:e,setAttributes:t}){const{tracks:r,guid:s}=e,[c,u]=(0,i.useState)(!1),[v,y]=(0,i.useState)(""),b=(0,a.useDispatch)(o.store).invalidateResolution,k=(0,p.ep)(s,e),w=(0,i.useCallback)((e=>{(0,d.n)(e,s).then((n=>{if(n?.error)return h("catch at regular response",n),void y(`Track error: ${n?.message||n.error}`);const o={...e,src:n};delete o.tmpFile;const a=r.findIndex((e=>e.kind===o.kind&&e.srcLang===o.srcLang)),i=[...r];if(a>-1)h("new track already exists, replacing it"),i[a]=o;else h("new track does not exist, adding it"),i.push(o);t({tracks:i}),u(!1),b("getEmbedPreview",[k])})).catch((e=>{h("catch at catch"),y(`Track error: ${e?.message||e.error}`)}))}),[r]),_=(0,i.useCallback)((e=>{t({tracks:e}),b("getEmbedPreview",[k])}),[r]),E=(0,i.useCallback)((()=>{y(""),u(!0)}),[]);return React.createElement(n.ToolbarDropdownMenu,{icon:f.a,label:__("Text tracks","jetpack-videopress-pkg"),popoverProps:{variant:"toolbar"}},(()=>{if(c)return React.createElement(m.A,{onCancel:()=>{u(!1)},onSave:w,tracks:r,errorMessage:v});else return React.createElement(React.Fragment,null,React.createElement(g,{tracks:r,guid:s,onTrackListUpdate:_}),React.createElement(n.MenuGroup,{label:__("Add tracks","jetpack-videopress-pkg"),className:"video-tracks-control"},React.createElement(n.MenuItem,{icon:l.A,onClick:E},__("Upload track","jetpack-videopress-pkg"))))}))}},3348:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(4715),o=r(6427),a=r(7143),i=r(6087),s=r(7723),l=r(6941),c=r.n(l);const __=s.__,u="subtitles",p=".vtt,text/vtt",d=[{label:__("Subtitles","jetpack-videopress-pkg"),value:"subtitles"},{label:__("Captions","jetpack-videopress-pkg"),value:"captions"},{label:__("Descriptions","jetpack-videopress-pkg"),value:"descriptions"},{label:__("Chapters","jetpack-videopress-pkg"),value:"chapters"},{label:__("Metadata","jetpack-videopress-pkg"),value:"metadata"}],f=c()("videopress:tracks:track-form");function m({onCancel:e,onSave:t,tracks:r,errorMessage:l}){const[c,m]=(0,i.useState)(!1),[h,v]=(0,i.useState)(!1),[g,y]=(0,i.useState)(""),[b,k]=(0,i.useState)(!1),[w,_]=(0,i.useState)({kind:u,srcLang:"",label:"",tmpFile:null});f("props.errorMessage",l);const E=(0,i.useCallback)(((e,t)=>{if(f("updateTrack",e,t),"tmpFile"===e)y("");_((r=>({...r,[e]:t})))}),[w]);(0,i.useEffect)((()=>{const e=r.some((e=>e.srcLang===w.srcLang&&e.kind===w.kind));v(e)}),[w,r]),(0,i.useEffect)((()=>{y(l),l&&m(!1)}),[l]);const R=w.tmpFile?.name,C=(0,a.useSelect)((e=>e(n.store).getSettings().mediaUpload),[]),S=(0,i.useCallback)((()=>{m(!0),y(""),t(w)}),[w]),A=(0,i.useCallback)((e=>{if(E("srcLang",e),e?.length>5)return y(__("Language must be five characters or less.","jetpack-videopress-pkg"));y(l||"")}),[l]);if(!C)return null;const P=(0,s.sprintf)(/* translators: %s: The allowed file types to be uploaded as a video text track." */
__("Add a new text track to the video. Allowed formats: %s","jetpack-videopress-pkg"),p);return f("error",g),React.createElement(o.MenuGroup,{className:"video-tracks-control__track-form",label:__("Upload track","jetpack-videopress-pkg")},React.createElement("div",{className:"video-tracks-control__track-form-container"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file-label"},React.createElement("span",null,__("File","jetpack-videopress-pkg"),":"),R&&React.createElement("strong",null,R),React.createElement(n.MediaUploadCheck,null,React.createElement(o.FormFileUpload,{onChange:e=>{const t=e.target.files;if(t?.length)E("tmpFile",t[0])},accept:p,render:({openFileDialog:e})=>React.createElement(o.Button,{variant:"link",onClick:()=>{e()}},__("Select track","jetpack-videopress-pkg"))}))),React.createElement("div",{className:"video-tracks-control__track-form-upload-file-help"},P)),React.createElement("div",{className:"video-tracks-control__track-form-label-language"},React.createElement(o.TextControl,{onChange:e=>E("label",e),label:__("Label","jetpack-videopress-pkg"),value:w.label,help:__("Title of track","jetpack-videopress-pkg"),disabled:c}),React.createElement(o.TextControl,{className:"video-tracks-control__track-form-language-tag",label:__("Source language","jetpack-videopress-pkg"),value:w.srcLang,onChange:A,help:__("Language (en, fr, etc.)","jetpack-videopress-pkg"),disabled:c})),React.createElement(o.SelectControl,{options:d,value:w.kind,label:/* translators: %s: The kind of video text track e.g: "Subtitles, Captions" */
__("Kind","jetpack-videopress-pkg"),onChange:e=>E("kind",e),disabled:c}),g&&React.createElement(o.Notice,{status:"error",isDismissible:!1},g),React.createElement("div",{className:"video-tracks-control__track-form-buttons-container "+(h?" track-exists":"")},h&&React.createElement(o.ToggleControl,{className:"video-tracks-control__track-form-toggle",label:__("Track exists. Replace?","jetpack-videopress-pkg"),checked:b,onChange:k}),React.createElement(o.Button,{isBusy:c,variant:"secondary",disabled:!w.tmpFile||c||h&&!b||!!g,onClick:S},__("Save","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"link",onClick:e},__("Cancel","jetpack-videopress-pkg")))))}},3339:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(3924),o=r(1455),a=r.n(o),i=r(4715),s=r(6427),l=r(6087),c=r(7723),u=r(7430),p=r(560),d=r(9689),f=r(9069),m=r(3898),h=r(3534),v=r(6466),g=r(4217);const __=c.__,y=(0,s.withNotices)((({attributes:e,setAttributes:t,noticeUI:r,noticeOperations:o,handleDoneUpload:c,fileToUpload:y,isReplacing:b,onReplaceCancel:k})=>{const[w,_]=(0,l.useState)(!1),[E,R]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[A,P]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(y)H(y)}),[y]);const[j,x]=(0,l.useState)(null),[T,U]=(0,l.useState)([]),O=(0,l.useCallback)((function(...e){U(e)}),[]),[N,L]=(0,l.useState)(null),D=(0,l.useCallback)((function(e){if(e?.originalResponse)try{const t=e?.originalResponse?.getBody?.(),r=JSON.parse(t);return void L(r)}catch{}L(e)}),[]),{uploadHandler:F,resumeHandler:I,error:B}=(0,u.A)({onError:D,onProgress:O,onSuccess:R});function M(e,t){const{guid:r,url:n}=(0,d.kK)(e);if(!r)return void L({data:{message:__("Invalid VideoPress URL","jetpack-videopress-pkg")}});const o=(0,d.qh)(n);c({...o,guid:r,id:t})}const H=e=>{if(N)D(null);x(e),O(0,e.size),S(!0),F(e)},z=()=>{if(!I)return;I[w?"start":"abort"](),_(!w)},V=function(){I.abort(),k()};if("owner_not_connected"===B?.code){const e=(0,l.createInterpolateElement)(__("<connectLink>Connect</connectLink> your site to use the <moreAboutVideoPressLink>VideoPress</moreAboutVideoPressLink> video block.","jetpack-videopress-pkg"),{connectLink:React.createElement("a",{href:B?.data?.connect_url,rel:"noreferrer noopener"}),moreAboutVideoPressLink:React.createElement(s.ExternalLink,{href:(0,n.A)("jetpack-videopress")})});return React.createElement(m.P,{errorMessage:e},React.createElement(s.Button,{key:"videopress-connect-user",variant:"primary",href:B?.data?.connect_url},__("Connect","jetpack-videopress-pkg")))}if(N){const e=()=>{H(j)},t=()=>{x(null),O([]),D(null),S(!1)};return React.createElement(v.A,{onRetry:e,onCancel:t,errorData:N})}if(C){const r=T[0]/T[1]*100;return React.createElement(g.A,{attributes:e,setAttributes:t,file:j,progress:r,paused:w,uploadedVideoData:E,onPauseOrResume:z,onReplaceCancel:V,isReplacing:b,onDone:c,supportPauseOrResume:!!I})}if(A)return React.createElement(m.P,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(s.Spinner,null),React.createElement("span",null,__("Loading…","jetpack-videopress-pkg"))));else return React.createElement(i.MediaPlaceholder,{handleUpload:!1,className:"is-videopress-placeholder",icon:React.createElement(i.BlockIcon,{icon:h.K}),labels:{title:__("VideoPress","jetpack-videopress-pkg"),instructions:__("Embed a video from your media library or upload a new one with VideoPress.","jetpack-videopress-pkg")},onSelect:function(e){if(e=e?.[0]?e[0]:e,!(e?.name&&e?.size&&e?.type))if(!e.videopress_guid){if(e.id){const t=`videopress/v1/upload/${e.id}`;return P(!0),void a()({path:t,method:"GET"}).then((t=>{if(P(!1),"new"===t.status||"resume"===t.status)x(e),O(t.file_size,t.file_size),S(!0),r=e.id,(0,p.NP)(r).then((e=>{R(e)})).catch((e=>{L(e)}));else if("uploaded"===t.status)M(t.uploaded_video_guid);else L({data:{message:t.message?t.message:__("Error selecting video. Please try again.","jetpack-videopress-pkg")}});var r})).catch((e=>{P(!1),L({data:{message:e.message}})}))}L({data:{message:__("Please select a video from Library or upload a new one","jetpack-videopress-pkg")}})}else{M(Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid,e?.id)}else H(e)},onSelectURL:M,accept:"video/*",allowedTypes:f.N,value:e,notices:r,onError:function(e){o.removeAllNotices(),o.createErrorNotice(e)}})}))},9863:(e,t,r)=>{"use strict";r.d(t,{A:()=>h});var n=r(4715),o=r(6427),a=r(6087),i=r(7723),s=r(1113),l=r(3022),c=r(7975),u=r(6720);const __=i.__,p=["image"],d=({videoPosterImageUrl:e})=>React.createElement("div",{className:"uploading-editor__poster-image"},e?React.createElement("img",{src:e,alt:"Poster"}):React.createElement("span",null,"No Poster Selected")),f=({file:e,videoPosterImageData:t,onVideoFrameSelected:r})=>{const n=Boolean(t?.url),o=(0,a.useRef)(e?.url??URL.createObjectURL(e));return React.createElement("div",{className:(0,l.A)("uploading-editor__poster-container")},React.createElement(u.A,{src:o?.current,onVideoFrameSelected:r,className:(0,l.A)({"uploading-editor__hide":n})}),n&&React.createElement(React.Fragment,null,React.createElement(d,{videoPosterImageUrl:t?.url}),React.createElement(s.A,{className:"uploading-editor__play-icon",icon:c.A})))},m=({hasPoster:e,onSelectPoster:t,onRemovePoster:r})=>{if(e)return React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:t,allowedTypes:p,render:({open:e})=>React.createElement("div",{className:"uploading-editor__poster-buttons"},React.createElement(o.Button,{onClick:r,variant:"secondary",isDestructive:!0},__("Remove Poster Image","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"secondary",onClick:e},__("Select Poster Image","jetpack-videopress-pkg")))});else return React.createElement("span",{className:"uploading-editor__scrubber-help"},__("This is how the video will look. Use the slider to choose a poster image or change it from the block settings.","jetpack-videopress-pkg"))},h=e=>{const{file:t,onSelectPoster:r,onRemovePoster:n,videoPosterImageData:a,onVideoFrameSelected:i}=e;return React.createElement("div",{className:"uploading-editor"},React.createElement(o.BaseControl,{label:__("Video poster (optional)","jetpack-videopress-pkg")},React.createElement(f,{file:t,videoPosterImageData:a,onVideoFrameSelected:i}),React.createElement(m,{hasPoster:Boolean(a),onSelectPoster:r,onRemovePoster:n})))}},6466:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(6427),o=r(7723),a=r(3898);const __=o.__,i=({errorData:e,onRetry:t,onCancel:r})=>{const o=(e=>{if(!e)return"";let t=e?.data?.message||__("Failed to upload your video. Please try again.","jetpack-videopress-pkg");if("Invalid Mime"===t)t=React.createElement(React.Fragment,null,__("The format of the video you uploaded is not supported.","jetpack-videopress-pkg")," ",React.createElement(n.ExternalLink,{href:"https://wordpress.com/support/videopress/recommended-video-settings/",target:"_blank",rel:"noreferrer"},__("Check the recommended video settings.","jetpack-videopress-pkg")));return t})(e);return React.createElement(a.P,{errorMessage:o,onNoticeRemove:r},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(n.Button,{variant:"primary",onClick:t},__("Try again","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"secondary",onClick:r},__("Cancel","jetpack-videopress-pkg"))))}},4217:(e,t,r)=>{"use strict";r.d(t,{A:()=>_});var n=r(1455),o=r.n(n),a=r(6427),i=r(9491),s=r(6087),l=r(9877),c=r(7723),u=r(6941),p=r.n(u),d=r(633),f=r.n(d),m=r(2185),h=r(295),v=r(9697),g=r(9689),y=r(3898),b=r(9863);const __=c.__,k=p()("videopress:block:uploader"),w=({setAttributes:e,videoData:t,onDone:r})=>{const[n,a]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[u,p]=(0,s.useState)(null),{title:d}=t,f=t?.guid,g=(0,v.A)(f),y=(0,h.A)(f),b=(0,m.A)(t?.id),k=({data:t})=>{if(t?.generating)setTimeout((()=>{new Promise(((e,t)=>{y(f).then((t=>e(t))).catch((()=>{o()({path:`/videos/${f}/poster`,apiNamespace:"rest/v1.1",global:!0,method:"GET"}).then((t=>e(t))).catch((e=>t(e)))}))})).then((e=>k(e)))}),2e3);else if(t?.poster)e({poster:t?.poster})},w=(0,i.useDebounce)((e=>{var t;t=e,new Promise(((e,r)=>{g(t).then((t=>{k(t),e()})).catch((()=>{o()({path:`/videos/${f}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:t}).then((()=>{e()})).catch((e=>{r(e)}))}))}))}),1e3);return(0,s.useEffect)((()=>{if(f){if(u)return w({poster_attachment_id:u?.id});if(null!=l)w({at_time:l,is_millisec:!0})}}),[u,l,f]),[e=>{c(e),p(null)},e=>{p(e)},()=>{p(null)},()=>{a(!0);const e=[];if(d)e.push(b({title:d}));Promise.allSettled(e).then((()=>{a(!1),r(t)}))},u,n]},_=({attributes:e,setAttributes:t,progress:r,file:n,paused:o,uploadedVideoData:i,onPauseOrResume:u,onDone:p,supportPauseOrResume:d,isReplacing:m,onReplaceCancel:h})=>{const[v,_,E,R,C,S]=w({setAttributes:t,videoData:{...i,title:e.title},onDone:p}),[A,P]=(0,s.useState)(!0);(0,s.useEffect)((()=>{if(i&&!S&&A)k("Waiting for some time before enabling the DONE button..."),setTimeout((()=>{k("Done, enabling the DONE button now..."),P(!1)}),2500)}),[i,S]);const j=Math.round(r),x={width:`${j}%`},T=__("Resume","jetpack-videopress-pkg"),U=__("Pause","jetpack-videopress-pkg"),O=n?.filesizeHumanReadable??f()(n?.size),{title:N}=e,L=(0,g.T3)((0,l.escapeHTML)(n?.name));return React.createElement(y.P,{disableInstructions:!0},React.createElement(a.TextControl,{label:__("Video title","jetpack-videopress-pkg"),className:"uploading-editor__title",onChange:e=>t({title:e}),value:N,placeholder:L}),React.createElement(b.A,{file:n,onSelectPoster:_,onRemovePoster:E,onVideoFrameSelected:v,videoPosterImageData:C}),React.createElement("div",{className:"videopress-uploader-progress"},j<100?React.createElement(React.Fragment,null,React.createElement("div",{className:"videopress-uploader-progress__file-info"},React.createElement("div",{className:"videopress-uploader-progress__progress"},React.createElement("div",{className:"videopress-uploader-progress__progress-loaded",style:x})),React.createElement("div",{className:"videopress-upload__percent-complete"},(0,c.sprintf)(/* translators: Placeholder is an upload progress percenatage number, from 0-100. */
__("Uploading (%1$s%%)","jetpack-videopress-pkg"),j)),React.createElement("div",{className:"videopress-uploader-progress__file-size"},O)),m&&React.createElement("div",{className:"videopress-uploader-progress__actions"},React.createElement(a.Button,{onClick:h,variant:"tertiary",isDestructive:!0},__("Cancel","jetpack-videopress-pkg"))),React.createElement("div",{className:"videopress-uploader-progress__actions"},j<100&&React.createElement(a.Button,{variant:"tertiary",onClick:u,disabled:!d},o?T:U))):React.createElement(React.Fragment,null,!A?React.createElement("span",null,__("Upload Complete!","jetpack-videopress-pkg")," 🎉"):React.createElement("span",null,__("Finishing up …","jetpack-videopress-pkg")," 🎬"),React.createElement(a.Button,{variant:"primary",onClick:R,disabled:A,isBusy:A},__("Done","jetpack-videopress-pkg")))))}},9069:(e,t,r)=>{"use strict";r.d(t,{N:()=>n,o:()=>o});const n=["video"],o=["image"]},5980:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(6072),o=r.n(n),a=r(4715),i=r(3022),s=r(9689),l=r(8864);const c=[{attributes:{autoplay:{type:"boolean"},title:{type:"string"},description:{type:"string"},caption:{type:"string",source:"html",selector:"figcaption"},controls:{type:"boolean",default:!0},loop:{type:"boolean"},maxWidth:{type:"string",default:"100%"},muted:{type:"boolean"},playsinline:{type:"boolean"},preload:{type:"string",default:"metadata"},seekbarPlayedColor:{type:"string",default:""},seekbarLoadingColor:{type:"string",default:""},seekbarColor:{type:"string",default:""},useAverageColor:{type:"boolean",default:!0},id:{type:"number"},guid:{type:"string"},src:{type:"string"},cacheHtml:{type:"string",default:""},poster:{type:"string"},posterData:{type:"object",default:{}},videoRatio:{type:"number"},tracks:{type:"array",items:{type:"object"},default:[]},privacySetting:{type:"number",default:1},allowDownload:{type:"boolean",default:!0},displayEmbed:{type:"boolean",default:!0},rating:{type:"string"},isPrivate:{type:"boolean"},isExample:{type:"boolean",default:!1},duration:{type:"number"}},supports:{align:!0,anchor:!0},save:function({attributes:e}){const{align:t,autoplay:r,caption:n,loop:c,muted:u,controls:p,playsinline:d,preload:f,useAverageColor:m,seekbarColor:h,seekbarLoadingColor:v,seekbarPlayedColor:g,guid:y,maxWidth:b,poster:k,posterData:w}=e,_=a.useBlockProps.save({className:(0,i.A)("wp-block-jetpack-videopress","jetpack-videopress-player",{[`align${t}`]:t})}),E=(0,l.ZC)(),R=!E?r:r||w.previewOnHover,C=!E?u:u||w.previewOnHover,S=(0,s.ep)(y,{autoplay:R,controls:p,loop:c,muted:C,playsinline:d,preload:f,seekbarColor:h,seekbarLoadingColor:v,seekbarPlayedColor:g,useAverageColor:m,poster:k}),A={};if(b&&b.length>0&&"100%"!==b)A.maxWidth=b,A.margin="auto";return React.createElement("figure",o()({},_,{style:A}),S&&React.createElement("div",{className:"jetpack-videopress-player__wrapper"},`\n${S}\n`),!a.RichText.isEmpty(n)&&React.createElement(a.RichText.Content,{tagName:"figcaption",value:n}))}}]},3898:(e,t,r)=>{"use strict";r.d(t,{A:()=>V,P:()=>z});var n=r(6072),o=r.n(n),a=r(3162),i=r(4715),s=r(4997),l=r(6427),c=r(3582),u=r(7143),p=r(6087),d=r(7723),f=r(7913),m=r(3022),h=r(6941),v=r.n(h),g=r(9448),y=r(9689),b=r(4967),k=r(5007),w=r(8228),_=r(9079),E=r(8226),R=r(917),C=r(3534),S=r(396),A=r(7137),P=r(4749),j=r(8864),x=r(9573),T=r(9454),U=r(4554),O=r(3339),N=r(1200);const __=d.__,L=v()("videopress:video:edit"),{myJetpackConnectUrl:D,jetpackVideoPressSettingUrl:F}=window?.videoPressEditorState||{},I=(0,g.ie)(),B=(0,g.b5)(),M=(0,g.Lv)(),H=10,z=(0,l.withNotices)((function({children:e,errorMessage:t,noticeUI:r,noticeOperations:n,instructions:o=N.h_,disableInstructions:a}){return(0,p.useEffect)((()=>{if(t)n.removeAllNotices(),n.createErrorNotice(t)}),[t,n]),React.createElement(l.Placeholder,{icon:React.createElement(i.BlockIcon,{icon:C.K}),label:N.DD,instructions:a?null:o,notices:r},e)}));function V({attributes:e,setAttributes:t,isSelected:r,clientId:n}){const{autoplay:d,loop:h,muted:v,controls:g,playsinline:C,preload:N,useAverageColor:V,seekbarColor:q,seekbarLoadingColor:G,seekbarPlayedColor:$,guid:Z,cacheHtml:J,poster:K,posterData:W,align:Y,videoRatio:X,tracks:Q,src:ee,caption:te,isExample:re}=e,ne=(0,y.ep)(Z,{autoplay:d||W.previewOnHover,controls:g,loop:h,muted:v||W.previewOnHover,playsinline:C,preload:N,seekbarColor:q,seekbarLoadingColor:G,seekbarPlayedColor:$,useAverageColor:V,poster:K}),[oe,ae]=(0,p.useState)(!1),ie=Q?.filter((e=>"chapters"===e.kind))?.[0],[se,le]=(0,p.useState)(!!te),{videoData:ce,isRequestingVideoData:ue,error:pe,isOverwriteChapterAllowed:de,isGeneratingPoster:fe,videoBelongToSite:me}=(0,k.n)(e,t),{filename:he,private_enabled_for_site:ve}=ce,{preview:ge,isRequestingEmbedPreview:ye}=(0,b.g)(ne),{html:be,width:ke,height:we}=ge;(0,p.useEffect)((()=>{if(be&&be!==J)t({cacheHtml:be})}),[be,J,t]);const _e=be||J;(0,p.useEffect)((()=>{if(!ke||!we)return;const e=we/ke*100;if(e!==X)t({videoRatio:e})}),[X,ke,we,t]);const Ee=(0,u.useDispatch)(c.store).invalidateResolution,Re=(0,p.useCallback)((()=>{Ee("getEmbedPreview",[ne])}),[ne,Ee]),[Ce,Se]=(0,p.useState)(0),Ae=(0,p.useRef)();function Pe(){if(Ae?.current)Ae.current=clearInterval(Ae.current)}(0,p.useEffect)((()=>{if(Ce>=H)return L("Generating preview ➡ attempts number reached out 😪",Ce),Pe();if(!ne)return L("Generating preview ➡ No URL Provided 👋🏻"),Pe();if(ye)return L("Generating preview ➡ Requesting… ⌛"),Pe();if(ge.html)return L("Generating preview ➡ Preview achieved 🎉 %o",ge),Pe();if(!Ae?.current)return Ae.current=setTimeout((()=>{if(ge.html)return L("Generating preview ➡ Preview already achieved 🎉 %o",ge),void Se(0);Se((e=>e+1)),L("Generating preview ➡ Not achieved so far. Start attempt %o 🔥",Ce+1),Re()}),2e3),Pe;else L("Generating preview ➡ Process already requested ⌛")}),[Ce,Ae,Re,ge,ne,ye]);const{className:je,...xe}=(0,i.useBlockProps)({className:"wp-block-jetpack-videopress"}),[Te,Ue]=(0,p.useState)(!Z),[Oe,Ne]=(0,p.useState)(null);(0,p.useEffect)((()=>{if(!ee)return;if(!(0,a.isBlobURL)(ee))return;const e=(0,a.getBlobByURL)(ee);if(e)if((0,w.A)(e))t({src:void 0}),Ue(!0),Ne(e)}),[ee]);const{replaceBlock:Le}=(0,u.useDispatch)(i.store),[De,Fe]=(0,p.useState)({isReplacing:!1,prevAttrs:{}}),Ie=()=>{t(De.prevAttrs),Fe({isReplacing:!1,prevAttrs:{}}),Ue(!1)};if(re)return React.createElement("img",{style:{width:"100%",height:"auto",backgroundSize:"cover"},className:"wp-block-jetpack-videopress__example",src:ee,alt:te});if(Te){const r=r=>{if(Ue(!1),De.isReplacing){const t={...e,...r};return delete t.poster,Fe({isReplacing:!1,prevAttrs:{}}),void Le(n,(0,s.createBlock)("videopress/video",t))}t(r)};return React.createElement("div",o()({},xe,{className:je}),React.createElement(React.Fragment,null,React.createElement(_.A,{isConnected:B,isModuleActive:M||I,isConnecting:oe,onConnect:()=>{if(ae(!0),!I)return window.location.href=F;window.location.href=D}}),React.createElement(O.A,{setAttributes:t,attributes:e,handleDoneUpload:r,fileToUpload:Oe,isReplacing:De?.isReplacing,onReplaceCancel:Ie})))}if((ye||!ge.html)&&Ce>0&&Ce<H)return React.createElement("div",o()({},xe,{className:je}),React.createElement(z,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(l.Spinner,null),__("Generating preview…","jetpack-videopress-pkg"),React.createElement("strong",null," ",Ce))));if(Ce>=H&&!ge.html)return React.createElement("div",o()({},xe,{className:je}),React.createElement(z,{errorMessage:__("Impossible to get a video preview after ten attempts.","jetpack-videopress-pkg"),onNoticeRemove:Ee},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(l.Button,{variant:"primary",onClick:Ee},__("Try again","jetpack-videopress-pkg")),React.createElement(l.Button,{variant:"secondary",onClick:()=>{t({src:void 0,id:void 0,guid:void 0})}},__("Cancel","jetpack-videopress-pkg")))));const Be=__("Remove caption","jetpack-videopress-pkg"),Me=__("Add caption","jetpack-videopress-pkg");return React.createElement("div",o()({},xe,{className:(0,m.A)(je,{[`align${Y}`]:Y,"is-updating-preview":!be})}),React.createElement(i.BlockControls,{group:"block"},React.createElement(l.ToolbarButton,{onClick:()=>{if(le(!se),se&&te)t({caption:void 0})},icon:f.A,"aria-pressed":se,label:se?Be:Me}),React.createElement(P.A,{attributes:e,setAttributes:t,clientId:n}),React.createElement(U.A,{attributes:e,setAttributes:t})),React.createElement(i.BlockControls,{group:"other"},React.createElement(T.A,{setAttributes:t,attributes:e,onUploadFileStart:r=>{Fe({isReplacing:!0,prevAttrs:e}),Ue(!0),t({id:null,guid:null,cacheHtml:"",videoRatio:null}),Ne(r)},onSelectVideoFromLibrary:e=>{const r=Array.isArray(e.videopress_guid)?e.videopress_guid[0]:e.videopress_guid;if(r)t({guid:r,id:e.id,src:e.url,title:e.title,description:e.description});else L("No media guid provided")},onSelectURL:e=>{const{guid:r,url:n}=(0,y.kK)(e);if(r)t({guid:r,src:n});else L("Invalid URL. No video GUID  provided")}})),React.createElement(i.InspectorControls,null,React.createElement(R.A,{filename:he,chapter:ie,isAutoGeneratedChapter:de,updateError:pe,isRequestingVideoData:ue,videoBelongToSite:me,attributes:e,setAttributes:t}),React.createElement(S.A,{attributes:e,setAttributes:t,isRequestingVideoData:ue}),React.createElement(j.Ay,{clientId:n,attributes:e,setAttributes:t,isGeneratingPoster:fe,videoBelongToSite:me}),React.createElement(x.A,{attributes:e,setAttributes:t,isRequestingVideoData:ue,privateEnabledForSite:ve,videoBelongToSite:me})),React.createElement(i.InspectorControls,{group:"color"},React.createElement(E.A,{clientId:n,attributes:e,setAttributes:t,isRequestingVideoData:ue})),React.createElement(_.A,{isModuleActive:M||I,isConnected:B,isConnecting:oe,onConnect:()=>{if(ae(!0),!I)return window.location.href=F;window.location.href=D}}),React.createElement(A.A,{showCaption:se,html:_e,isRequestingEmbedPreview:ye,attributes:e,setAttributes:t,isSelected:r,preview:ge}))}},1200:(e,t,r)=>{"use strict";r.d(t,{DD:()=>d,h_:()=>f});var n=r(4997),o=r(8770),a=r(5015),i=r(3534),s=r(5980),l=r(3898),c=r(4356),u=r(4071);r(2130);const{UU:p,DD:d,h_:f,uK:m}=a;(0,n.registerBlockType)(p,{edit:l.A,title:d,save:()=>null,icon:i.K,attributes:m,example:{attributes:{src:(0,o.A)(u),isExample:!0}},transforms:c.A,deprecated:s.A})},4356:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(3162),o=r(4715),a=r(4997),i=r(7143),s=r(3022),l=r(9689),c=r(8228);const u={from:[{type:"files",isMatch:e=>{if(!e||!e.length)return!1;else return e.some(c.A)},priority:8,transform:e=>(0,c.f)(e).map((e=>(0,a.createBlock)("videopress/video",{src:(0,n.createBlobURL)(e)})))},{type:"block",blocks:["core/embed"],isMatch:e=>"videopress"===e.providerNameSlug&&(0,l.QW)(e?.url),transform:e=>{const{url:t,providerNameSlug:r}=e,n=(0,l.QW)(t);if(!("videopress"===r&&!!n))return(0,a.createBlock)("core/embed",e);return e.className=e.className?.replace(/(wp-embed-aspect-\d+-\d+)|(wp-has-aspect-ratio)/g,"").trim(),(0,a.createBlock)("videopress/video",{guid:n,src:t})}},{type:"raw",isMatch:e=>{const{textContent:t}=e;if(!t)return!1;else return(0,l.eS)(t.trim())},transform:e=>{const{textContent:t}=e;if(!t)return!1;const r=t.trim(),n=(0,l.QW)(r);if(!n)return!1;const o=(0,l.qh)(r);return(0,a.createBlock)("videopress/video",{guid:n,...o})}}],to:[{type:"block",blocks:["core/embed"],isMatch:e=>e?.src||e?.guid,transform:e=>{const{guid:t,src:r,className:n}=e,{url:c}=(0,l.kK)(t);if(!(r||c))return(0,a.createBlock)("core/embed");const{updateBlockAttributes:u}=(0,i.dispatch)(o.store),{getBlockAttributes:p}=(0,i.select)(o.store),d=(0,a.createBlock)("core/embed",{allowResponsive:!0,providerNameSlug:"videopress",responsive:!0,type:"video",url:c}),{clientId:f}=d;return setTimeout((()=>{const{className:e}=p(f)||{},t=(0,s.A)(n,e);u(f,{className:t})}),100),d}}]}},2130:(e,t,r)=>{"use strict";var n=r(4997),o=r(2619);(0,o.addFilter)("blocks.registerBlockType","videopress/core-embed/handle-representation",((e,t)=>{if("core/embed"!==t)return e;else return(e=>{if("variations"in e&&"object"==typeof e.variations)if((0,n.getBlockType)("videopress/video"))e.variations.some((e=>{if("videopress"===e.name)return e.scope=[],!0;else return!1}))})(e),e}))},4967:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var n=r(3582),o=r(7143);const a={html:null,width:null,height:null,thumbnail_height:null,thumbnail_width:null,title:null,version:"1.0",type:"video",provider_name:"VideoPress",provider_url:"https://videopress.com"},i=e=>(0,o.useSelect)((t=>{if(!e)return{preview:a,isRequestingEmbedPreview:!1};else return{preview:t(n.store).getEmbedPreview(e)||a,isRequestingEmbedPreview:t(n.store).isRequestingEmbedPreview(e)||!1}}),[e])},5007:(e,t,r)=>{"use strict";r.d(t,{n:()=>R});var n=r(9491),o=r(3582),a=r(7143),i=r(3656),s=r(6087),l=r(7723),c=r(6941),u=r.n(c),p=r(9689),d=r(8634),f=r(4523),m=r(9799),h=r(6302),v=r(2066),g=r(3531),y=r(7871),b=r(4745);const __=l.__,k=u()("videopress:video:use-sync-media"),w=["post_id","title","description","privacy_setting","rating","allow_download","display_embed","is_private","duration"],_={privacy_setting:"privacySetting",allow_download:"allowDownload",display_embed:"displayEmbed",is_private:"isPrivate",post_id:"id"},E=["title","privacy_setting","is_private","allow_download","display_embed"];function R(e,t){const{id:r,guid:l,isPrivate:c}=e,{videoData:u,isRequestingVideoData:R,videoBelongToSite:C}=(0,g.A)({id:r,guid:l,skipRatingControl:!0,maybeIsPrivate:c}),[S,A]=(0,s.useState)(!1),P=(0,a.useSelect)((e=>e(i.store).isSavingPost()),[]),j=(0,n.usePrevious)(P),x=(0,a.useDispatch)(o.store).invalidateResolution,[T,U]=(0,s.useState)({}),[O,N]=(0,s.useState)(null),L=(0,s.useCallback)((e=>{U((t=>({...t,...e})))}),[]);(0,s.useEffect)((()=>{if(R)return;if(!u||0===Object.keys(u).filter((e=>w.includes(e))).length)return;const r={},n=w.reduce(((t,n)=>{if(void 0===u[n])return t;let o=u[n];if("privacy_setting"===n)o=Number(o);t[n]=o;const a=_[n]||(0,f.s)(n);if(o!==e[a])k("%o is out of sync. Updating %o attr from %o to %o ",n,a,e[a],o),r[a]=o;return t}),{});if(L(n),k("Initial state: ",n),!Object.keys(n).length)return;const[o,a]=function(e,t){if(!e?.tracks)return[[],!1];const r=[];let n=!1;return Object.keys(e.tracks).forEach((o=>{for(const a in e.tracks[o]){const i=e.tracks[o][a];if(!t.tracks.find((e=>e.kind===o&&e.srcLang===a&&e.src===i.src&&e.label===i.label)))k("Track %o is out of sync. Set tracks attr",i.src),n=!0;r.push({src:i.src,kind:o,srcLang:a,label:i.label})}})),t.tracks.forEach((t=>{const r=e.tracks[t.kind]?.[t.srcLang];if(!r||r.src!==t.src||r.label!==t.label)k("Block track %o is out of sync and will be removed",t.src),n=!0})),[r,n]}(u,e);if(a)r.tracks=o;if(Object.keys(r).length)k("Updating attributes: ",r),t(r)}),[u,R]);const D=e.tracks.filter((e=>"chapters"===e.kind&&"en"===e.srcLang))[0]?.src;(0,s.useEffect)((()=>{(async()=>{if(!D)k("Allow overwrite chapter: File does not exist"),A(!0);else{const e="https://videos.files.wordpress.com/"+l+"/"+D,t=await(0,d.Cr)(e,{guid:l,isPrivate:c});k("Chapter %o detected. Overwritable: %o",D,t?"yes":"no"),A(t)}})()}),[D]);const F=(0,y.A)(r),I=!(!j||P),{isGeneratingPoster:B}=(0,b.u)(e);return(0,s.useEffect)((()=>{if(!I)return;if(k("%o Post has been just saved. Syncing...",e?.guid),!e?.id)return void k("%o No media ID found. Impossible to sync. Bail early",e?.guid);const r=w.reduce(((t,r)=>{const n=_[r]||r,o=T[r],a=e[n];if(T[r]!==e[n])k("Field to sync %o: %o => %o: %o",r,o,n,a),t[r]=e[n];return t}),{});if(!Object.keys(r).length)return k("No data to sync. Bail early");k("Syncing data: ",r),F(r).then((()=>{if(L(r),r.privacy_setting){const e=2!==r.privacy_setting?1===r.privacy_setting:u.private_enabled_for_site;k("Updating isPrivate attribute: %o",e),t({isPrivate:e})}const n=(0,m.Ay)(r?.description);if(S&&e?.guid&&r?.description?.length&&(0,v.A)(n)){k("Autogenerated chapter detected. Processing...");const n={label:__("English (auto-generated)","jetpack-videopress-pkg"),srcLang:"en",kind:"chapters",tmpFile:(0,h.Ay)(r.description)};k("Autogenerated track: %o",n),(0,d.n)(n,e.guid).then((r=>{const o=e.tracks.findIndex((e=>"chapters"===e.kind&&"en"===e.srcLang)),a={...n,src:r},i=[...e.tracks];if(o>-1)k("Updating %o auto-generated track",a.src),i[o]=a;else k("Adding auto-generated %o track",a.src),i.push(a);t({tracks:i});const s=(0,p.ep)(e.guid,e);x("getEmbedPreview",[s])}))}else{const t=Object.keys(r).filter((e=>E.includes(e)));if(t?.length){k("Invalidate resolution because of %o",t.join(", "));const r=(0,p.ep)(e.guid,e);x("getEmbedPreview",[r])}}})).catch((t=>{k("%o Error while syncing data: %o",e?.guid,t),N(t)}))}),[I,F,L,e,T,x,w]),{forceInitialState:L,videoData:u,isRequestingVideoData:R,videoBelongToSite:C,error:O,isOverwriteChapterAllowed:S,isGeneratingPoster:B}}},7871:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1455),o=r.n(n);function a(e){return t=>new Promise(((r,n)=>{o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:{id:e,...t}}).then((e=>{if(200!==e?.data)return n(e);r(e)})).catch(n)}))}},3531:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(1455),o=r.n(n),a=r(6087),i=r(8537),s=r(6941),l=r.n(s),c=r(9448),u=r(1370);const p=a.Platform.isNative,d=l()("videopress:video:use-video-data"),f=(0,c.xI)();function m({id:e,guid:t,skipRatingControl:r=!1,maybeIsPrivate:n=!1}){const[s,l]=(0,a.useState)({}),[c,m]=(0,a.useState)(!1),[h,v]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{if(f||p){if(t)m(!0),async function(e=null){try{let a;for(let o=0;o<5;o++){if(a=await(0,u.X)({guid:t,isPrivate:n,token:e,skipRatingControl:r}),a.duration){d(`video duration available: ${a.duration}, retried ${o} times`,a);break}d(`video duration not yet available, retrying (${o+1})`,a),await new Promise((e=>setTimeout(e,1500)))}m(!1);const s=a.original?.split("/")?.at(-1);l({duration:a.duration,allow_download:a.allow_download,post_id:a.post_id,guid:a.guid,title:(0,i.decodeEntities)(a.title),description:(0,i.decodeEntities)(a.description),display_embed:a.display_embed,privacy_setting:a.privacy_setting,rating:a.rating,filename:s,tracks:a.tracks,is_private:a.is_private,private_enabled_for_site:a.private_enabled_for_site});try{const e=await o()({path:`/wpcom/v2/videopress/${t}/check-ownership/${a.post_id}`,method:"GET"});v("boolean"==typeof e?.["video-belong-to-site"]?e["video-belong-to-site"]:!!e?.body?.["video-belong-to-site"])}catch(e){d("Error checking if video belongs to site",e)}}catch(e){throw m(!1),new Error(e?.message??e)}}()}else d("User is not connected")}),[e,t]),{videoData:s,isRequestingVideoData:c,videoBelongToSite:h}}},4954:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,Q:()=>l});var n=r(9491),o=r(6941),a=r.n(o),i=r(1609);const s=a()("videopress:use-video-player"),l=e=>{const t=e?.current?.querySelector("iframe.components-sandbox");return t?.contentWindow},c=(e,t,{initialTimePosition:r,wrapperElement:o,previewOnHover:a})=>{const[c,u]=(0,i.useState)(!1),p=(0,i.useRef)("not-rendered");function d(e){const{data:t={},source:n}=e,{event:o}=e?.data||{};if("videopress_loading_state"===o&&"loaded"===t.state)s("state: loaded"),p.current="loaded";if("videopress_playing"===o&&"loaded"===p.current){if(p.current="first-play",s("state: first-play detected"),a)if(s("pause video"),n.postMessage({event:"videopress_action_pause"},{targetOrigin:"*"}),void 0!==r)s("set position at time %o ",r),n.postMessage({event:"videopress_action_set_currenttime",currentTime:r/1e3},{targetOrigin:"*"});u(!0),p.current="ready"}if("videopress_timeupdate"===o&&a){const e=t.currentTimeMs,r=a.atTime,o=a.atTime+a.duration;if(e<r||e>o)n.postMessage({event:"videopress_action_set_currenttime",currentTime:r/1e3},{targetOrigin:"*"})}}const f=!!a,m=(0,n.usePrevious)(f),h=f&&!m,v=l(e);(0,i.useEffect)((()=>{const r=l(e);if(r)if(!t)return s("player is ready to listen events"),r.addEventListener("message",d),()=>{r.removeEventListener("message",d)}}),[e,t,h,a]);const g=(0,i.useCallback)((()=>{if(v&&c)v.postMessage({event:"videopress_action_play"},"*")}),[e,c,v]),y=(0,i.useCallback)((()=>{if(v&&c)v.postMessage({event:"videopress_action_pause"},"*")}),[e,c,v]);return(0,i.useEffect)((()=>{if(o&&f)return o.addEventListener("mouseenter",g),o.addEventListener("mouseleave",y),()=>{o.removeEventListener("mouseenter",g),o.removeEventListener("mouseleave",y)}}),[f,o,c]),(0,i.useEffect)((()=>{if(c&&a)if(v)v.postMessage({event:"videopress_action_set_currenttime",currentTime:a.atTime/1e3},{targetOrigin:"*"})}),[a?.atTime,c,v]),(0,i.useEffect)((()=>{if(c&&a)if(v)v.postMessage({event:"videopress_action_set_currenttime",currentTime:(a.atTime+a.duration)/1e3},{targetOrigin:"*"})}),[a?.duration,c,v]),{playerIsReady:c,play:g,pause:y}}},4745:(e,t,r)=>{"use strict";r.d(t,{u:()=>f});var n=r(9491),o=r(3582),a=r(7143),i=r(3656),s=r(6087),l=r(6941),c=r.n(l),u=r(1649),p=r(9689);const d=c()("videopress:video:use-sync-media");function f(e){const t=(0,a.useSelect)((e=>e(i.store).isSavingPost()),[]),r=!(!(0,n.usePrevious)(t)||t),l=(0,a.useDispatch)(o.store).invalidateResolution,c=(0,s.useRef)(),[f,m]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(r&&c.current){if("video-frame"===e?.posterData?.type&&e?.posterData?.atTime!==c.current?.posterData?.atTime)d("(*) %o Poster image needs to be generated %s => %s",e?.guid,c.current?.posterData?.atTime,e?.posterData?.atTime),c.current=e,(0,u.TE)(e?.guid,e.posterData.atTime),d("(*) %o Requesting poster image generation",e?.guid),m(!0)}else if(!c.current)c.current=e}),[r]),(0,s.useEffect)((()=>{if(f)(async()=>{if(await(0,u.qb)(e?.guid)){d("(*) %o Poster image has been generated",e?.guid),m(!1);const t=(0,p.ep)(e.guid,e);l("getEmbedPreview",[t])}})()}),[f]),{isGeneratingPoster:f}}},8770:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(3832);const{imagesURLBase:o=""}=window?.videoPressEditorState||{};function a(e){const t=(0,n.getFilename)(e);return o?`${o}${t}`:e}},8228:(e,t,r)=>{"use strict";function n(e){if(!e?.type)return!1;else return e.type.startsWith("video/")}function o(e){return e.filter(n)}r.d(t,{A:()=>n,f:()=>o})},6151:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(1112),o=r(6087),a=r(7723),i=r(1609),s=r(6592);const __=a.__,l=()=>{const[e,t]=(0,i.useState)(!1);return React.createElement(React.Fragment,null,(0,o.createInterpolateElement)(__("Did you know you can now add Chapters to your videos? <link>Learn how</link>","jetpack-videopress-pkg"),{link:React.createElement(n.A,{variant:"link",size:"small",onClick:()=>t(!0)})}),React.createElement(s.A,{onClose:()=>t(!1),isOpen:e}))}},7975:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(6427);const o=React.createElement(n.SVG,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M4.75725 2.075C4.60279 1.97745 4.41041 1.97489 4.25365 2.06832C4.09689 2.16174 4 2.3367 4 2.52632V21.4737C4 21.6633 4.09689 21.8383 4.25365 21.9317C4.41041 22.0251 4.60279 22.0226 4.75725 21.925L19.7573 12.4513C19.9079 12.3562 20 12.1849 20 12C20 11.8151 19.9079 11.6438 19.7573 11.5487L4.75725 2.075Z",fill:"white"}))},2843:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(1112),o=r(6427),a=r(6087),i=r(7723),s=r(1609),l=r(6592);const __=i.__,c=({className:e})=>{const[t,r]=(0,s.useState)(!1);return React.createElement(React.Fragment,null,React.createElement(o.Notice,{status:"warning",className:e,isDismissible:!1},(0,a.createInterpolateElement)(__("It seems there are some chapters, but they are incomplete. Check out the <link>format</link> and try again.","jetpack-videopress-pkg"),{link:React.createElement(n.A,{variant:"link",size:"small",onClick:()=>r(!0)})})),React.createElement(l.A,{onClose:()=>r(!1),isOpen:t}))}},3685:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>g});var n=r(6072),o=r.n(n),a=r(6427),i=r(9491),s=r(6087),l=r(3022),c=r(3239),u=r(941);const p=a.useBaseControlProps||function(e){const{help:t,id:r,...n}=e,o=(0,i.useInstanceId)(a.BaseControl,"wp-components-base-control",r),s="string"==typeof t?"aria-describedby":"aria-details";return{baseControlProps:{id:o,help:t,...n},controlProps:{id:o,...t?{[s]:`${o}__help`}:{}}}},d=e=>{if(a.__experimentalNumberControl)return React.createElement(a.__experimentalNumberControl,e);const t={...e};return["spinControls","isPressEnterToChange","isDragEnabled","isShiftStepEnabled","__unstableStateReducer"].forEach((e=>delete t[e])),React.createElement(a.TextControl,t)},f=({char:e=":"})=>React.createElement("span",{className:u.A["timestamp-control-divider"]},e),m=e=>(t,r)=>{const n={...t};if("COMMIT"===r.type||"PRESS_UP"===r.type||"PRESS_DOWN"===r.type||"CHANGE"===r.type)if(void 0!==n.value)n.value=n.value.toString().padStart(e,"0");return n};function h(e,t,r){if(e>r)e=r;const n=Number.isNaN(e),o=n||void 0===t?0:Math.floor(e%1e3/Number("1e"+(3-t)));return{hh:n?0:Math.floor(e/36e5%24),mm:n?0:Math.floor(e/6e4%60),ss:n?0:Math.floor(e/1e3%60),decimal:o}}const v=({onChange:e,disabled:t,value:r,max:n,autoHideTimeInput:o=!0,decimalPlaces:a})=>{const i={value:h(r,a,n)},s=n>36e5,c=n>6e4,p=t=>o=>{if("string"==typeof o&&!isNaN(parseInt(o,10)))o=parseInt(o,10);if("hh"===t&&o>99||("mm"===t||"ss"===t)&&o>59||"decimal"===t&&o>Number(`1e${a}`)-1)return;if("string"==typeof o)return;i.value={...h(r,a,n),[t]:o};const s=i.value.decimal?i.value.decimal*Number("1e"+(3-a)):0;e?.(1e3*(3600*i.value.hh+60*i.value.mm+i.value.ss)+s)};return React.createElement("div",{className:(0,l.A)(u.A["timestamp-input-wrapper"],{[u.A["is-disabled"]]:t})},(s||!o)&&React.createElement(React.Fragment,null,React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:99,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.hh).padStart(2,"0"),onChange:p("hh")}),React.createElement(f,null)),(c||!o)&&React.createElement(React.Fragment,null,React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.mm).padStart(2,"0"),onChange:p("mm")}),React.createElement(f,null)),React.createElement(d,{className:u.A["timestamp-control-input"],disabled:t,min:0,max:59,step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"00",isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(2),value:String(i.value.ss).padStart(2,"0"),onChange:p("ss")}),a&&React.createElement(React.Fragment,null,React.createElement(f,{char:"."}),React.createElement(d,{className:u.A["timestamp-control-input"],style:{"--input-width":12*a+"px"},disabled:t,min:0,max:Number("9".repeat(a)),step:1,hideLabelFromVision:!0,spinControls:"none",placeholder:"0".repeat(a),isPressEnterToChange:!0,isDragEnabled:!1,isShiftStepEnabled:!1,__unstableStateReducer:m(a),value:String(i.value.decimal).padStart(a,"0"),onChange:p("decimal")})))},g=e=>{const{disabled:t=!1,min:r=0,max:n=Number.MAX_SAFE_INTEGER,value:i,onChange:l,onDebounceChange:f,wait:m=1e3,fineAdjustment:h=50,autoHideTimeInput:g=!0,decimalPlaces:y,marksEvery:b,renderTooltip:k}=e,w=(0,s.useRef)(),[_,E]=(0,s.useState)(i);(0,s.useEffect)((()=>{E(i)}),[i]);const{baseControlProps:R}=p?.(e)||{},C=(0,s.useCallback)((e=>{if(clearTimeout(w?.current),e>n)e=n;if(e<r)e=r;E(e),l?.(e),w.current=setTimeout(f?.bind(null,e),m)}),[f,l,n,r,m]),S=[];if(b)for(let e=r;e<=n;e+=b)S.push({value:e,label:null});const A="function"==typeof k?k:e=>(0,c.f)(e);return React.createElement(a.BaseControl,R,React.createElement("div",{className:u.A["timestamp-control__controls-wrapper"]},d&&React.createElement(v,{disabled:t,max:n,value:_,onChange:C,autoHideTimeInput:g,decimalPlaces:y}),React.createElement(a.RangeControl,o()({disabled:t,className:u.A["timestamp-range-control"],min:r,step:h,initialPosition:_,value:_,max:n,withInputField:!1,onChange:C,marks:b?S:void 0,renderTooltipContent:A},!1===k?{showTooltip:!1}:{}))))}},6720:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(6427),o=r(6087),a=r(1113),i=r(3022),s=r(7975),l=r(8766);const c=({src:e,setMaxDuration:t=null,currentTime:r})=>{const a=(0,o.useRef)(null),[i,s]=(0,o.useState)(!0);(0,o.useEffect)((()=>{a.current.src=e}),[e]),(0,o.useEffect)((()=>{if(a.current&&Number.isFinite(r))a.current.currentTime=r}),[r]);return React.createElement("div",{className:l.A["video-player-wrapper"]},i&&React.createElement("div",{className:l.A["video-player-spinner-wrapper"]},React.createElement(n.Spinner,{className:l.A.spinner})),React.createElement("video",{onLoadedData:()=>s(!1),ref:a,muted:!0,className:l.A.video,onDurationChange:e=>{const n=e.target.duration;if(t?.(n),a.current){const e=Number.isFinite(r)?r:n/2;a.current.currentTime=e}}}))},u=({src:e="",onVideoFrameSelected:t,className:r="",initialCurrentTime:u=null})=>{const[p,d]=(0,o.useState)(0),[f,m]=(0,o.useState)(Number.isFinite(u)?u:null);return React.createElement("div",{className:(0,i.A)(l.A.container,r)},React.createElement(a.A,{className:l.A["play-icon"],icon:s.A}),React.createElement(c,{src:e,setMaxDuration:d,currentTime:f}),React.createElement(n.RangeControl,{className:l.A.range,min:0,step:.1,initialPosition:f,max:p,showTooltip:!1,withInputField:!1,onChange:e=>{m(e),t?.(1e3*e)}}))}},2439:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(9491),o=r(1609),a=r(9799),i=r(2066);const s=e=>{const[t,r]=(0,o.useState)(!1),s=(0,o.useCallback)((()=>{const t=(0,a.Ay)(e);if(0===t.length)r(!1);else r(!(0,i.A)(t))}),[e]),l=(0,n.useDebounce)(s,3e3);return(0,o.useEffect)((()=>{l()}),[e]),(0,o.useEffect)(s,[]),{hasIncompleteChapters:t}}},2185:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1455),o=r.n(n);const a=e=>{const t={allowDownload:"allow_download",displayEmbed:"display_embed"};return r=>new Promise(((n,a)=>{const i=(s=Object.assign({id:e},r),Object.keys(s).reduce(((e,r)=>(e[t[r]||r]=s[r],e)),{}));var s;o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:i}).then((e=>{if("success"!==e?.code)a()})).catch((e=>a(e))).finally((()=>{n()}))}))}},295:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1455),o=r.n(n);const a=e=>()=>new Promise((function(t,r){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},9697:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1455),o=r.n(n);const a=e=>function(t){return new Promise((function(r,n){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:t}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}},7430:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(6087),o=r(6941),a=r.n(o),i=r(8025),s=r(5778);const l=a()("videopress:use-resumable-uploader"),c=({onProgress:e,onSuccess:t,onError:r})=>{const[o,a]=(0,n.useState)({bytesSent:0,bytesTotal:0,percent:0,status:"idle"}),[c,u]=(0,n.useState)(),[p,d]=(0,n.useState)(null),[f,m]=(0,n.useState)();async function h(n){const l=await(0,i.A)("upload-jwt");if(!l.token)return r("No token provided");if("idle"===o.status)a((e=>({...e,status:"uploading"})));let c=!1;const p=(0,s.A)({file:n,tokenData:l,onProgress:(t,r)=>{if(c)return;const n=Math.round(t/r*100);a({bytesSent:t,bytesTotal:r,percent:n,status:"uploading"}),e(t,r)},onSuccess:e=>{c=!0,a((e=>({...e,status:"done"}))),u(e),t(e)},onError:e=>{a((e=>({...e,status:"error"}))),d(e),r(e)}});m({start:()=>{a((e=>({...e,status:"uploading"}))),p.start()},abort:()=>{a((e=>({...e,status:"aborted"}))),p.abort()}})}return{onUploadHandler:function(e){const t=e.target.files[0];if(t)h(t);else l("No file selected. Bail early")},uploadHandler:h,resumeHandler:f,uploadingData:o,media:c,error:p}}},560:(e,t,r)=>{"use strict";r.d(t,{NP:()=>i});var n=r(1455),o=r.n(n),a=(r(6087),r(7723));r(781);const __=a.__,i=e=>{const t=`videopress/v1/upload/${e}`;return new Promise(((r,n)=>{o()({path:t,method:"POST"}).then((t=>{if("uploading"===t.status||"new"===t.status||"resume"===t.status)i(e).then(r).catch(n);else if("complete"===t.status)r({guid:t.uploaded_details.guid,id:t.uploaded_details.media_id,src:t.uploaded_details.upload_src});else if("error"===t.status)n({data:{message:t.error}});else n({data:{message:__("Unexpected error uploading video.","jetpack-videopress-pkg")}})})).catch((e=>{n({data:{message:e?.message}})}))}))}},9448:(e,t,r)=>{"use strict";r.d(t,{Lv:()=>c,b5:()=>u,ie:()=>p,xI:()=>l});var n=r(6941),o=r.n(n);const a=window?.JP_CONNECTION_INITIAL_STATE,{siteType:i=""}=window?.videoPressEditorState||{},s=o()("videopress:connection");function l(){if("simple"===i)return s("Simple site connected ✅"),!0;if(a?.connectionStatus?.isUserConnected)return s("Jetpack user is connected ✅"),!0;else return s("User is not connected ❌"),!1}function c(){return"1"===window?.videoPressEditorState?.isVideoPressModuleActive}function u(){if(!l())return!1;else return c()||p()}function p(){return"1"===window?.videoPressEditorState?.isStandaloneActive}},1370:(e,t,r)=>{"use strict";r.d(t,{X:()=>p});var n=r(1455),o=r.n(n),a=r(6087),i=r(6941),s=r.n(i),l=r(8025);const c=a.Platform.isNative,u=s()("videopress:lib:fetch-video-item");async function p({guid:e,isPrivate:t,token:r=null,skipRatingControl:n=!1,retries:a=0}){try{const a=n?{}:{birth_day:"1",birth_month:"1",birth_year:"2000"};let i;if(t&&!r)i=await(0,l.A)("playback",{guid:e});if(r||i?.token)a.metadata_token=r||i.token;const s=Object.keys(a).length?`?${new URLSearchParams(a).toString()}`:"",u=c?{path:`/rest/v1.1/videos/${e}${s}`}:{url:`https://public-api.wordpress.com/rest/v1.1/videos/${e}${s}`};return await o()({...u,credentials:"omit",global:!0})}catch(t){u("updating retry from",a,"to",a+1);const r=a+1;if(r>2)throw u("Too many attempts to get video. Aborting."),new Error(t?.message??t);if("auth"===t?.error)return u("Authentication error. Reattempt %o",r+"/3"),p({guid:e,isPrivate:!0,token:null,skipRatingControl:n,retries:r});if("Please supply the birthdate parameters."===t?.message)return u("Rating error. Reattempt %o",r+"/3"),p({guid:e,isPrivate:!0,token:null,skipRatingControl:!1,retries:r});throw new Error(t?.message??t)}}},8025:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(6941),o=r.n(n),a=r(5468);const i=o()("videopress:get-media-token");const s=async function(e,t={}){const{id:r=0,guid:n=0,flushToken:o}=t,s=`vpc-${e}-${r}-${n}`,l=window?.videopressAjax?.context||"main";let c;const u=localStorage.getItem(s);if(o)i("(%s) Flushing %o token",l,s),localStorage.removeItem(s);else try{if(u){if(c=await JSON.parse(u),c&&c.expire>Date.now())return i("(%s) Providing %o token from the store",l,s),c.data;i("(%s) Token %o expired. Clean.",l,s),localStorage.removeItem(s)}}catch(e){i("Invalid token in the localStore")}const p=await function(e,t={}){const{id:r=0,guid:n,subscriptionPlanId:o=0,adminAjaxAPI:i,filename:s}=t;return new Promise((function(t,l){const c=i||window.videopressAjax?.ajaxUrl||window?.ajaxurl||"/wp-admin/admin-ajax.php";if(!a.p.includes(e))return l("Invalid scope");const u={action:"videopress-get-playback-jwt"};switch(e){case"upload":if(u.action="videopress-get-upload-token",s)u.filename=s;break;case"upload-jwt":u.action="videopress-get-upload-jwt";break;case"playback":u.action="videopress-get-playback-jwt",u.guid=n,u.post_id=String(r),u.subscription_plan_id=o}fetch(c,{method:"POST",credentials:"same-origin",body:new URLSearchParams(u)}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((r=>{if(!r.success)throw new Error("Token is not achievable");switch(e){case"upload":case"upload-jwt":t({token:r.data.upload_token,blogId:r.data.upload_blog_id,url:r.data.upload_action_url});break;case"playback":t({token:r.data.jwt})}})).catch((()=>{console.warn("Token is not achievable"),t({token:null})}))}))}(e,t);if("playback"===e&&p?.token)i("(%s) Storing %o token",l,s),localStorage.setItem(s,JSON.stringify({data:p,expire:Date.now()+864e5}));return i("(%s) Providing %o token from request/response",l,s),p}},5468:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});const n=["upload","playback","upload-jwt"]},1649:(e,t,r)=>{"use strict";r.d(t,{TE:()=>i,qb:()=>l});var n=r(5985),o=r(1455),a=r.n(o);const i=function(e,t){const r={at_time:t,is_millisec:!0};if((0,n.Sy)())return a()({path:`/videos/${e}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:r});else return a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:r})},s=async function(e){const t=await function(e){return a()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"})}(e);return!t.data?.generating};async function l(e,{wait:t=3e3,attemps:r=10,initialWait:n=!0}={}){if(n)await new Promise((e=>setTimeout(e,t)));for(;!await s(e);){if(0==r--)throw new Error("Poster generation timed out");await new Promise((e=>setTimeout(e,t)))}return!0}},5778:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(6941),o=r.n(n),a=r(781),i=r(8025);const s=o()("videopress:resumable-file-uploader"),l={},c=({file:e,tokenData:t,onProgress:r,onSuccess:n,onError:o})=>{const c=new a._O(e,{onError:o,onProgress:r,endpoint:t.url,removeFingerprintOnSuccess:!0,overridePatchMethod:!1,chunkSize:1e7,metadata:{filename:e.name,filetype:e.type},retryDelays:[0,1e3,3e3,5e3,1e4],onShouldRetry:function(e){if(400===(e.originalResponse?e.originalResponse.getStatus():0))return s("cleanup retry due to 400 error"),localStorage.removeItem(c._urlStorageKey),!1;else return!0},onBeforeRequest:async function(e){const r=e._method;if(["HEAD","OPTIONS"].indexOf(r)>=0)e._method="GET",e.setHeader("X-HTTP-Method-Override",r);if(["DELETE","PUT","PATCH"].indexOf(r)>=0)e._method="POST",e.setHeader("X-HTTP-Method-Override",r);if(e._xhr.open(e._method,e._url,!0),Object.keys(e._headers).forEach((function(t){e.setHeader(t,e._headers[t])})),"POST"===r){if(!!t.token)e.setHeader("x-videopress-upload-token",t.token);else throw"should never happen"}if(["OPTIONS","GET","HEAD","DELETE","PUT","PATCH"].indexOf(r)>=0){const t=(n=e._url,new URL(n).pathname.split("/").pop());if(l[t])e.setHeader("x-videopress-upload-token",l[t]);else if("HEAD"===r){const r=await(0,i.A)("upload-jwt");if(r?.token)l[t]=r.token,e.setHeader("x-videopress-upload-token",r.token)}}var n},onAfterResponse:async function(t,r){if(r.getStatus()>=400)return void s("upload error");const o=r.getHeader("x-videopress-upload-guid"),a=r.getHeader("x-videopress-upload-media-id"),i=r.getHeader("x-videopress-upload-src-url");if(o&&a&&i)return void(n&&n({id:Number(a),guid:o,src:i},e));const c={"x-videopress-upload-key-token":"token","x-videopress-upload-key":"key"},u={};if(Object.keys(c).forEach((function(e){const t=r.getHeader(e);if(t)u[c[e]]=t})),u.key&&u.token)l[u.key]=u.token}});return c.findPreviousUploads().then((function(e){if(e.length)c.resumeFromPreviousUpload(e[0]);c.start()})),c}},9689:(e,t,r)=>{"use strict";r.d(t,{QW:()=>s,T3:()=>c,eS:()=>u,ep:()=>i,kK:()=>l,qh:()=>p});var n=r(3832);const o=["autoPlay","cover","controls","hd","loop","muted","persistVolume","playsinline","posterUrl","preloadContent","sbc","sbpc","sblc","resizeToParent","useAverageColor"],a={autoPlay:"autoplay",cover:"cover",controls:"controls",hd:"hd",loop:"loop",muted:"muted",persistVolume:"persistVolume",playsinline:"playsinline",posterUrl:"poster",preloadContent:"preload",sbc:"seekbarColor",sbpc:"seekbarPlayedColor",sblc:"seekbarLoadingColor",resizeToParent:"resizeToParent",useAverageColor:"useAverageColor"},i=(e,{autoplay:t,controls:r,loop:o,muted:a,playsinline:i,poster:s,preload:l,seekbarColor:c,seekbarPlayedColor:u,seekbarLoadingColor:p,useAverageColor:d})=>{if(!e)return null;const f={resizeToParent:!0,cover:!0,...t&&{autoPlay:!0},...!r&&{controls:!1},...o&&{loop:!0},...a&&{muted:!0,persistVolume:!1},...i&&{playsinline:!0},...s&&{posterUrl:s},...""!==l&&{preloadContent:l},...""!==c&&{sbc:c},...""!==u&&{sbpc:u},...""!==p&&{sblc:p},...d&&{useAverageColor:!0}};return(0,n.addQueryArgs)(`https://videopress.com/v/${e}`,f)},s=e=>{if(!e||"string"!=typeof e)return null;const t=e.match(/^https?:\/\/(?<host>video(?:\.word|s\.files\.word)?press\.com)(?:\/v|\/embed)?\/(?<guid>[a-zA-Z\d]{8})/);if(!t?.groups?.guid)return null;else return t.groups.guid};function l(e,t){const r=function(e){const t=e.match(/^[a-zA-Z\d]{8}$/);if(!t)return!1;else return t[0]}(e);if(r)if(!t)return{url:`https://videopress.com/v/${e}`,guid:e};else return{url:i(e,t),guid:e};const n=s(e);if(n)return{url:e,guid:n};else return{}}const c=e=>e.replace(/\.[^/.]+$/,"");function u(e){return/^https?:\/\/(?:(?:v(?:ideo)?\.wordpress\.com|videopress\.com)\/(?:v|embed)|v\.wordpress\.com)\/([a-z\d]{8})(\/|\b)/i.test(e)}function p(e){let t;try{t=new URLSearchParams(new URL(e).search)}catch(e){return{}}return o.reduce(((e,r)=>{const n=t.get(r);if(null!==n){e[a[r]]=["autoPlay","cover","controls","hd","loop","muted","persistVolume","playsinline","resizeToParent","useAverageColor"].includes(r)?(e=>{if("1"===e||"true"===e)return!0;if("0"===e||"false"===e)return!1;else return null})(n):n}return e}),{})}},8634:(e,t,r)=>{"use strict";r.d(t,{Cr:()=>p,Dr:()=>f,n:()=>d});var n=r(1455),o=r.n(n),a=r(6941),i=r.n(a),s=r(8025);const{siteType:l=""}=window?.videoPressEditorState||{},c="simple"!==l,u=i()("videopress:tracks:lib:video-tracks");async function p(e,t){if(!e)return!1;let r,n="";if(t.isPrivate)r=await(0,s.A)("playback",{guid:t.guid}),n="?"+new URLSearchParams({metadata_token:r?.token}).toString();let o=await fetch(e+n);if(!o.ok&&403===o.status&&t.guid)r=await(0,s.A)("playback",{guid:t.guid}),n="?"+new URLSearchParams({metadata_token:r?.token}).toString(),o=await fetch(e+n);if(!o.ok)return!1;const a=await o.text();return/videopress-chapters-auto-generated/.test(a)}const d=(e,t)=>{const{kind:r,srcLang:n,label:a,tmpFile:i}=e;if(c)return function(e,t){return u("using jetpack api fetch"),new Promise((function(r,n){const{kind:o,srcLang:a,label:i,tmpFile:l}=e;(0,s.A)("upload",{filename:l.name}).then((({token:e,blogId:s})=>{const c=new FormData;c.append("kind",o),c.append("srclang",a),c.append("label",i),c.append("vtt",l),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${e}" blog_id="${s}"`},method:"POST",body:c}).then((e=>{try{const t=e.json();return u("data",e),u("json",t),r(t)}catch(e){return u("error",e),n(e)}})).catch(n)}))}))}({kind:r,srcLang:n,label:a,tmpFile:i},t);else return u("using wpcom api fetch"),new Promise((function(e,s){return o()({method:"POST",path:`/videos/${t}/tracks`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n],["label",a],["vtt",i]]}).then((t=>{try{const r=t.json();return u("data",t),u("json",r),e(r)}catch(e){return u("error",e),s(e)}})).catch(s)}))},f=(e,t)=>{const{kind:r,srcLang:n}=e;if(c)return function({kind:e,srcLang:t},r){return new Promise((function(n,o){(0,s.A)("upload").then((({token:a,blogId:i})=>{const s=new FormData;s.append("kind",e),s.append("srclang",t),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${r}/tracks/delete`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${a}" blog_id="${i}"`},method:"POST",body:s}).then((e=>{try{return n(e.json())}catch(e){return o(e)}})).catch(o)}))}))}({kind:r,srcLang:n},t);const a={method:"POST",path:`/videos/${t}/tracks/delete`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n]]};return o()(a)}},8962:(e,t,r)=>{"use strict";r.d(t,{CR:()=>a,az:()=>n,iL:()=>c,ko:()=>s,o0:()=>o,z7:()=>l,zG:()=>i});const n="public",o="private",a="site-default",i=[n,o,a],s="G",l="PG-13",c="R-17"},4523:(e,t,r)=>{"use strict";function n(e){return e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("_","")))}r.d(t,{s:()=>n})},3239:(e,t,r)=>{"use strict";function n(e){const t=Math.floor(e/36e5),r=Math.floor(e/6e4)%60,n=Math.floor(e/1e3)%60,o=Math.floor(e/10)%100;return[t>0?t.toString().padStart(2,"0")+":":"",t>0||r>0?r.toString().padStart(2,"0")+":":"",n.toString().padStart(2,"0"),"."+o.toString().padStart(2,"0")].join("")}r.d(t,{f:()=>n})},9799:(e,t,r)=>{"use strict";function n(e){if(!e)return[];return e.split("\n").map((e=>function(e){const t=/(?<timeBlock>\(?(?<time>\d{1,2}:\d{2}:\d{2}|\d{1,2}:\d{2})\)?)/.exec(e);if(null==t||null==t.groups)return null;const{groups:{timeBlock:r,time:n}}=t,o=e.indexOf(r),a=(o<(e.length-r.length)/2?e.substring(o+r.length,e.length):e.substring(0,o)).trim().replace(/(\s-$)|(^-\s)/,""),i=n.split(":");if(1===i[0].length)i[0]=`0${i[0]}`;if(2===i.length)i.unshift("00");return{startAt:i.join(":"),title:a}}(e))).filter((e=>null!==e)).sort(((e,t)=>e.startAt.localeCompare(t.startAt)))}r.d(t,{$k:()=>n,Ay:()=>n})},6302:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>i,ZO:()=>o});var n=r(9799);function o(e){const t=Math.floor(e/36e5);let r=e-36e5*t;const n=Math.floor(r/6e4);r-=6e4*n;return[t,n,Math.floor(r/1e3)].map((e=>e<10?`0${e}`:e)).join(":")}const a="videopress-chapters-auto-generated";function i(e,t){const r=function(e,t=3599999e3){const r=(0,n.$k)(e);if(0===r.length)return null;let i="WEBVTT\n";i+="\n",i+="NOTE\n",i+=`${a}\n`,i+="This file was auto-generated based on Video description.\n",i+="For more information, see https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video\n";let s=1;for(const[e,n]of r.entries()){const a=0===e?"000":"001",l=e<r.length-1?r[e+1].startAt:o(t);i+=`\n${s++}\n${n.startAt}.${a} --\x3e ${l}.000\n${n.title}\n`}return i}(e,t);if(!r)return null;else return new File([r],"chapters.vtt",{type:"text/vtt"})}},2066:(e,t,r)=>{"use strict";function n(e){const t=e.split(":");return 3600*parseInt(t[0])+60*parseInt(t[1])+parseInt(t[2])}function o(e){if(!e||0===e.length)return!1;if("00:00:00"!==e[0].startAt)return!1;if(e.length<3)return!1;if(e.some((e=>!e.title)))return!1;for(let t=0;t<e.length-1;t++){const r=e[t];if(n(e[t+1].startAt)-n(r.startAt)<10)return!1}return!0}r.d(t,{A:()=>o})},1016:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(4085),o=r(5217),a=r(3569),i=r(615);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new U(n||[]);return o(i,"_invoke",{value:P(e,r,s)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",h="suspendedYield",v="executing",g="completed",y={};function b(){}function k(){}function w(){}var _={};p(_,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(O([])));R&&R!==r&&n.call(R,i)&&(_=R);var C=w.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,l){var c=f(e[o],e,a);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==s(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,r,n){var o=m;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?g:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(s(t)+" is not iterable")}return k.prototype=w,o(C,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:k,configurable:!0}),k.displayName=p(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(A.prototype),p(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),p(C,u,"Generator"),p(C,i,(function(){return this})),p(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}if(s.done)t(l);else Promise.resolve(l).then(n,o)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return function(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"openFile",value:(t=l().mark((function e(t,r){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.A)()||!t||void 0===t.uri){e.next=11;break}return e.prev=1,e.next=4,(0,o.A)(t.uri);case 4:return s=e.sent,e.abrupt("return",new a.A(s));case 8:throw e.prev=8,e.t0=e.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e.t0));case 11:if("function"!=typeof t.slice||void 0===t.size){e.next=13;break}return e.abrupt("return",Promise.resolve(new a.A(t)));case 13:if("function"!=typeof t.read){e.next=18;break}if(r=Number(r),Number.isFinite(r)){e.next=17;break}return e.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return e.abrupt("return",Promise.resolve(new i.A(t,r)));case 18:return e.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return e.stop()}}),e,null,[[1,8]])})),r=function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(e){c(a,n,o,i,s,"next",e)}function s(e){c(a,n,o,i,s,"throw",e)}i(void 0)}))},function(_x,e){return r.apply(this,arguments)})}]),e}()},3765:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(4085);function o(e,t){if((0,n.A)())return Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t));else return Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}},5369:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,s(n.key),n)}}function i(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r.d(t,{A:()=>l});var l=function(){function e(){o(this,e)}return i(e,[{key:"createRequest",value:function(e,t){return new c(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),c=function(){function e(t,r){o(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return i(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){if("upload"in this._xhr)this._xhr.upload.onprogress=function(t){if(t.lengthComputable)e(t.loaded)}}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,n){e._xhr.onload=function(){r(new u(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),u=function(){function e(t){o(this,e),this._xhr=t}return i(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}()},781:(e,t,r)=>{"use strict";r.d(t,{_O:()=>k});var n=r(5082),o=r(2494),a=r(851),i=r(5369),s=r(1016),l=r(3765);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t=f(t),function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;else if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,d()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){if((t=y(t))in e)Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0});else e[t]=r;return e}function y(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:String(t)}var b=v(v({},n.A.defaultOptions),{},{httpStack:new i.A,fileReader:new s.A,urlStorage:a.o?new a.Y:new o.A,fingerprint:l.A}),k=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,t,[e,r=v(v({},b),r)])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");if(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t)m(e,t)}(t,e),function(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(t,null,[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=v(v({},b),t),n.A.terminate(e,t)}}]),t}(n.A);"function"==typeof XMLHttpRequest&&"function"==typeof Blob&&Blob.prototype.slice},4085:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},3569:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(3716),o=r(9427);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:String(t)}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}return function(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"slice",value:function(e,t){if((0,n.A)())return(0,o.A)(this._file.slice(e,t));var r=this._file.slice(e,t),a=t>=this.size;return Promise.resolve({value:r,done:a})}},{key:"close",value:function(){}}]),e}()},615:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function i(e){if(void 0===e)return 0;if(void 0!==e.size)return e.size;else return e.length}r.d(t,{A:()=>s});var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return function(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"slice",value:function(e,t){if(e<this._bufferOffset)return Promise.reject(new Error("Requested data is before the reader's current offset"));else return this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+i(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(e,t),a=null==o?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then((function(n){var o=n.value;if(n.done)r._done=!0;else if(void 0===r._buffer)r._buffer=o;else r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o);return r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){if(e>this._bufferOffset)this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e;var r=0===i(this._buffer);if(this._done&&r)return null;else return this._buffer.slice(0,t-e)}},{key:"close",value:function(){if(this._reader.cancel)this._reader.cancel()}}]),e}()},3716:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},9427:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(e){r(e)},n.readAsArrayBuffer(e)}))}r.d(t,{A:()=>n})},5217:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(e)},n.onerror=function(e){r(e)},n.open("GET",e),n.send()}))}r.d(t,{A:()=>n})},851:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r.d(t,{Y:()=>u,o:()=>c});var i=!1;try{i="localStorage"in window;var s="tusSupport",l=localStorage.getItem(s);if(localStorage.setItem(s,l),null===l)localStorage.removeItem(s)}catch(e){if(e.code===e.SECURITY_ERR||e.code===e.QUOTA_EXCEEDED_ERR)i=!1;else throw e}var c=i,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(e){}}return t}}]),e}()},3004:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function i(e,t,r){return t=u(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;else if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r))}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(l())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&c(o,r.prototype),o}(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)},s(e)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(l=function(){return!!e})()}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}r.d(t,{A:()=>p});const p=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,t,[e])).originalRequest=o,r.originalResponse=a,r.causingError=n,null!=n)e+=", caused by ".concat(n.toString());if(null!=o){var s=o.getHeader("X-Request-ID")||"n/a",l=o.getMethod(),c=o.getURL(),u=a?a.getStatus():"n/a",p=a?a.getBody()||"":"n/a";e+=", originated from request (method: ".concat(l,", url: ").concat(c,", response code: ").concat(u,", response text: ").concat(p,", request id: ").concat(s,")")}return r.message=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");if(e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t)c(e,t)}(t,e),function(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(s(Error))},2380:(e,t,r)=>{"use strict";r.d(t,{R:()=>o});var n=!1;function o(e){if(n)console.log(e)}},2494:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r.d(t,{A:()=>i});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}]),e}()},5082:(e,t,r)=>{"use strict";r.d(t,{A:()=>T});var n=r(9535),o=r(6580),a=r.n(o),i=r(3004),s=r(2380),l=r(7291);function c(){c=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,i=Object.create(a.prototype),s=new U(n||[]);return o(i,"_invoke",{value:P(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",h="suspendedYield",v="executing",g="completed",y={};function b(){}function k(){}function w(){}var _={};u(_,i,(function(){return this}));var E=Object.getPrototypeOf,R=E&&E(E(O([])));R&&R!==r&&n.call(R,i)&&(_=R);var C=w.prototype=b.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,a,i,s){var l=d(e[o],e,a);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==f(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function P(t,r,n){var o=m;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var l=j(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===m)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?g:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=g,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(f(t)+" is not iterable")}return k.prototype=w,o(C,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:k,configurable:!0}),k.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},S(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new A(p(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(C),u(C,l,"Generator"),u(C,i,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function u(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}if(s.done)t(l);else Promise.resolve(l).then(n,o)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor)r=e.constructor.name;if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(null==t||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){if((t=y(t))in e)Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0});else e[t]=r;return e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n)n.writable=!0;Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:String(t)}var b="tus-v1",k="ietf-draft-03",w={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:j,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:b},_=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r)console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead.");this.options=r,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return function(e,t,r){if(t)g(e.prototype,t);if(r)g(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if([b,k].includes(this.options.protocol))if(this.options.endpoint||this.options.uploadUrl||this.url){var r=this.options.retryDelays;if(null==r||"[object Array]"===Object.prototype.toString.call(r)){if(this.options.parallelUploads>1)for(var n=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];n<o.length;n++){var a=o[n];if(this.options[a])return void this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(r){if(null==r)(0,s.R)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.");else(0,s.R)("Calculated fingerprint: ".concat(r));if(e._fingerprint=r,e._source)return e._source;else return e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));if(e.options.parallelUploads>1||null!=e._parallelUploadUrls)e._startParallelUpload();else e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,r=this,n=this._size,o=0;this._parallelUploads=[];var a=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,i=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var r=Math.floor(e/t),n=[],o=0;o<t;o++)n.push({start:r*o,end:r*(o+1)});return n[t-1].end=e,n}(this._source.size,a);if(this._parallelUploadUrls)i.forEach((function(e,t){e.uploadUrl=r._parallelUploadUrls[t]||null}));this._parallelUploadUrls=new Array(i.length);var l,c=i.map((function(t,a){var s=0;return r._source.slice(t.start,t.end).then((function(l){var c=l.value;return new Promise((function(l,u){var p=h(h({},r.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:h(h({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:l,onError:u,onProgress:function(e){o=o-s+e,s=e,r._emitProgress(o,n)},onUploadUrlAvailable:function(){if(r._parallelUploadUrls[a]=d.url,r._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===i.length)r._saveUploadInUrlStorage()}}),d=new e(c,p);d.start(),r._parallelUploads.push(d)}))}))}));Promise.all(c).then((function(){(l=r._openRequest("POST",r.options.endpoint)).setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var e=E(r.options.metadata);if(""!==e)l.setHeader("Upload-Metadata",e);return r._sendRequest(l,null)})).then((function(e){if(R(e.getStatus(),200)){var t=e.getHeader("Location");if(null!=t)r.url=x(r.options.endpoint,t),(0,s.R)("Created upload at ".concat(r.url)),r._emitSuccess();else r._emitHttpError(l,e,"tus: invalid or missing Location header")}else r._emitHttpError(l,e,"tus: unexpected response while creating upload")})).catch((function(e){r._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,null!=this.url)return(0,s.R)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload();if(null!=this.options.uploadUrl)return(0,s.R)("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload();else return(0,s.R)("Creating a new upload"),void this._createUpload()}},{key:"abort",value:function(t){var r=this;if(null!=this._parallelUploads)this._parallelUploads.forEach((function(e){e.abort(t)}));if(null!==this._req)this._req.abort();if(this._aborted=!0,null!=this._retryTimeout)clearTimeout(this._retryTimeout),this._retryTimeout=null;if(!t||null==this.url)return Promise.resolve();else return e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()}))}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new i.A(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays){if(null!=this._offset&&this._offset>this._offsetBeforeRetry)this._retryAttempt=0;if(P(e,this._retryAttempt,this.options)){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}}if("function"==typeof this.options.onError)this.options.onError(e);else throw e}}},{key:"_emitSuccess",value:function(){if(this.options.removeFingerprintOnSuccess)this._removeFromUrlStorage();if("function"==typeof this.options.onSuccess)this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){if("function"==typeof this.options.onProgress)this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){if("function"==typeof this.options.onChunkComplete)this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);if(this.options.uploadLengthDeferred)t.setHeader("Upload-Defer-Length",1);else t.setHeader("Upload-Length",this._size);var r,n=E(this.options.metadata);if(""!==n)t.setHeader("Upload-Metadata",n);if(this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred)this._offset=0,r=this._addChunkToRequest(t);else{if(this.options.protocol===k)t.setHeader("Upload-Complete","?0");r=this._sendRequest(t,null)}r.then((function(r){if(R(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=x(e.options.endpoint,n),(0,s.R)("Created upload at ".concat(e.url)),"function"==typeof e.options.onUploadUrlAvailable)e.options.onUploadUrlAvailable();if(0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then((function(){if(e.options.uploadDataDuringCreation)e._handleUploadResponse(t,r);else e._offset=0,e._performUpload()}))}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var n=r.getStatus();if(!R(n,200)){if(423===n)return void e._emitHttpError(t,r,"tus: upload is currently locked; retry later");if(R(n,400))e._removeFromUrlStorage();if(!e.options.endpoint)return void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");else return e.url=null,void e._createUpload()}var o=parseInt(r.getHeader("Upload-Offset"),10);if(!Number.isNaN(o)){var a=parseInt(r.getHeader("Upload-Length"),10);if(!Number.isNaN(a)||e.options.uploadLengthDeferred||e.options.protocol!==b){if("function"==typeof e.options.onUploadUrlAvailable)e.options.onUploadUrlAvailable();e._saveUploadInUrlStorage().then((function(){if(o===a)return e._emitProgress(a,a),void e._emitSuccess();e._offset=o,e._performUpload()}))}else e._emitHttpError(t,r,"tus: invalid or missing length value")}else e._emitHttpError(t,r,"tus: invalid or missing offset value")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e=this;if(!this._aborted){var t;if(this.options.overridePatchMethod)(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH");else t=this._openRequest("PATCH",this.url);t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then((function(r){if(R(r.getStatus(),200))e._handleUploadResponse(t,r);else e._emitHttpError(t,r,"tus: unexpected response while uploading chunk")})).catch((function(r){if(!e._aborted)e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),r)}))}}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;if(e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred)n=this._size;return this._source.slice(r,n).then((function(r){var n=r.value,o=r.done,a=n&&n.size?n.size:0;if(t.options.uploadLengthDeferred&&o)t._size=t._offset+a,e.setHeader("Upload-Length",t._size);var i=t._offset+a;if(!t.options.uploadLengthDeferred&&o&&i!==t._size)return Promise.reject(new Error("upload was configured with a size of ".concat(t._size," bytes, but the source is done after ").concat(i," bytes")));if(null===n)return t._sendRequest(e);if(t.options.protocol===k)e.setHeader("Upload-Complete",o?"?1":"?0");return t._emitProgress(t._offset,t._size),t._sendRequest(e,n)}))}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(!Number.isNaN(r)){if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}else this._emitHttpError(e,t,"tus: invalid or missing offset value")}},{key:"_openRequest",value:function(e,t){var r=C(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;if(this._urlStorageKey)this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};if(this._parallelUploads)t.parallelUploadUrls=this._parallelUploadUrls;else t.uploadUrl=this.url;return this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){return S(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],[{key:"terminate",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=C("DELETE",t,r);return S(n,null,r).then((function(e){if(204!==e.getStatus())throw new i.A("tus: unexpected response while terminating upload",null,n,e)})).catch((function(o){if(!(o instanceof i.A))o=new i.A("tus: failed to terminate upload",o,n,null);if(!P(o,0,r))throw o;var a=r.retryDelays[0],s=r.retryDelays.slice(1),l=h(h({},r),{},{retryDelays:s});return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e.terminate(t,l)}))}))}}]),e}();function E(e){return Object.entries(e).map((function(e){var t=p(e,2),r=t[0],o=t[1];return"".concat(r," ").concat(n.o4.encode(String(o)))})).join(",")}function R(e,t){return e>=t&&e<t+100}function C(e,t,r){var n=r.httpStack.createRequest(e,t);if(r.protocol===k)n.setHeader("Upload-Draft-Interop-Version","5");else n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};if(Object.entries(o).forEach((function(e){var t=p(e,2),r=t[0],o=t[1];n.setHeader(r,o)})),r.addRequestId){var a=(0,l.A)();n.setHeader("X-Request-ID",a)}return n}function S(_x,e,t){return A.apply(this,arguments)}function A(){var e;return e=c().mark((function e(t,r,n){var o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof n.onBeforeRequest){e.next=3;break}return e.next=3,n.onBeforeRequest(t);case 3:return e.next=5,t.send(r);case 5:if(o=e.sent,"function"!=typeof n.onAfterResponse){e.next=9;break}return e.next=9,n.onAfterResponse(t,o);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})),A=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)}))},A.apply(this,arguments)}function P(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);else return j(e)}function j(e){var t=e.originalResponse?e.originalResponse.getStatus():0;return(!R(t,400)||409===t||423===t)&&function(){var e=!0;if("undefined"!=typeof navigator&&!1===navigator.onLine)e=!1;return e}()}function x(e,t){return new(a())(t,e).toString()}_.defaultOptions=w;const T=_},7291:(e,t,r)=>{"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}r.d(t,{A:()=>n})},6580:(e,t,r)=>{"use strict";var n=r(6811),o=r(4588),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(e){return(e?e:"").toString().replace(a,"")}var d=[["#","hash"],["?","query"],function(e,t){return h(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function m(e){var t;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof window)t=window;else if("undefined"!=typeof self)t=self;else t={};var r,n=t.location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new g(unescape(e.pathname),{});else if("string"===a)for(r in o=new g(e,{}),f)delete o[r];else if("object"===a){for(r in e)if(!(r in f))o[r]=e[r];if(void 0===o.slashes)o.slashes=s.test(e.href)}return o}function h(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function v(e,t){e=(e=p(e)).replace(i,""),t=t||{};var r,n=c.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],s=!!n[3],l=0;if(a)if(s)r=n[2]+n[3]+n[4],l=n[2].length+n[3].length;else r=n[2]+n[4],l=n[2].length;else if(s)r=n[3]+n[4],l=n[3].length;else r=n[4];if("file:"===o){if(l>=2)r=r.slice(2)}else if(h(o))r=n[4];else if(o){if(a)r=r.slice(2)}else if(l>=2&&h(t.protocol))r=n[4];return{protocol:o,slashes:a||h(o),slashesCount:l,rest:r}}function g(e,t,r){if(e=(e=p(e)).replace(i,""),!(this instanceof g))return new g(e,t,r);var a,s,l,c,f,y,b=d.slice(),k=typeof t,w=this,_=0;if("object"!==k&&"string"!==k)r=t,t=null;if(r&&"function"!=typeof r)r=o.parse;if(a=!(s=v(e||"",t=m(t))).protocol&&!s.slashes,w.slashes=s.slashes||a&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,"file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!h(w.protocol)))b[3]=[/(.*)/,"pathname"];for(;_<b.length;_++)if("function"!=typeof(c=b[_])){if(l=c[0],y=c[1],l!=l)w[y]=e;else if("string"==typeof l){if(~(f="@"===l?e.lastIndexOf(l):e.indexOf(l)))if("number"==typeof c[2])w[y]=e.slice(0,f),e=e.slice(f+c[2]);else w[y]=e.slice(f),e=e.slice(0,f)}else if(f=l.exec(e))w[y]=f[1],e=e.slice(0,f.index);if(w[y]=w[y]||(a&&c[3]?t[y]||"":""),c[4])w[y]=w[y].toLowerCase()}else e=c(e,w);if(r)w.query=r(w.query);if(a&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname))w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)if("."===r[n])r.splice(n,1);else if(".."===r[n])r.splice(n,1),i++;else if(i){if(0===n)a=!0;r.splice(n,1),i--}if(a)r.unshift("");if("."===o||".."===o)r.push("");return r.join("/")}(w.pathname,t.pathname);if("/"!==w.pathname.charAt(0)&&h(w.protocol))w.pathname="/"+w.pathname;if(!n(w.port,w.protocol))w.host=w.hostname,w.port="";if(w.username=w.password="",w.auth){if(~(f=w.auth.indexOf(":")))w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password));else w.username=encodeURIComponent(decodeURIComponent(w.auth));w.auth=w.password?w.username+":"+w.password:w.username}w.origin="file:"!==w.protocol&&h(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,r){var a=this;switch(e){case"query":if("string"==typeof t&&t.length)t=(r||o.parse)(t);a[e]=t;break;case"port":if(a[e]=t,!n(t,a.protocol))a.host=a.hostname,a[e]="";else if(t)a.host=a.hostname+":"+t;break;case"hostname":if(a[e]=t,a.port)t+=":"+a.port;a.host=t;break;case"host":if(a[e]=t,l.test(t))t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":");else a.hostname=t,a.port="";break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");if(~s)a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password));else a.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<d.length;c++){var u=d[c];if(u[4])a[u[1]]=a[u[1]].toLowerCase()}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&h(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){if(!e||"function"!=typeof e)e=o.stringify;var t,r=this,n=r.host,a=r.protocol;if(a&&":"!==a.charAt(a.length-1))a+=":";var i=a+(r.protocol&&r.slashes||h(r.protocol)?"//":"");if(r.username){if(i+=r.username,r.password)i+=":"+r.password;i+="@"}else if(r.password)i+=":"+r.password,i+="@";else if("file:"!==r.protocol&&h(r.protocol)&&!n&&"/"!==r.pathname)i+="@";if(":"===n[n.length-1]||l.test(r.hostname)&&!r.port)n+=":";if(i+=n+r.pathname,t="object"==typeof r.query?e(r.query):r.query)i+="?"!==t.charAt(0)?"?"+t:t;if(r.hash)i+=r.hash;return i}},g.extractProtocol=v,g.location=m,g.trimLeft=p,g.qs=o,e.exports=g},8894:(e,t,r)=>{"use strict";e.exports=r.p+"images/dynamic-colors-34cf384d91fb0fd3a9d5.png"},4071:(e,t,r)=>{"use strict";e.exports=r.p+"images/videopress-block-example-image-d7dd9fae6ff49181bfca.jpg"},9384:e=>{"use strict";e.exports=window.JetpackConnection},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},8468:e=>{"use strict";e.exports=window.lodash},1455:e=>{"use strict";e.exports=window.wp.apiFetch},3162:e=>{"use strict";e.exports=window.wp.blob},4715:e=>{"use strict";e.exports=window.wp.blockEditor},4997:e=>{"use strict";e.exports=window.wp.blocks},6427:e=>{"use strict";e.exports=window.wp.components},9491:e=>{"use strict";e.exports=window.wp.compose},3582:e=>{"use strict";e.exports=window.wp.coreData},7143:e=>{"use strict";e.exports=window.wp.data},3656:e=>{"use strict";e.exports=window.wp.editor},6087:e=>{"use strict";e.exports=window.wp.element},9877:e=>{"use strict";e.exports=window.wp.escapeHtml},2619:e=>{"use strict";e.exports=window.wp.hooks},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},7723:e=>{"use strict";e.exports=window.wp.i18n},2279:e=>{"use strict";e.exports=window.wp.plugins},5573:e=>{"use strict";e.exports=window.wp.primitives},3832:e=>{"use strict";e.exports=window.wp.url},6072:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3022:(e,t,r)=>{"use strict";function n(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=n(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}r.d(t,{A:()=>o});const o=function(){for(var e,t,r=0,o="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=n(e))&&(o&&(o+=" "),o+=t);return o}},9535:(e,t,r)=>{"use strict";r.d(t,{o4:()=>I});const n="3.7.7",o=n,a="function"==typeof Buffer,i="function"==typeof TextDecoder?new TextDecoder:void 0,s="function"==typeof TextEncoder?new TextEncoder:void 0,l=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(l),u=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,p=String.fromCharCode.bind(String),d="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),f=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),m=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),h=e=>{let t,r,n,o,a="";const i=e.length%3;for(let i=0;i<e.length;){if((r=e.charCodeAt(i++))>255||(n=e.charCodeAt(i++))>255||(o=e.charCodeAt(i++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,a+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return i?a.slice(0,i-3)+"===".substring(i):a},v="function"==typeof btoa?e=>btoa(e):a?e=>Buffer.from(e,"binary").toString("base64"):h,g=a?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(p.apply(null,e.subarray(r,r+4096)));return v(t.join(""))},y=(e,t=!1)=>t?f(g(e)):g(e),b=e=>{if(e.length<2){return(t=e.charCodeAt(0))<128?e:t<2048?p(192|t>>>6)+p(128|63&t):p(224|t>>>12&15)+p(128|t>>>6&63)+p(128|63&t)}else{var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return p(240|t>>>18&7)+p(128|t>>>12&63)+p(128|t>>>6&63)+p(128|63&t)}},k=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,w=e=>e.replace(k,b),_=a?e=>Buffer.from(e,"utf8").toString("base64"):s?e=>g(s.encode(e)):e=>v(w(e)),E=(e,t=!1)=>t?f(_(e)):_(e),R=e=>E(e,!0),C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,S=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return p(55296+(t>>>10))+p(56320+(1023&t));case 3:return p((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return p((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},A=e=>e.replace(C,S),P=e=>{if(e=e.replace(/\s+/g,""),!u.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,o="";for(let a=0;a<e.length;)t=c[e.charAt(a++)]<<18|c[e.charAt(a++)]<<12|(r=c[e.charAt(a++)])<<6|(n=c[e.charAt(a++)]),o+=64===r?p(t>>16&255):64===n?p(t>>16&255,t>>8&255):p(t>>16&255,t>>8&255,255&t);return o},j="function"==typeof atob?e=>atob(m(e)):a?e=>Buffer.from(e,"base64").toString("binary"):P,x=a?e=>d(Buffer.from(e,"base64")):e=>d(j(e).split("").map((e=>e.charCodeAt(0)))),T=e=>x(O(e)),U=a?e=>Buffer.from(e,"base64").toString("utf8"):i?e=>i.decode(x(e)):e=>A(j(e)),O=e=>m(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),N=e=>U(O(e)),L=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),D=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,L(t));e("fromBase64",(function(){return N(this)})),e("toBase64",(function(e){return E(this,e)})),e("toBase64URI",(function(){return E(this,!0)})),e("toBase64URL",(function(){return E(this,!0)})),e("toUint8Array",(function(){return T(this)}))},F=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,L(t));e("toBase64",(function(e){return y(this,e)})),e("toBase64URI",(function(){return y(this,!0)})),e("toBase64URL",(function(){return y(this,!0)}))},I={version:n,VERSION:o,atob:j,atobPolyfill:P,btoa:v,btoaPolyfill:h,fromBase64:N,toBase64:E,encode:E,encodeURI:R,encodeURL:R,utob:w,btou:A,decode:N,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:y,toUint8Array:T,extendString:D,extendUint8Array:F,extendBuiltins:()=>{D(),F()}}},5015:e=>{"use strict";e.exports=JSON.parse('{"UU":"videopress/video","DD":"VideoPress","h_":"Embed a video from your media library or upload a new one with VideoPress.","uK":{"autoplay":{"type":"boolean"},"anchor":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"caption":{"type":"string"},"controls":{"type":"boolean","default":true},"loop":{"type":"boolean"},"maxWidth":{"type":"string","default":"100%"},"muted":{"type":"boolean"},"playsinline":{"type":"boolean"},"preload":{"type":"string","default":"metadata"},"seekbarPlayedColor":{"type":"string","default":""},"seekbarLoadingColor":{"type":"string","default":""},"seekbarColor":{"type":"string","default":""},"useAverageColor":{"type":"boolean","default":true},"id":{"type":"number"},"guid":{"type":"string"},"src":{"type":"string"},"cacheHtml":{"type":"string","default":""},"poster":{"type":"string"},"posterData":{"type":"object","default":{}},"videoRatio":{"type":"number"},"tracks":{"type":"array","items":{"type":"object"},"default":[]},"privacySetting":{"type":"number","default":1},"allowDownload":{"type":"boolean","default":true},"displayEmbed":{"type":"boolean","default":true},"rating":{"type":"string"},"isPrivate":{"type":"boolean"},"isExample":{"type":"boolean","default":false},"duration":{"type":"number"}}}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)if(r.o(t,n)&&!r.o(e,n))Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;if(r.g.importScripts)e=r.g.location+"";var t=r.g.document;if(!e&&t){if(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase())e=t.currentScript.src;if(!e){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../../../"})();r(1200)})();