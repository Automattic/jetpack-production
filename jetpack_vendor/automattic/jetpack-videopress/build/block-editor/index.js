/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={1074:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(9307);const o=function(e){let{icon:t,size:r=24,...o}=e;return(0,n.cloneElement)(t,{width:r,height:r,...o})}},5022:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(o.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"}))},9975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M15.6 7.3h-.7l1.6-3.5-.9-.4-3.9 8.5H9v1.5h2l-1.3 2.8H8.4c-2 0-3.7-1.7-3.7-3.7s1.7-3.7 3.7-3.7H10V7.3H8.4c-2.9 0-5.2 2.3-5.2 5.2 0 2.9 2.3 5.2 5.2 5.2H9l-1.4 3.2.9.4 5.7-12.5h1.4c2 0 3.7 1.7 3.7 3.7s-1.7 3.7-3.7 3.7H14v1.5h1.6c2.9 0 5.2-2.3 5.2-5.2 0-2.9-2.4-5.2-5.2-5.2z"}))},7659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(9307),o=r(444);const a=(0,n.createElement)(o.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(o.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"}))},5235:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},951:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(1741)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1741:(e,t,r)=>{e.exports=function(e){function t(e){let r,o,a,s=null;function i(...e){if(!i.enabled)return;const n=i,o=Number(new Date),a=o-(r||o);n.diff=a,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";s++;const a=t.formatters[o];if("function"==typeof a){const t=e[s];r=a.call(n,t),e.splice(s,1),s--}return r})),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.useColors=t.useColors(),i.color=t.selectColor(e),i.extend=n,i.destroy=t.destroy,Object.defineProperty(i,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(o!==t.namespaces&&(o=t.namespaces,a=t.enabled(e)),a),set:e=>{s=e}}),"function"==typeof t.init&&t.init(i),i}function n(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(3171),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},861:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},n={floor:Math.floor,ceil:Math.ceil};function o(o){var a,s,i,l,c,u,d,p,f,v,h,m,g,k,b,y,w,_,E,R,C,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},S=[],j=0;if(isNaN(o))throw new TypeError("Invalid number");if(i=!0===P.bits,b=!0===P.unix,m=!0===P.pad,s=P.base||10,g=void 0!==P.round?P.round:b?1:2,d=void 0!==P.locale?P.locale:"",p=P.localeOptions||{},y=void 0!==P.separator?P.separator:"",w=void 0!==P.spacer?P.spacer:b?"":" ",E=P.symbols||{},_=2===s?P.standard||"iec":"jedec",h=P.output||"string",c=!0===P.fullform,u=P.fullforms instanceof Array?P.fullforms:[],a=void 0!==P.exponent?P.exponent:-1,R=n[P.roundingMethod]||Math.round,f=(v=Number(o))<0,l=s>2?1e3:1024,C=!1===isNaN(P.precision)?parseInt(P.precision,10):0,f&&(v=-v),(-1===a||isNaN(a))&&(a=Math.floor(Math.log(v)/Math.log(l)))<0&&(a=0),a>8&&(C>0&&(C+=8-a),a=8),"exponent"===h)return a;if(0===v)S[0]=0,k=S[1]=b?"":t[_][i?"bits":"bytes"][a];else{j=v/(2===s?Math.pow(2,10*a):Math.pow(1e3,a)),i&&(j*=8)>=l&&a<8&&(j/=l,a++);var x=Math.pow(10,a>0?g:0);S[0]=R(j*x)/x,S[0]===l&&a<8&&void 0===P.exponent&&(S[0]=1,a++),k=S[1]=10===s&&1===a?i?"kbit":"kB":t[_][i?"bits":"bytes"][a],b&&(S[1]=S[1].charAt(0),e.test(S[1])&&(S[0]=Math.floor(S[0]),S[1]=""))}if(f&&(S[0]=-S[0]),C>0&&(S[0]=S[0].toPrecision(C)),S[1]=E[S[1]]||S[1],!0===d?S[0]=S[0].toLocaleString():d.length>0?S[0]=S[0].toLocaleString(d,p):y.length>0&&(S[0]=S[0].toString().replace(".",y)),m&&!1===Number.isInteger(S[0])&&g>0){var U=y||".",O=S[0].toString().split(U),A=O[1]||"",T=A.length,F=g-T;S[0]="".concat(O[0]).concat(U).concat(A.padEnd(T+F,"0"))}return c&&(S[1]=u[a]?u[a]:r[_][a]+(i?"bit":"byte")+(1===S[0]?"":"s")),"array"===h?S:"object"===h?{value:S[0],symbol:S[1],exponent:a,unit:k}:S.join(w)}return o.partial=function(e){return function(t){return o(t,e)}},o}()},4097:function(e,t){var r,n;n="undefined"!=typeof self?self:"undefined"!=typeof window||"undefined"!=typeof window?window:this,e.exports=function(n){"use strict";var o,a=(n=n||{}).Base64,s="2.6.4",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=function(e){for(var t={},r=0,n=e.length;r<n;r++)t[e.charAt(r)]=r;return t}(i),c=String.fromCharCode,u=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=function(e){return e.replace(d,u)},f=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[i.charAt(r>>>18),i.charAt(r>>>12&63),t>=2?"=":i.charAt(r>>>6&63),t>=1?"=":i.charAt(63&r)].join("")},v=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},h=function(e){return v(p(String(e)))},m=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},g=function(e,t){return t?m(h(e)):h(e)},k=function(e){return g(e,!0)};n.Uint8Array&&(o=function(e,t){for(var r="",n=0,o=e.length;n<o;n+=3){var a=e[n],s=e[n+1],l=e[n+2],c=a<<16|s<<8|l;r+=i.charAt(c>>>18)+i.charAt(c>>>12&63)+(void 0!==s?i.charAt(c>>>6&63):"=")+(void 0!==l?i.charAt(63&c):"=")}return t?m(r):r});var b,y=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},_=function(e){return e.replace(y,w)},E=function(e){var t=e.length,r=t%4,n=(t>0?l[e.charAt(0)]<<18:0)|(t>1?l[e.charAt(1)]<<12:0)|(t>2?l[e.charAt(2)]<<6:0)|(t>3?l[e.charAt(3)]:0),o=[c(n>>>16),c(n>>>8&255),c(255&n)];return o.length-=[0,0,2,1][r],o.join("")},R=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,E)},C=function(e){return R(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},P=function(e){return _(R(e))},S=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},j=function(e){return P(S(e))};n.Uint8Array&&(b=function(e){return Uint8Array.from(C(S(e)),(function(e){return e.charCodeAt(0)}))});var x=function(){var e=n.Base64;return n.Base64=a,e};if(n.Base64={VERSION:s,atob:C,btoa:v,fromBase64:j,toBase64:g,utob:p,encode:g,encodeURI:k,btou:_,decode:j,noConflict:x,fromUint8Array:o,toUint8Array:b},"function"==typeof Object.defineProperty){var U=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",U((function(){return j(this)}))),Object.defineProperty(String.prototype,"toBase64",U((function(e){return g(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",U((function(){return g(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(n)},5214:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={"help-message":"MVuHtQ6MxijxzLoKaiAD"}},9895:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={dropdown_content:"OBdFcFUcIeHeC04uL0Zf",current_media:"Z1wxtOMWZxmH5rJbzGfb"}},4641:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={container:"ianknO6MB_ng2EieMQdE","play-icon":"no33D8j7N4nzdafpETZy","video-player-wrapper":"VFzg5w6i04b05mkee2SA","video-player-spinner-wrapper":"PHuqvGT1Z0IVZgjAtUZw",spinner:"xwBn5mUH0mhSBqas1dog",video:"k5rpcKdHL3HKU39CrUhe",range:"sgykjydBL76DT5yDw_ka"}},3171:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,a=7*o,s=365.25*o;function i(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,l){l=l||{};var c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!i)return;var l=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*a;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}(e);if("number"===c&&isFinite(e))return l.long?function(e){var a=Math.abs(e);if(a>=o)return i(e,a,o,"day");if(a>=n)return i(e,a,n,"hour");if(a>=r)return i(e,a,r,"minute");if(a>=t)return i(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=o)return Math.round(e/o)+"d";if(a>=n)return Math.round(e/n)+"h";if(a>=r)return Math.round(e/r)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},142:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,s=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;s.push(a+"="+n)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),s=n(t[2]);null===a||null===s||a in o||(o[a]=s)}return o}},2298:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},6895:(e,t,r)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};let n;var o;"undefined"!=typeof window&&(n=null===(o=window.Initial_State)||void 0===o?void 0:o.calypsoEnv);if(0===e.search("https://")){const t=new URL(e);e=`https://${t.host}${t.pathname}`,r.url=encodeURIComponent(e)}else r.source=encodeURIComponent(e);Object.keys(t).map((e=>{r[e]=encodeURIComponent(t[e])})),!Object.keys(r).includes("site")&&"undefined"!=typeof jetpack_redirects&&jetpack_redirects.hasOwnProperty("currentSiteRawUrl")&&(r.site=jetpack_redirects.currentSiteRawUrl),n&&(r.calypso_env=n);const a=Object.keys(r).map((e=>e+"="+r[e])).join("&");return"https://jetpack.com/redirect/?"+a}r.d(t,{Z:()=>n})},7159:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(2175),o=r(5609),a=r(4333),s=r(9307),i=r(5736),l=r(5744);const __=i.__;function c(e){let{attributes:t,setAttributes:r}=e;const{useAverageColor:i,seekbarColor:c,seekbarLoadingColor:u,seekbarPlayedColor:d}=t,p={seekbarPlayedColor:d,seekbarLoadingColor:u,seekbarColor:c},[f,v]=(0,s.useState)(p),h=(0,a.useDebounce)((e=>{r(e)}),2e3),m=(0,s.useCallback)((e=>{v((t=>({...t,...e}))),h(e)}),[]);return React.createElement(o.PanelBody,{title:__("Color","jetpack-videopress-pkg"),initialOpen:!1},React.createElement(o.ToggleControl,{label:__("Dynamic color","jetpack-videopress-pkg"),help:React.createElement(React.Fragment,null,__("Playback bar colors adapt to the video as it plays.","jetpack-videopress-pkg"),React.createElement("img",{className:"videopress-dynamic-color-example",src:l,alt:__("Dynamic colors example","jetpack-videopress-pkg")})),onChange:e=>r({useAverageColor:e}),checked:i}),!i&&React.createElement(n.PanelColorSettings,{className:"videopress-color-panel",opened:!i,showTitle:!1,colorSettings:[{label:__("Main","jetpack-videopress-pkg"),showTitle:!0,value:f.seekbarColor,onChange:e=>m({seekbarColor:e})},{label:__("Loaded","jetpack-videopress-pkg"),showTitle:!0,value:f.seekbarLoadingColor,onChange:e=>m({seekbarLoadingColor:e})},{label:__("Progress","jetpack-videopress-pkg"),showTitle:!0,value:f.seekbarPlayedColor,onChange:e=>m({seekbarPlayedColor:e})}]}))}},4706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5609),o=r(9307),a=r(5736),s=r(6152);const __=a.__;function i(e){let{filename:t,chapter:r,isAutoGeneratedChapter:a,attributes:i,setAttributes:l,isRequestingVideoData:c}=e;const{title:u,description:d}=i,[p,f]=(0,o.useState)(!1),v=null!=d&&d.length?d.split("\n").map((e=>Math.ceil(e.length/31)||1)).reduce(((e,t)=>e+t),0):4,h=Math.min(12,Math.max(v,4)),m=(0,o.createInterpolateElement)(__("Did you know you can now add Chapters to your videos? <link>Learn how</link>","jetpack-videopress-pkg"),{link:React.createElement(n.Button,{variant:"link",onClick:()=>f((e=>!e))})});return React.createElement(n.PanelBody,{title:__("Details","jetpack-videopress-pkg")},React.createElement(n.TextControl,{label:__("Title","jetpack-videopress-pkg"),value:u,placeholder:null!=t&&t.length?`${t} video`:__("Video title","jetpack-videopress-pkg"),onChange:e=>l({title:e}),disabled:c}),React.createElement(n.TextareaControl,{label:__("Description","jetpack-videopress-pkg"),value:d,placeholder:__("Video description","jetpack-videopress-pkg"),onChange:e=>l({description:e}),rows:h,disabled:c,help:m}),!!r&&!a&&React.createElement(n.Notice,{status:"success",className:"learn-how-notice",isDismissible:!1},React.createElement("p",{className:"learn-how-notice__message"},(0,o.createInterpolateElement)(__("You already have chapter information on an attached VTT file, so adding chapters to the description will not change the original ones. <link>Learn more</link>","jetpack-videopress-pkg"),{link:React.createElement(n.ExternalLink,{href:"https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video"})}))),React.createElement(s.Z,{onClose:()=>f(!1),isOpen:p}))}},6152:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(5609),o=r(5736);const __=o.__;function a(e){let{isOpen:t,onClose:r}=e;return t?React.createElement(n.Modal,{title:__("Chapters in VideoPress","jetpack-videopress-pkg"),isDismissible:!1,className:"learn-how-modal",onRequestClose:r},React.createElement("p",null,__("Chapters are a great way to split up longer videos and organize them into different sections.","jetpack-videopress-pkg")),React.createElement("p",null,__("They allow your visitors to see what each section is about and skip to their favorite parts.","jetpack-videopress-pkg")),React.createElement("p",{className:"learn-how-modal__heading"},__("How to add Chapters to your VideoPress videos","jetpack-videopress-pkg")),React.createElement("ol",null,React.createElement("li",null,__("In the Description, add a list of timestamps and titles.","jetpack-videopress-pkg")),React.createElement("li",null,__("Make sure that the first timestamp starts with 00:00.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add at least three chapters entries and as many as you need.","jetpack-videopress-pkg")),React.createElement("li",null,__("Add your chapters entries in consecutive order, with at least 10-second intervals between each.","jetpack-videopress-pkg"))),React.createElement("p",{className:"learn-how-modal__heading"},__("Example","jetpack-videopress-pkg")),React.createElement("p",null,__("00:00 Intro","jetpack-videopress-pkg")),React.createElement("p",null,__("00:24 Mountains arise","jetpack-videopress-pkg")),React.createElement("p",null,__("02:38 Coming back home","jetpack-videopress-pkg")),React.createElement("p",null,__("03:04 Credits","jetpack-videopress-pkg")),React.createElement("div",{className:"learn-how-modal__buttons"},React.createElement(n.Button,{className:"learn-how-modal__button",onClick:r,variant:"primary"},__("Got it, thanks","jetpack-videopress-pkg")))):null}},520:(e,t,r)=>{"use strict";r.d(t,{l:()=>o,u:()=>a});var n=r(5609);const o=React.createElement(n.SVG,{width:"29",height:"21",viewBox:"0 0 29 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M2.79037 0.59375C4.0363 0.59375 5.13102 1.41658 5.47215 2.60947L8.8452 14.4044C8.8486 14.4164 8.85411 14.4273 8.86124 14.4368L12.8572 0.59375H15.0927H21.2721C25.6033 0.59375 28.5066 3.39892 28.5066 7.64565C28.5066 11.9411 25.5272 14.6196 21.0818 14.6196H18.1499H14.3719L13.6379 16.8813C12.9796 18.9095 11.0827 20.2839 8.94152 20.2839C6.80035 20.2839 4.90341 18.9095 4.24517 16.8813L0.137069 4.22276C-0.444671 2.43022 0.898038 0.59375 2.79037 0.59375ZM15.7374 10.4119H20.0156C21.8718 10.4119 22.9856 9.35018 22.9856 7.64565C22.9856 5.93137 21.8718 4.91839 20.0156 4.91839H17.5202L15.7374 10.4119Z"})),a=React.createElement(n.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M7 15.5H17V17H7V15.5Z"}),React.createElement(n.Path,{d:"M17 12.5H7V14H17V12.5Z"}),React.createElement(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7 3H5.3C4 3 3 4 3 5.3V18.7C3 20 4 21 5.3 21H18.7C20 21 21 20 21 18.7V5.3C21 4 20 3 18.7 3ZM19.5 18.7C19.5 19.1 19.1 19.5 18.7 19.5H5.3C4.9 19.5 4.5 19.1 4.5 18.7V5.3C4.5 4.9 4.9 4.5 5.3 4.5H18.7C19.1 4.5 19.5 4.9 19.5 5.3V18.7Z"}))},6681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(5609),o=r(9307),a=r(5736),s=r(5214);const __=a.__;function i(e){let{attributes:t,setAttributes:r}=e;const{autoplay:a,loop:i,muted:l,controls:c,playsinline:u}=t,d=(0,o.useCallback)((e=>t=>{r({[e]:t})}),[r]);return React.createElement(n.PanelBody,{title:__("Playback","jetpack-videopress-pkg")},React.createElement(n.ToggleControl,{label:__("Autoplay","jetpack-videopress-pkg"),onChange:d("autoplay"),checked:a,help:React.createElement(React.Fragment,null,React.createElement("span",{className:s.Z["help-message"]},__("Start playing the video as soon as the page loads.","jetpack-videopress-pkg")),a&&React.createElement("span",{className:s.Z["help-message"]},__("Note: Autoplaying videos may cause usability issues for some visitors.","jetpack-videopress-pkg")))}),React.createElement(n.ToggleControl,{label:__("Loop","jetpack-videopress-pkg"),onChange:d("loop"),checked:i,help:__("Restarts the video when it reaches the end.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Muted","jetpack-videopress-pkg"),onChange:d("muted"),checked:l}),React.createElement(n.ToggleControl,{label:__("Show Controls","jetpack-videopress-pkg"),onChange:d("controls"),checked:c,help:__("Display the video playback controls.","jetpack-videopress-pkg")}),React.createElement(n.ToggleControl,{label:__("Play Inline","jetpack-videopress-pkg"),onChange:d("playsinline"),checked:u,help:__("Play the video inline instead of full-screen on mobile devices.","jetpack-videopress-pkg")}),(0,o.createInterpolateElement)(__("Send us your <a>VideoPress feedback</a>","jetpack-videopress-pkg"),{a:React.createElement(n.ExternalLink,{href:"https://automattic.survey.fm/videopress-feedback"})}))}},723:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2175),o=r(5609),a=r(5736),s=r(5022),i=r(9975),l=r(9895);const __=a.__,c=["image"];function u(e){let{poster:t}=e;const r=__("No custom Poster image selected. You can upload or select an image from your media library to override the default video image.","jetpack-videopress-pkg"),n=__("You are currently overriding the default Poster image. Remove it if you want to use the default image generated by VideoPress.","jetpack-videopress-pkg");return React.createElement("div",{className:l.Z.current_media},t?n:r)}function d(e){let{attributes:t,setAttributes:r,clientId:d}=e;const{poster:p}=t,f=__("Select Poster Image","jetpack-videopress-pkg"),v=__("Replace Poster Image","jetpack-videopress-pkg");return React.createElement(o.Dropdown,{contentClassName:l.Z.dropdown_content,renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return React.createElement(o.ToolbarButton,{label:__("Poster image","jetpack-videopress-pkg"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:s.Z})},renderContent:e=>{let{onClose:t}=e;const l=`video-block__poster-image-description-${d}`;return React.createElement(React.Fragment,null,React.createElement(o.NavigableMenu,{className:"block-editor-media-replace-flow__media-upload-menu"},React.createElement(n.MediaUploadCheck,null,React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:e=>{(e=>{r({poster:e.url})})(e),t()},allowedTypes:c,render:e=>{let{open:t}=e;return React.createElement(o.MenuItem,{icon:s.Z,onClick:t,"aria-describedby":l},p?v:f,React.createElement("p",{id:l,hidden:!0},p?(0,a.sprintf)(/* translators: Placeholder is an image URL. */
__("The current poster image url is %s","jetpack-videopress-pkg"),p):__("There is no poster image currently selected","jetpack-videopress-pkg")))}})),!!p&&React.createElement(o.MenuItem,{onClick:()=>{r({poster:""}),t()},icon:i.Z},__("Remove and use default","jetpack-videopress-pkg"))),React.createElement(u,{poster:p}))}})}},8864:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5609),o=r(5736),a=r(4391);const __=o.__,_x=o._x;function s(e){let{attributes:t,setAttributes:r}=e;const{privacySetting:o,rating:s,allowDownload:i}=t;return React.createElement(n.PanelBody,{title:__("Privacy and rating","jetpack-videopress-pkg"),initialOpen:!1},React.createElement(n.SelectControl,{label:_x("Rating","The age rating for this video.","jetpack-videopress-pkg"),value:s??"",options:[{label:_x("G",'Video rating for "General Audiences".',"jetpack-videopress-pkg"),value:a.x4},{label:_x("PG-13",'Video rating for "Parental Guidance", unsuitable for children under 13.',"jetpack-videopress-pkg"),value:a.pf},{label:_x("R",'Video rating for "Restricted", not recommended for children under 17.',"jetpack-videopress-pkg"),value:a.Gr}],onChange:e=>{r({rating:e})}}),React.createElement(n.SelectControl,{label:__("Privacy","jetpack-videopress-pkg"),onChange:e=>{r({privacySetting:Number(e)})},value:String(o),options:[{value:String(a.Vz.indexOf(a.O1)),label:_x("Site Default","VideoPress privacy setting","jetpack-videopress-pkg")},{value:String(a.Vz.indexOf(a.$A)),label:_x("Public","VideoPress privacy setting","jetpack-videopress-pkg")},{value:String(a.Vz.indexOf(a.UJ)),label:_x("Private","VideoPress privacy setting","jetpack-videopress-pkg")}]}),React.createElement(n.ToggleControl,{label:__("Allow download","jetpack-videopress-pkg"),checked:i,onChange:e=>{r({allowDownload:e})}}))}},7898:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(5609),o=r(7798),a=r(9818),s=r(9307),i=r(5736),l=r(7659),c=r(515),u=r(2198),d=r(520),p=r(879);const __=i.__;function f(e){let{track:t,guid:r,onDelete:o}=e;const[a,i]=(0,s.useState)(!1),{kind:l,label:c,srcLang:d}=t;return React.createElement("div",{className:"video-tracks-control__track-item "+(a?"is-deleting":"")},React.createElement("div",{className:"video-tracks-control__track-item-label"},React.createElement("strong",null,c),React.createElement("span",{className:"video-tracks-control__track-item-kind"},l,null!=d&&d.length?` [${d}]`:"")),React.createElement(n.Button,{variant:"link",isDestructive:!0,onClick:()=>{i(!0),(0,u.qL)(t,r).then((()=>{i(!1),null==o||o(t)}))},disabled:a},__("Delete","jetpack-videopress-pkg")))}function v(e){let{tracks:t,guid:r,onTrackListUpdate:o}=e;if(null==t||!t.length)return React.createElement(n.MenuGroup,null,React.createElement("div",{className:"video-tracks-control__track_list__no-tracks"},__("Tracks can be subtitles, captions, chapters, or descriptions. They help make your content more accessible to a wider range of users.","jetpack-videopress-pkg")));const a=(0,s.useCallback)((e=>{const r=[...t].filter((t=>t!==e));o(r)}),[t]);return React.createElement(n.MenuGroup,{className:"video-tracks-control__track_list",label:__("Text tracks","jetpack-videopress-pkg")},t.map(((e,t)=>React.createElement(f,{key:`${e.kind}-${t}`,track:e,guid:r,onDelete:a}))))}function h(e){let{attributes:t,setAttributes:r}=e;const{tracks:i,guid:f}=t,[h,m]=(0,s.useState)(!1),g=(0,a.useDispatch)(o.store).invalidateResolution,k=(0,c.p)(f,t),b=(0,s.useCallback)((e=>{(0,u.nb)(e,f).then((t=>{const n={...e,src:t};delete n.tmpFile,r({tracks:[...i,n]}),m(!1),g("getEmbedPreview",[k])})),m(!0)}),[]),y=(0,s.useCallback)((e=>{r({tracks:e}),g("getEmbedPreview",[k])}),[i]);return React.createElement(n.ToolbarDropdownMenu,{icon:d.u,label:__("Text tracks","jetpack-videopress-pkg"),popoverProps:{variant:"toolbar"}},(()=>h?React.createElement(p.Z,{onCancel:()=>{m(!1)},onSave:b,tracks:i}):React.createElement(React.Fragment,null,React.createElement(v,{tracks:i,guid:f,onTrackListUpdate:y}),React.createElement(n.MenuGroup,{label:__("Add tracks","jetpack-videopress-pkg"),className:"video-tracks-control"},React.createElement(n.MenuItem,{icon:l.Z,onClick:()=>m(!0)},__("Upload track","jetpack-videopress-pkg"))))))}},879:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(2175),o=r(5609),a=r(9818),s=r(9307),i=r(5736);const __=i.__,l=".vtt,text/vtt",c=[{label:__("Subtitles","jetpack-videopress-pkg"),value:"subtitles"},{label:__("Captions","jetpack-videopress-pkg"),value:"captions"},{label:__("Descriptions","jetpack-videopress-pkg"),value:"descriptions"},{label:__("Chapters","jetpack-videopress-pkg"),value:"chapters"},{label:__("Metadata","jetpack-videopress-pkg"),value:"metadata"}];function u(e){var t;let{onCancel:r,onSave:u,tracks:d}=e;const[p,f]=(0,s.useState)(!1),[v,h]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),[k,b]=(0,s.useState)({kind:"subtitles",srcLang:"",label:"",tmpFile:null}),y=(0,s.useCallback)(((e,t)=>{b((r=>({...r,[e]:t})))}),[k]);(0,s.useEffect)((()=>{const e=d.some((e=>e.srcLang===k.srcLang&&e.kind===k.kind));h(e)}),[k,d]);const w=null===(t=k.tmpFile)||void 0===t?void 0:t.name,_=(0,a.useSelect)((e=>e(n.store).getSettings().mediaUpload),[]),E=(0,s.useCallback)((()=>{f(!0),u(k)}),[k]);if(!_)return null;const R=(0,i.sprintf)(/* translators: %s: The allowed file types to be uploaded as a video text track." */
__("Add a new text track to the video. Allowed formats: %s","jetpack-videopress-pkg"),l);return React.createElement(o.MenuGroup,{className:"video-tracks-control__track-form",label:__("Upload track","jetpack-videopress-pkg")},React.createElement("div",{className:"video-tracks-control__track-form-container"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file"},React.createElement("div",{className:"video-tracks-control__track-form-upload-file-label"},React.createElement("span",null,__("File","jetpack-videopress-pkg"),":"),w&&React.createElement("strong",null,w),React.createElement(n.MediaUploadCheck,null,React.createElement(o.FormFileUpload,{onChange:e=>{const t=e.target.files;null!=t&&t.length&&y("tmpFile",t[0])},accept:l,render:e=>{let{openFileDialog:t}=e;return React.createElement(o.Button,{variant:"link",onClick:()=>{t()}},__("Select track","jetpack-videopress-pkg"))}}))),React.createElement("div",{className:"video-tracks-control__track-form-upload-file-help"},R)),React.createElement("div",{className:"video-tracks-control__track-form-label-language"},React.createElement(o.TextControl,{onChange:e=>y("label",e),label:__("Label","jetpack-videopress-pkg"),value:k.label,help:__("Title of track","jetpack-videopress-pkg"),disabled:p}),React.createElement(o.TextControl,{className:"video-tracks-control__track-form-language-tag",label:__("Source language","jetpack-videopress-pkg"),value:k.srcLang,onChange:e=>y("srcLang",e),help:__("Language (en, fr, etc.)","jetpack-videopress-pkg"),disabled:p})),React.createElement(o.SelectControl,{options:c,value:k.kind,label:/* translators: %s: The kind of video text track e.g: "Subtitles, Captions" */
__("Kind","jetpack-videopress-pkg"),onChange:e=>y("kind",e),disabled:p}),React.createElement("div",{className:"video-tracks-control__track-form-buttons-container "+(v?" track-exists":"")},v&&React.createElement(o.ToggleControl,{className:"video-tracks-control__track-form-toggle",label:__("Track exists. Replace?","jetpack-videopress-pkg"),checked:m,onChange:g}),React.createElement(o.Button,{isBusy:p,variant:"secondary",disabled:!k.tmpFile||p||v&&!m,onClick:E},__("Save","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"link",onClick:r},__("Cancel","jetpack-videopress-pkg")))))}},3578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(2175),o=r(5609),a=r(9307),s=r(5736),i=r(951),l=r.n(i),c=r(6270);const __=s.__,u=[];if(window.videopressAjax){const e=new Blob([`var videopressAjax = ${JSON.stringify(window.videopressAjax)};`],{type:"text/javascript"});u.push(URL.createObjectURL(e),window.videopressAjax.bridgeUrl)}function d(e){let{html:t,isSelected:r,attributes:s,setAttributes:i,scripts:l=[],preview:c,isRequestingEmbedPreview:d}=e;const p=(0,a.useRef)(),f=(0,a.useRef)(),{maxWidth:v,caption:h,videoRatio:m}=s,[g,k]=(0,a.useState)();function b(){k(f.current.offsetWidth*m/100+12)}const[y,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{null!=f&&f.current&&(c?setTimeout((()=>{k("auto")}),250):m&&(b(),setTimeout((()=>{b()}),0),w(!1)))}),[f,m,c]),(0,a.useEffect)((()=>{t||w(!1)}),[t]);const _=(0,a.useCallback)((e=>{let{detail:t}=e;w("loaded"===(null==t?void 0:t.state))}),[]);(0,a.useEffect)((()=>{if(window)return window.addEventListener("onVideoPressLoadingState",_),()=>{var e;return null===(e=window)||void 0===e?void 0:e.removeEventListener("onVideoPressLoadingState",_)}}),[_,window,t]),(0,a.useEffect)((()=>{d&&b()}),[y,d]);const E=(0,a.useCallback)(((e,t,r)=>{let n=getComputedStyle(r).width;if(null!==r.parentElement){n===getComputedStyle(r.parentElement).width&&(n="100%")}k("auto"),i({maxWidth:n})}),[i]),R={};return"auto"!==g&&(R.height=g||200,R.paddingBottom=g?12:0),React.createElement("figure",{ref:p,className:"jetpack-videopress-player"},React.createElement(o.ResizableBox,{enable:{top:!1,bottom:!1,left:!1,right:!0},maxWidth:"100%",size:{width:v},style:{marginRight:"auto"},onResizeStop:E,onResizeStart:()=>k("auto")},!r&&React.createElement("div",{className:"jetpack-videopress-player__overlay"}),React.createElement("div",{className:"jetpack-videopress-player__wrapper",ref:f,style:R},React.createElement(React.Fragment,null,!d&&React.createElement(o.SandBox,{html:t,scripts:[...u,...l]}),!y&&React.createElement("div",{className:"jetpack-videopress-player__loading"},__("Loading…","jetpack-videopress-pkg"))))),(!n.RichText.isEmpty(h)||r)&&React.createElement(n.RichText,{tagName:"figcaption",placeholder:__("Write caption…","jetpack-videopress-pkg"),value:h,onChange:e=>i({caption:e}),inlineToolbar:!0}))}window.debugBridgeInstance=l()("jetpack:vp-block:bridge"),u.push(c.Z)},4744:(e,t,r)=>{"use strict";r.d(t,{Z:()=>k});var n=r(6895),o=r(6989),a=r.n(o),s=r(2175),i=r(5609),l=r(9307),c=r(5736),u=r(9196),d=r(1207),p=r(1618),f=r(4470),v=r(520),h=r(125),m=r(2374);const __=c.__,g=["video"],k=(0,i.withNotices)((e=>{let{attributes:t,setAttributes:r,noticeUI:o,noticeOperations:c,handleDoneUpload:k}=e;const[b,y]=(0,l.useState)(!1),[w,_]=(0,l.useState)(!1),[E,R]=(0,l.useState)(!1),[C,P]=(0,l.useState)(!1),S=(0,u.useRef)(null),[j,x]=(0,l.useState)(null),[U,O]=(0,l.useState)([]),A=(0,l.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];O(t)}),[]),[T,F]=(0,l.useState)(null),N=(0,l.useCallback)((function(e){if(null!=e&&e.originalResponse)try{var t,r;const n=null==e||null===(t=e.originalResponse)||void 0===t||null===(r=t.getBody)||void 0===r?void 0:r.call(t),o=JSON.parse(n);return void F(o)}catch{}F(e)}),[]),B=e=>{r(e),_(!0)},[Z,D,L]=(0,d.hr)({onError:N,onProgress:A,onSuccess:B}),I=e=>{try{const t=new URL(e);if((e=>"https:"===e.protocol&&["videopress.com","video.wordpress.com"].includes(e.host))(t)){const e=t.pathname.match(/^\/v\/([a-zA-Z0-9]+)$/);return 2===e.length&&e[1]}}catch(e){return!1}};function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=I(e);n?(r({guid:n,src:e,id:t}),k()):F({data:{message:__("Invalid VideoPress URL","jetpack-videopress-pkg")}})}const H=e=>{T&&N(null),x(e),A(0,e.size),R(!0),S.current=Z(e)},M=()=>{const e=null==S?void 0:S.current;if(e){e[b?"start":"abort"](),y(!b)}};if("owner_not_connected"===(null==L?void 0:L.code)){var z,q;const e=(0,l.createInterpolateElement)(__("<connectLink>Connect</connectLink> your site to use the <moreAboutVideoPressLink>VideoPress</moreAboutVideoPressLink> video block.","jetpack-videopress-pkg"),{connectLink:React.createElement("a",{href:null==L||null===(z=L.data)||void 0===z?void 0:z.connect_url,rel:"noreferrer noopener"}),moreAboutVideoPressLink:React.createElement(i.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return React.createElement(p.l,{errorMessage:e},React.createElement(i.Button,{key:"videopress-connect-user",variant:"primary",href:null==L||null===(q=L.data)||void 0===q?void 0:q.connect_url},__("Connect","jetpack-videopress-pkg")))}if(T){const e=()=>{H(j)},t=()=>{x(null),A([]),N(null),R(!1)};return React.createElement(h.Z,{onRetry:e,onCancel:t,errorData:T})}if(E){const e=U[0]/U[1]*100;return React.createElement(m.Z,{attributes:t,setAttributes:r,file:j,progress:e,paused:b,completed:w,onPauseOrResume:M,onDone:k,supportPauseOrResume:Boolean(null==S?void 0:S.current)})}return C?React.createElement(p.l,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(i.Spinner,null),React.createElement("span",null,__("Loading…","jetpack-videopress-pkg")))):React.createElement(s.MediaPlaceholder,{handleUpload:!1,className:"is-videopress-placeholder",icon:React.createElement(s.BlockIcon,{icon:v.l}),labels:{title:f.TN,instructions:f.WL},onSelect:function(e){var t;if((e=null!==(t=e)&&void 0!==t&&t[0]?e[0]:e)instanceof File)H(e);else if(e.videopress_guid){var r;V(`https://videopress.com/v/${e.videopress_guid[0]}`,null===(r=e)||void 0===r?void 0:r.id)}else{if(e.id){const t=`videopress/v1/upload/${e.id}`;return P(!0),void a()({path:t,method:"GET"}).then((t=>{if(P(!1),"new"===t.status||"resume"===t.status)x(e),A(t.file_size,t.file_size),R(!0),r=e.id,(0,d.R2)(r).then((e=>{B(e)})).catch((e=>{F(e)}));else if("uploaded"===t.status){V(`https://videopress.com/v/${t.uploaded_video_guid}`)}else F({data:{message:t.message?t.message:__("Error selecting video. Please try again.","jetpack-videopress-pkg")}});var r})).catch((e=>{P(!1),F({data:{message:e.message}})}))}F({data:{message:__("Please select a video from Library or upload a new one","jetpack-videopress-pkg")}})}},onSelectURL:V,accept:"video/*",allowedTypes:g,value:t,notices:o,onError:function(e){c.removeAllNotices(),c.createErrorNotice(e)}})}))},7215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(2175),o=r(5609),a=r(9307),s=r(1975),i=r(5736),l=r(1074),c=r(5235),u=r.n(c),d=r(2346),p=r(7535);const __=i.__,f=["image"],v=e=>{let{videoPosterImageUrl:t}=e;return React.createElement("div",{className:"uploading-editor__poster-image"},t?React.createElement("img",{src:t,alt:"Poster"}):React.createElement("span",null,"No Poster Selected"))},h=e=>{let{file:t,videoPosterImageData:r,onVideoFrameSelected:n}=e;const o=Boolean(null==r?void 0:r.url),s=(0,a.useRef)((null==t?void 0:t.url)??URL.createObjectURL(t));return React.createElement("div",{className:u()("uploading-editor__poster-container")},React.createElement(p.Z,{src:null==s?void 0:s.current,onVideoFrameSelected:n,className:u()({"uploading-editor__hide":o})}),o&&React.createElement(React.Fragment,null,React.createElement(v,{videoPosterImageUrl:null==r?void 0:r.url}),React.createElement(l.Z,{className:"uploading-editor__play-icon",icon:d.Z})))},m=e=>{let{hasPoster:t,onSelectPoster:r,onRemovePoster:s}=e;return t?React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r,allowedTypes:f,render:e=>{let{open:t}=e;return React.createElement("div",{className:"uploading-editor__poster-buttons"},React.createElement(o.Button,{onClick:s,variant:"secondary",isDestructive:!0},__("Remove Poster Image","jetpack-videopress-pkg")),React.createElement(o.Button,{variant:"secondary",onClick:t},__("Select Poster Image","jetpack-videopress-pkg")))}}):React.createElement("span",{className:"uploading-editor__scrubber-help"},(0,a.createInterpolateElement)(__("This is how the video will look. Use the slider to choose a poster or <a>select a custom one</a>.","jetpack-videopress-pkg"),{a:React.createElement(n.MediaUpload,{title:__("Select Poster Image","jetpack-videopress-pkg"),onSelect:r,allowedTypes:f,render:e=>{let{open:t}=e;return React.createElement("a",{className:"uploading-editor__upload-link",onClick:t,onKeyDown:t,role:"button",tabIndex:0},__("select a custom one","jetpack-videopress-pkg"))}})}))},g=e=>{const{file:t,onSelectPoster:r,onRemovePoster:n,videoPosterImageData:i,onChangeTitle:l,onVideoFrameSelected:c}=e,u=(0,s.escapeHTML)(null==t?void 0:t.name).replace(/\.[^/.]+$/,"");const[d,p]=(0,a.useState)(u);return React.createElement("div",{className:"uploading-editor"},React.createElement(o.TextControl,{label:__("Video title","jetpack-videopress-pkg"),className:"uploading-editor__title",onChange:e=>{l(e),p(e)},value:d}),React.createElement(o.BaseControl,{label:__("Video poster (optional)","jetpack-videopress-pkg")},React.createElement(h,{file:t,videoPosterImageData:i,onVideoFrameSelected:c}),React.createElement(m,{hasPoster:Boolean(i),onSelectPoster:r,onRemovePoster:n})))}},125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5609),o=r(5736),a=r(1618);const __=o.__,s=e=>{let{errorData:t,onRetry:r,onCancel:o}=e;const s=(e=>{var t;if(!e)return"";let r=(null==e||null===(t=e.data)||void 0===t?void 0:t.message)||__("Failed to upload your video. Please try again.","jetpack-videopress-pkg");return"Invalid Mime"===r&&(r=React.createElement(React.Fragment,null,__("The format of the video you uploaded is not supported.","jetpack-videopress-pkg")," ",React.createElement(n.ExternalLink,{href:"https://wordpress.com/support/videopress/recommended-video-settings/",target:"_blank",rel:"noreferrer"},__("Check the recommended video settings.","jetpack-videopress-pkg")))),r})(t);return React.createElement(a.l,{errorMessage:s,onNoticeRemove:o},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(n.Button,{variant:"primary",onClick:r},__("Try again","jetpack-videopress-pkg")),React.createElement(n.Button,{variant:"secondary",onClick:o},__("Cancel","jetpack-videopress-pkg"))))}},2374:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var n=r(6989),o=r.n(n),a=r(5609),s=r(9307),i=r(5736),l=r(861),c=r.n(l),u=r(5134),d=r(6650),p=r(3897),f=r(1618),v=r(7215);const __=i.__,h=e=>{let{setAttributes:t,attributes:r,onDone:n}=e;const[a,i]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[f,v]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),g=null==r?void 0:r.guid,k=(0,p.Z)(g),b=(0,d.Z)(g),y=(0,u.Z)(null==r?void 0:r.id),w=e=>{let{data:r}=e;null!=r&&r.generating?setTimeout((()=>{new Promise(((e,t)=>{b(g).then((t=>e(t))).catch((()=>{o()({path:`/videos/${g}/poster`,apiNamespace:"rest/v1.1",global:!0,method:"GET"}).then((t=>e(t))).catch((e=>t(e)))}))})).then((e=>w(e)))}),2e3):null!=r&&r.poster&&t({poster:null==r?void 0:r.poster})},_=e=>new Promise(((t,r)=>{k(e).then((e=>{w(e),t()})).catch((()=>{o()({path:`/videos/${g}/poster`,apiNamespace:"rest/v1.1",method:"POST",global:!0,data:e}).then((()=>{t()})).catch((e=>{r(e)}))}))}));return[e=>{c(e),v(null)},e=>{v(e)},()=>{v(null)},m,()=>{i(!0);const e=[];h&&e.push(y({title:h})),f?e.push(_({poster_attachment_id:null==f?void 0:f.id})):null!=l&&e.push(_({at_time:l,is_millisec:!0})),Promise.allSettled(e).then((()=>{i(!1),n()}))},f,a]},m=e=>{let{attributes:t,setAttributes:r,progress:n,file:o,paused:s,completed:l,onPauseOrResume:u,onDone:d,supportPauseOrResume:p}=e;const[m,g,k,b,y,w,_]=h({setAttributes:r,attributes:t,onDone:d}),E=Math.round(n),R={width:`${E}%`},C=__("Resume","jetpack-videopress-pkg"),P=__("Pause","jetpack-videopress-pkg"),S=(null==o?void 0:o.filesizeHumanReadable)??c()(null==o?void 0:o.size);return React.createElement(f.l,{disableInstructions:!0},React.createElement(v.Z,{file:o,onSelectPoster:g,onRemovePoster:k,onChangeTitle:b,onVideoFrameSelected:m,videoPosterImageData:w}),React.createElement("div",{className:"videopress-uploader-progress"},l?React.createElement(React.Fragment,null,React.createElement("span",null,__("Upload Complete!","jetpack-videopress-pkg")," 🎉"),React.createElement(a.Button,{variant:"primary",onClick:y,disabled:_,isBusy:_},__("Done","jetpack-videopress-pkg"))):React.createElement(React.Fragment,null,E<100?React.createElement(React.Fragment,null,React.createElement("div",{className:"videopress-uploader-progress__file-info"},React.createElement("div",{className:"videopress-uploader-progress__progress"},React.createElement("div",{className:"videopress-uploader-progress__progress-loaded",style:R})),React.createElement("div",{className:"videopress-upload__percent-complete"},(0,i.sprintf)(/* translators: Placeholder is an upload progress percenatage number, from 0-100. */
__("Uploading (%1$s%%)","jetpack-videopress-pkg"),E)),React.createElement("div",{className:"videopress-uploader-progress__file-size"},S)),p&&React.createElement("div",{className:"videopress-uploader-progress__actions"},E<100&&React.createElement(a.Button,{variant:"link",onClick:u},s?C:P))):React.createElement(React.Fragment,null,React.createElement("span",null,__("Finishing up …","jetpack-videopress-pkg")," 🎬"),React.createElement(a.Spinner,null)))))}},1618:(e,t,r)=>{"use strict";r.d(t,{Z:()=>U,l:()=>x});var n=r(2674),o=r.n(n),a=r(2175),s=r(5609),i=r(7798),l=r(9818),c=r(9307),u=r(5736),d=r(5235),p=r.n(d),f=r(951),v=r.n(f),h=r(6998),m=r(515),g=r(8382),k=r(7159),b=r(4706),y=r(520),w=r(6681),_=r(723),E=r(8864),R=r(7898),C=r(3578),P=r(4744),S=r(4470);const __=u.__,j=v()("videopress:video:edit"),x=(0,s.withNotices)((function(e){let{children:t,errorMessage:r,noticeUI:n,noticeOperations:o,instructions:i=S.WL,disableInstructions:l}=e;return(0,c.useEffect)((()=>{r&&(o.removeAllNotices(),o.createErrorNotice(r))}),[r,o]),React.createElement(s.Placeholder,{icon:React.createElement(a.BlockIcon,{icon:y.l}),label:S.TN,instructions:l?null:i,notices:n},t)}));function U(e){var t;let{attributes:r,setAttributes:n,isSelected:u,clientId:d}=e;const{autoplay:f,loop:v,muted:y,controls:S,playsinline:U,preload:O,useAverageColor:A,seekbarColor:T,seekbarLoadingColor:F,seekbarPlayedColor:N,guid:B,id:Z,cacheHtml:D,poster:L,align:I,videoRatio:V,tracks:H,isPrivate:M,src:z,caption:q,isExample:$}=r,G=(0,m.p)(B,{autoplay:f,controls:S,loop:v,muted:y,playsinline:U,preload:O,seekbarColor:T,seekbarLoadingColor:F,seekbarPlayedColor:N,useAverageColor:A,poster:L}),[W,K]=(0,c.useState)(null);(0,c.useEffect)((()=>{if(!M)return K(null);(0,h.Z)("playback",{id:Z,guid:B}).then((e=>{K(null==e?void 0:e.token)}))}),[M]);const[J,X]=(0,c.useState)(!0),Y=null==H||null===(t=H.filter((e=>"chapters"===e.kind)))||void 0===t?void 0:t[0];(0,c.useEffect)((()=>{if(!Y||!Y.src)return;if(M&&!W)return;const e=W?`?${new URLSearchParams({metadata_token:W}).toString()}`:"",t=`https://videos.files.wordpress.com/${B}/${Y.src}${e}`;try{fetch(t).then((function(e){e.text().then((function(e){if(!e)return;const t=/videopress-chapters-auto-generated/.test(e);t&&j("Chapter %o auto-generated detected",Y.src),X(t)}))})).catch((function(e){console.error(e)}))}catch(e){throw new Error((null==e?void 0:e.message)??e)}}),[Y,B,W,M]);const{videoData:Q,isRequestingVideoData:ee}=(0,g.v)(r,n,{isAutoGeneratedChapter:J}),{filename:te}=Q,{preview:re,isRequestingEmbedPreview:ne}=(0,l.useSelect)((e=>({preview:e(i.store).getEmbedPreview(G)||!1,isRequestingEmbedPreview:e(i.store).isRequestingEmbedPreview(G)||!1})),[G]),{html:oe,scripts:ae,width:se,height:ie}=re||{html:null,scripts:[]};(0,c.useEffect)((()=>{oe&&oe!==D&&n({cacheHtml:oe})}),[oe,D,n]);const le=oe||D;(0,c.useEffect)((()=>{if(!se||!ie)return;const e=ie/se*100;e!==V&&n({videoRatio:e})}),[V,se,ie,n]);const ce=(0,l.useDispatch)(i.store).invalidateResolution,ue=(0,c.useCallback)((()=>{ce("getEmbedPreview",[G])}),[G,ce]),[de,pe]=(0,c.useState)(0),fe=(0,c.useRef)();function ve(){null!=fe&&fe.current&&(fe.current=clearInterval(fe.current))}(0,c.useEffect)((()=>de>=10?ve():G?ne?ve():re?(pe(0),ve()):null!=fe&&fe.current?void 0:(fe.current=setTimeout((()=>{re?pe(0):(pe((e=>e+1)),ue())}),2e3),ve):ve()),[de,fe,ue,re,G,ne]);const{className:he,...me}=(0,a.useBlockProps)({className:"wp-block-jetpack-videopress"});if($)return React.createElement("img",{style:{width:"100%",height:"auto",backgroundSize:"cover"},className:"wp-block-jetpack-videopress__example",src:z,alt:q});const[ge,ke]=(0,c.useState)(!B);if(ge){const e=()=>{ke(!1)};return React.createElement("div",o()({},me,{className:he}),React.createElement(P.Z,{setAttributes:n,attributes:r,handleDoneUpload:e}))}return(ne||!re)&&de>0&&de<10?React.createElement("div",o()({},me,{className:he}),React.createElement(x,{disableInstructions:!0},React.createElement("div",{className:"loading-wrapper"},React.createElement(s.Spinner,null),__("Generating preview…","jetpack-videopress-pkg"),React.createElement("strong",null," ",de)))):de>=10&&!re?React.createElement("div",o()({},me,{className:he}),React.createElement(x,{errorMessage:__("Impossible to get a video preview after ten attempts.","jetpack-videopress-pkg"),onNoticeRemove:ce},React.createElement("div",{className:"videopress-uploader__error-actions"},React.createElement(s.Button,{variant:"primary",onClick:ce},__("Try again","jetpack-videopress-pkg")),React.createElement(s.Button,{variant:"secondary",onClick:()=>{n({src:void 0,id:void 0,guid:void 0})}},__("Cancel","jetpack-videopress-pkg"))))):React.createElement("div",o()({},me,{className:p()(he,{[`align${I}`]:I,"is-updating-preview":!oe})}),React.createElement(a.BlockControls,{group:"block"},React.createElement(_.Z,{attributes:r,setAttributes:n,clientId:d}),React.createElement(R.Z,{attributes:r,setAttributes:n})),React.createElement(a.InspectorControls,null,React.createElement(b.Z,{filename:te,chapter:Y,isAutoGeneratedChapter:J,attributes:r,setAttributes:n,isRequestingVideoData:ee}),React.createElement(w.Z,{attributes:r,setAttributes:n,isRequestingVideoData:ee}),React.createElement(E.Z,{attributes:r,setAttributes:n,isRequestingVideoData:ee}),React.createElement(k.Z,{attributes:r,setAttributes:n,isRequestingVideoData:ee})),React.createElement(C.Z,{html:le,isRequestingEmbedPreview:ne,scripts:ae,attributes:r,setAttributes:n,isSelected:u,preview:re}))}},4470:(e,t,r)=>{"use strict";r.d(t,{TN:()=>u,WL:()=>d});var n=r(4981),o=r(4205),a=r(520),s=r(1618),i=r(5126),l=r(5147);const{name:c,title:u,description:d}=o;(0,n.registerBlockType)(c,{edit:s.Z,save:i.Z,icon:a.l,example:{attributes:{src:l,isExample:!0}}})},5126:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(2674),o=r.n(n),a=r(2175),s=r(5235),i=r.n(s),l=r(515);function c(e){let{attributes:t}=e;const{align:r,autoplay:n,caption:s,loop:c,muted:u,controls:d,playsinline:p,preload:f,useAverageColor:v,seekbarColor:h,seekbarLoadingColor:m,seekbarPlayedColor:g,guid:k,maxWidth:b,poster:y}=t,w=a.useBlockProps.save({className:i()("wp-block-jetpack-videopress","jetpack-videopress-player",{[`align${r}`]:r})}),_=(0,l.p)(k,{autoplay:n,controls:d,loop:c,muted:u,playsinline:p,preload:f,seekbarColor:h,seekbarLoadingColor:m,seekbarPlayedColor:g,useAverageColor:v,poster:y}),E={};return b&&b.length>0&&"100%"!==b&&(E.maxWidth=b,E.margin="auto"),React.createElement("figure",o()({},w,{style:E}),_&&React.createElement("div",{className:"jetpack-videopress-player__wrapper"},`\n${_}\n`),!a.RichText.isEmpty(s)&&React.createElement(a.RichText.Content,{tagName:"figcaption",value:s}))}},6270:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=URL.createObjectURL(new Blob(["\n\tif ( ! window?.debug ) {\n\t\twindow.debug = window.parent?.debugBridgeInstance ?? ( () => {} );\n\t}\n\n\tfunction initWPBlockBridge() {\n\t\tdebug( '🌉 🛠 building the bridge' );\n\n\t\tconst videoPressIFrame = document.querySelector('iframe');\n\t\tif ( ! videoPressIFrame?.contentWindow ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst videoPressWindow = videoPressIFrame.contentWindow;\n\n\t\t// Allowed events emitted by the videopress API.\n\t\tconst videoPressEventsMap = {\n\t\t\t'videopress_playing': {\n\t\t\t\tname: 'onVideoPressPlaying',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_pause': {\n\t\t\t\tname: 'onVideoPressPause',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_seeking': {\n\t\t\t\tname: 'onVideoPressSeeking',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_resize': {\n\t\t\t\tname: 'onVideoPressResize',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_volumechange': {\n\t\t\t\tname: 'onVideoPressVolumeChange',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_ended': {\n\t\t\t\tname: 'onVideoPressEnded',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_timeupdate': {\n\t\t\t\tname: 'onVideoPressTimeUpdate',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_durationchange': {\n\t\t\t\tname: 'onVideoPressDurationChange',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_progress': {\n\t\t\t\tname: 'onVideoPressProgress',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'videopress_loading_state': {\n\t\t\t\tname: 'onVideoPressLoadingState',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\tvideopress_toggle_fullscreen: {\n\t\t\t\tname: 'onVideoPressToggleFullscreen',\n\t\t\t\ttype: 'event',\n\t\t\t},\n\t\t\t'vpBlockActionPlay': {\n\t\t\t\tname: 'vpBlockActionPlay',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_play',\n\t\t\t},\n\t\t\t'vpBlockActionPause': {\n\t\t\t\tname: 'vpBlockActionPause',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_pause',\n\t\t\t},\n\t\t\t'vpBlockActionSetCurrentTime': {\n\t\t\t\tname: 'vpBlockActionPause',\n\t\t\t\ttype: 'action',\n\t\t\t\tvideoPressAction: 'videopress_action_set_currenttime',\n\t\t\t},\n\t\t};\n\n\t\tconst allowedVideoPressEvents = Object.keys( videoPressEventsMap );\n\n\t\twindow.addEventListener( 'message', ( ev ) => {\n\t\t\tconst { data } = ev;\n\t\t\tconst eventName = data.event;\n\t\t\tif ( ! allowedVideoPressEvents.includes( eventName ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Rename event with the 'onVideoPress' prefix.\n\t\t\tconst vpEvent = videoPressEventsMap[ eventName ];\n\t\t\tconst { name: vpEventName, type: vpEventType, videoPressAction } = vpEvent;\n\n\t\t\t// Dispatch event to top when it's an event\n\t\t\tif ( vpEventType === 'event' ) {\n\t\t\t\t// It preferrs to use the guid instead of the id.\n\t\t\t\tconst guid = data.id;\n\t\t\t\tconst originalEventName = data.event;\n\t\n\t\t\t\t// clean event data object\n\t\t\t\tdelete data.event;\n\t\t\t\tdelete data.id;\n\t\n\t\t\t\t// Emite custom event with the event data.\n\t\t\t\tconst videoPressBlockEvent = new CustomEvent( vpEventName, {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\t...data,\n\t\t\t\t\t\toriginalEventName,\n\t\t\t\t\t\tguid,\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t\tdebug( '🌉 %o [%s] ➜ %o', originalEventName, guid, vpEventName );\n\n\t\t\t\t// Dispatch custom event in iFrame window...\n\t\t\t\twindow.dispatchEvent( videoPressBlockEvent );\n\n\t\t\t\t// ...and also dipatch to the parent window,\n\t\t\t\t// in case it exists.\n\t\t\t\tif ( window?.parent && window.parent !== window ) {\n\t\t\t\t\twindow.parent.dispatchEvent( videoPressBlockEvent );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( vpEventType === 'action' ) {\n\t\t\t\t// Overwrite event from -> to\n\t\t\t\tdata.event = videoPressAction;\n\n\t\t\t\tdebug( '🌉 recieve %o -> dispatching %o [%o]', eventName, videoPressAction, data );\n\t\t\t\tvideoPressWindow.postMessage( data, '*' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tinitWPBlockBridge();\n"],{type:"text/javascript"}))},8545:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(6895),o=r(2175),a=r(4981),s=r(5609),i=r(4333),l=r(9818),c=r(9307),u=r(5736),d=r(515);const __=u.__,p=(0,i.createHigherOrderComponent)((e=>t=>{const{clientId:r}=t,{attributes:i,setAttributes:u}=t,{url:p,keepUsingOEmbedVariation:f}=i,{replaceBlock:v}=(0,l.useDispatch)(o.store),h=(0,d.Z)(p);if((0,c.useEffect)((()=>{!1===f&&v(r,(0,a.createBlock)("videopress/video",{...i,guid:h}))}),[f,h]),"core/embed"!==t.name)return React.createElement(e,t);if(null==i||!i.providerNameSlug||"videopress"!==i.providerNameSlug)return React.createElement(e,t);if(!h)return React.createElement(e,t);if(!0===f)return React.createElement(e,t);const m=(0,c.createInterpolateElement)(__("Convert this embed to a VideoPress video block to unlock advanced video player options. <moreAboutVideoPressLink>More about the VideoPress block</moreAboutVideoPressLink>","jetpack-videopress-pkg"),{moreAboutVideoPressLink:React.createElement(s.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return React.createElement("div",null,React.createElement(o.Warning,{className:"extended-block-warning",actions:[React.createElement(s.Button,{key:"convert",variant:"primary",onClick:()=>u({keepUsingOEmbedVariation:!1})},__("Use VideoPress Video block","jetpack-videopress-pkg")),React.createElement(s.Button,{key:"convert",variant:"tertiary",onClick:()=>u({keepUsingOEmbedVariation:!0})},__("Keep using the Embed block","jetpack-videopress-pkg"))]},m),React.createElement("div",{className:"wp-extended-block-wrapper is-disabled"},React.createElement("div",{className:"extended-block-player__overlay"}),React.createElement(e,t)))}),"withCoreEmbedVideoPressBlock")},8921:(e,t,r)=>{"use strict";var n=r(4981),o=r(7701),a=r.n(o),s=r(2694),i=r(8545);(0,s.addFilter)("blocks.registerBlockType","videopress/core-embed/handle-representation",((e,t)=>"core/embed"!==t?e:{...e,attributes:{...e.attributes,keepUsingOEmbedVariation:{type:"boolean"}},edit:(0,i.Z)(e.edit)})),a()((function(){setTimeout((()=>{(0,n.unregisterBlockVariation)("core/embed","videopress")}),0)}))},3998:(e,t,r)=>{"use strict";var n=r(6895),o=r(2175),a=r(4981),s=r(5609),i=r(4333),l=r(9818),c=r(9307),u=r(2694),d=r(5736);const __=d.__;(0,u.addFilter)("blocks.registerBlockType","videopress/core-video/handle-block-conversion",((e,t)=>"core/video"!==t?e:{...e,attributes:{...e.attributes,guid:{type:"string"},poster:{type:"string"},videoPressTracks:{type:"array",items:{type:"object"},default:[]},keepUsingCoreVideoVideoPressBlock:{type:"boolean"}}}));const p=(0,i.createHigherOrderComponent)((e=>t=>{const{block:r,isValid:i}=t,{name:u,attributes:d,clientId:p,__unstableBlockSource:f}=r,{guid:v,videoPressTracks:h,poster:m}=d,{replaceBlock:g}=(0,l.useDispatch)(o.store),[k,b]=(0,c.useState)(),y=!("core/video"!==u||i||!(v&&h));if((0,c.useEffect)((()=>{!1===k&&y&&g(p,(0,a.createBlock)("videopress/video",function(e,t){const r=e||t;return null!=r&&r.videoPressTracks&&(r.tracks=r.videoPressTracks||[],delete r.videoPressTracks),null!=r&&r.isVideoPressExample&&(r.isExample=r.isVideoPressExample||[],delete r.isVideoPressExample),r}(null==f?void 0:f.attrs,d)))}),[p,y,k,d,f]),!y)return React.createElement(e,t);const w=(0,c.createInterpolateElement)(__("This block contains unexpected or invalid content, and it seems to be a <moreAboutVideoPressLink>VideoPress video block</moreAboutVideoPressLink> instance.","jetpack-videopress-pkg"),{moreAboutVideoPressLink:React.createElement(s.ExternalLink,{href:(0,n.Z)("jetpack-videopress")})});return k?React.createElement(e,t):React.createElement("div",null,React.createElement(o.Warning,{className:"extended-block-warning",actions:[React.createElement(s.Button,{key:"convert",variant:"primary",onClick:()=>b(!1)},__("Attempt VideoPress Block Recovery","jetpack-videopress-pkg")),React.createElement(s.Button,{key:"ignore",variant:"tertiary",onClick:()=>b(!0)},__("Skip","jetpack-videopress-pkg"))]},w,m&&React.createElement("p",{className:"wp-extended-block-wrapper is-disabled"},React.createElement("p",{className:"extended-block-player__overlay"}),React.createElement("span",{class:"videoplayer-play","aria-hidden":"true"}),React.createElement("img",{src:m,alt:__("VideoPress Video Block","jetpack-videopress-pkg")}))))}),"handleJetpackCoreVideoDeprecation");(0,u.addFilter)("editor.BlockListBlock","videopress/jetpack-videopress-deprecation",p)},9437:(e,t,r)=>{"use strict";r(8921),r(3998)},2871:(e,t,r)=>{"use strict";var n,o,a=r(951);const s=r.n(a)()("videopress:extensions"),i=(null===(n=window)||void 0===n||null===(o=n.videoPressEditorState)||void 0===o?void 0:o.extensions)||[];s("Extensions: %o",i)},8382:(e,t,r)=>{"use strict";r.d(t,{v:()=>_});var n=r(6989),o=r.n(n),a=r(4333),s=r(7798),i=r(9818),l=r(2238),c=r(9307),u=r(5736),d=r(951),p=r.n(d),f=r(515),v=r(2198),h=r(1339),m=r(5197),g=r(5178),k=r(5452);const __=u.__,b=p()("videopress:video:use-sync-media");const y=["title","description","privacy_setting","rating","allow_download","is_private"],w={privacy_setting:"privacySetting",allow_download:"allowDownload",is_private:"isPrivate"};function _(e,t,r){const{id:n,guid:u}=e,{videoData:d,isRequestingVideoData:p}=(0,k.Z)({id:n,guid:u}),_=(0,i.useSelect)((e=>e(l.store).isSavingPost()),[]),E=(0,a.usePrevious)(_),R=(0,i.useDispatch)(s.store).invalidateResolution,[C,P]=(0,c.useState)({}),S=(0,c.useCallback)((e=>{P((t=>({...t,...e})))}),[]);(0,c.useEffect)((()=>{if(p)return;if(!d||0===Object.keys(d).length)return;const r={},n=y.reduce(((t,n)=>{if(void 0===d[n])return t;let o=d[n];"privacy_setting"===n&&(o=Number(o)),t[n]=o;const a=(0,g.T)(n);return o!==e[a]&&(b("%o is out of sync. Updating %o attr from %o to %o ",n,a,e[a],o),r[a]=o),t}),{tracks:[]});if(S(n),!Object.keys(n).length)return;const[o,a]=function(e,t){if(null==e||!e.tracks)return[[],!1];const r=[];let n=!1;return Object.keys(e.tracks).forEach((o=>{for(const a in e.tracks[o]){const s=e.tracks[o][a];t.tracks.find((e=>e.kind===o&&e.srcLang===a&&e.src===s.src&&e.label===s.label))||(b("Track %o is out of sync. Set tracks attr",s.src),n=!0),r.push({src:s.src,kind:o,srcLang:a,label:s.label})}})),[r,n]}(d,e);a&&(r.tracks=o),Object.keys(r).length&&(b("Updating attributes: ",r),t(r))}),[d,p]);const j=function(e){return t=>new Promise(((r,n)=>{o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:{id:e,...t}}).then((e=>{if(200!==(null==e?void 0:e.data))return n(e);r(e)})).catch(n)}))}(n);return(0,c.useEffect)((()=>{if(!_||E)return;if(b("Saving post action detected"),null==e||!e.id)return;const n=y.reduce(((t,r)=>{const n=w[r]||r,o=C[r],a=e[n];return C[r]!==e[n]&&(b("Field to sync %o: %o => %o: %o",r,o,n,a),t[r]=e[n]),t}),{});if(!Object.keys(n).length)return b("No data to sync. Bail early");b("Syncing data: ",n),j(n).then((()=>{var o;S(n);const a=(0,h.ZP)(null==n?void 0:n.description);if(r.isAutoGeneratedChapter&&null!=e&&e.guid&&null!=n&&null!==(o=n.description)&&void 0!==o&&o.length&&null!=a&&a.length){b("Auto-generated chapter detected. Processing...");const r={label:__("English (auto-generated)","jetpack-videopress-pkg"),srcLang:"en",kind:"chapters",tmpFile:(0,m.ZP)(n.description)};b("Auto-generated track: %o",r),(0,v.nb)(r,u).then((n=>{const o=e.tracks.findIndex((e=>"chapters"===e.kind&&"en"===e.srcLang)),a={...r,src:n},s=[...e.tracks];o>-1?(b("Updating %o auto-generated track",a.src),s[o]=a):(b("Adding auto-generated %o track",a.src),s.push(a)),t({tracks:s});const i=(0,f.p)(u,e);R("getEmbedPreview",[i])}))}else{const t=(0,f.p)(u,e);R("getEmbedPreview",[t])}}))}),[_,E,j,S,e,C,R,y]),{forceInitialState:S,videoData:d,isRequestingVideoData:p}}},5452:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6989),o=r.n(n),a=r(9307),s=r(6998);function i(e){let{id:t,guid:r}=e;const[n,i]=(0,a.useState)({}),[l,c]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{r&&(c(!0),async function(){try{var e,n;const a=await(0,s.Z)("playback",{id:t,guid:r}),l=null!=a&&a.token?`?${new URLSearchParams({metadata_token:a.token}).toString()}`:"",u=await o()({url:`https://public-api.wordpress.com/rest/v1.1/videos/${r}${l}`,credentials:"omit"});c(!1);const d=null===(e=u.original)||void 0===e||null===(n=e.split("/"))||void 0===n?void 0:n.at(-1);i({guid:u.guid,title:u.title,description:u.description,allow_download:u.allow_download,privacy_setting:u.privacy_setting,rating:u.rating,filename:d,tracks:u.tracks,is_private:u.is_private})}catch(e){throw c(!1),new Error((null==e?void 0:e.message)??e)}}())}),[t,r]),{videoData:n,isRequestingVideoData:l}}},2346:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5609);const o=React.createElement(n.SVG,{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement(n.Path,{d:"M4.75725 2.075C4.60279 1.97745 4.41041 1.97489 4.25365 2.06832C4.09689 2.16174 4 2.3367 4 2.52632V21.4737C4 21.6633 4.09689 21.8383 4.25365 21.9317C4.41041 22.0251 4.60279 22.0226 4.75725 21.925L19.7573 12.4513C19.9079 12.3562 20 12.1849 20 12C20 11.8151 19.9079 11.6438 19.7573 11.5487L4.75725 2.075Z",fill:"white"}))},7535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(5609),o=r(9307),a=r(1074),s=r(5235),i=r.n(s),l=r(2346),c=r(4641);const u=e=>{let{src:t,setMaxDuration:r=null,currentTime:a}=e;const s=(0,o.useRef)(null),[i,l]=(0,o.useState)(!0);(0,o.useEffect)((()=>{s.current.src=t}),[t]),(0,o.useEffect)((()=>{s.current&&Number.isFinite(a)&&(s.current.currentTime=a)}),[a]);return React.createElement("div",{className:c.Z["video-player-wrapper"]},i&&React.createElement("div",{className:c.Z["video-player-spinner-wrapper"]},React.createElement(n.Spinner,{className:c.Z.spinner})),React.createElement("video",{onLoadedData:()=>l(!1),ref:s,muted:!0,className:c.Z.video,onDurationChange:e=>{const t=e.target.duration;if(null==r||r(t),s.current){const e=Number.isFinite(a)?a:t/2;s.current.currentTime=e}}}))},d=e=>{let{src:t="",onVideoFrameSelected:r,className:s="",initialCurrentTime:d=null}=e;const[p,f]=(0,o.useState)(0),[v,h]=(0,o.useState)(Number.isFinite(d)?d:null);return React.createElement("div",{className:i()(c.Z.container,s)},React.createElement(a.Z,{className:c.Z["play-icon"],icon:l.Z}),React.createElement(u,{src:t,setMaxDuration:f,currentTime:v}),React.createElement(n.RangeControl,{className:c.Z.range,min:0,step:.1,initialPosition:v,max:p,showTooltip:!1,withInputField:!1,onChange:e=>{h(e),null==r||r(1e3*e)}}))}},5134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>t=>new Promise(((r,n)=>{const a=Object.assign({id:e},t);o()({path:"/wpcom/v2/videopress/meta",method:"POST",data:a}).then((e=>{"success"===(null==e?void 0:e.code)||n()})).catch((e=>n(e))).finally((()=>{r()}))}))},6650:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>()=>new Promise((function(t,r){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"GET"}).then((function(e){t(e)})).catch((function(e){r(e)}))}))},3897:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(6989),o=r.n(n);const a=e=>function(t){return new Promise((function(r,n){o()({path:`/wpcom/v2/videopress/${e}/poster`,method:"POST",data:t}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}},1207:(e,t,r)=>{"use strict";r.d(t,{R2:()=>u,hr:()=>d});var n=r(6989),o=r.n(n),a=r(9307),s=r(5736),i=r(9537);const __=s.__,l={},c=function(){return new Promise((function(e,t){o()({path:"/wpcom/v2/videopress/upload-jwt",method:"POST"}).then((t=>{e({token:t.upload_token,blogId:t.upload_blog_id,url:t.upload_url})})).catch((e=>{t(e)}))}))},u=e=>{const t=`videopress/v1/upload/${e}`;return new Promise(((r,n)=>{o()({path:t,method:"POST"}).then((t=>{"uploading"===t.status||"new"===t.status||"resume"===t.status?u(e).then(r).catch(n):"complete"===t.status?r({guid:t.uploaded_details.guid,id:t.uploaded_details.media_id,src:t.uploaded_details.upload_src}):"error"===t.status?n({data:{message:t.error}}):n({data:{message:__("Unexpected error uploading video.","jetpack-videopress-pkg")}})})).catch((e=>{n({data:{message:null==e?void 0:e.message}})}))}))},d=e=>{let{onError:t,onProgress:r,onSuccess:n}=e;const[o,s]=(0,a.useState)({}),[u,d]=(0,a.useState)(null);(0,a.useEffect)((()=>{c().then(s).catch((e=>{d(e),null==t||t(e)}))}),[]);return[e=>(e=>{let{file:t,onProgress:r,onSuccess:n,onError:o,data:a}=e;const s=new i.gq(t,{onError:o,onProgress:r,endpoint:a.url,removeFingerprintOnSuccess:!0,withCredentials:!1,autoRetry:!0,overridePatchMethod:!1,chunkSize:1e7,metadata:{filename:t.name,filetype:t.type},retryDelays:[0,1e3,3e3,5e3,1e4],onAfterResponse:function(e,r){if(r.getStatus()>=400)return;const o=r.getHeader("x-videopress-upload-guid"),a=r.getHeader("x-videopress-upload-media-id"),s=r.getHeader("x-videopress-upload-src-url");if(o&&a&&s)return void(n&&n({id:Number(a),guid:o,src:s},t));const i={"x-videopress-upload-key-token":"token","x-videopress-upload-key":"key"},c={};Object.keys(i).forEach((function(e){const t=r.getHeader(e);t&&(c[i[e]]=t)})),c.key&&c.token&&(l[c.key]=c.token)},onBeforeRequest:function(e){const t=e._method;if(["HEAD","OPTIONS"].indexOf(t)>=0&&(e._method="GET",e.setHeader("X-HTTP-Method-Override",t)),["DELETE","PUT","PATCH"].indexOf(t)>=0&&(e._method="POST",e.setHeader("X-HTTP-Method-Override",t)),e._xhr.open(e._method,e._url,!0),Object.keys(e._headers).map((function(t){e.setHeader(t,e._headers[t])})),"POST"===t){if(!a.token)throw"should never happen";e.setHeader("x-videopress-upload-token",a.token)}if(["OPTIONS","GET","HEAD","DELETE","PUT","PATCH"].indexOf(t)>=0){const r=new URL(e._url).pathname.split("/"),n=r[r.length-1];if(l[n])e.setHeader("x-videopress-upload-token",l[n]);else if("HEAD"===t)return c().then((t=>(l[n]=t.token,e.setHeader("x-videopress-upload-token",t.token),e)))}return Promise.resolve(e)}});return s.findPreviousUploads().then((function(e){e.length&&s.resumeFromPreviousUpload(e[0]),s.start()})),s})({file:e,onProgress:r,onSuccess:n,onError:t,data:o}),o,u]}},6998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5368);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:r,guid:o}=t;return new Promise((function(t,a){if(!n.M.includes(e))return a("Invalid scope");let s;const i={};switch(e){case"upload":s="videopress-get-upload-token";break;case"playback":s="videopress-get-playback-jwt",i.id=r,i.guid=o}window.wp.media.ajax(s,{async:!0,data:i}).then((r=>{switch(e){case"upload":t({token:r.upload_token,blogId:r.upload_blog_id,url:r.upload_action_url});break;case"playback":t({token:r.jwt})}})).catch((e=>{console.warn('Token is not achievable: "%s"',(null==e?void 0:e.message)??e),t({token:null})}))}))}},5368:(e,t,r)=>{"use strict";r.d(t,{M:()=>n});const n=["upload","playback"]},515:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,p:()=>o});var n=r(6483);const o=(e,t)=>{let{autoplay:r,controls:o,loop:a,muted:s,playsinline:i,poster:l,preload:c,seekbarColor:u,seekbarPlayedColor:d,seekbarLoadingColor:p,useAverageColor:f}=t;if(!e)return null;const v={resizeToParent:!0,cover:!0,...r&&{autoPlay:!0},...!o&&{controls:!1},...a&&{loop:!0},...s&&{muted:!0,persistVolume:!1},...i&&{playsinline:!0},...l&&{posterUrl:l},..."none"!==c&&{preloadContent:c},...""!==u&&{sbc:u},...""!==d&&{sbpc:d},...""!==p&&{sblc:p},...f&&{useAverageColor:!0}};return(0,n.addQueryArgs)(`https://videopress.com/v/${e}`,v)},a=e=>{var t;if(!e)return null;const r=e.match(/^https?:\/\/(?<host>video(?:\.word)?press\.com)\/(?:v|embed)\/(?<guid>[a-zA-Z\d]{8})/);return null!=r&&null!==(t=r.groups)&&void 0!==t&&t.guid?r.groups.guid:null}},2198:(e,t,r)=>{"use strict";r.d(t,{nb:()=>i,qL:()=>l});var n=r(6989),o=r.n(n),a=r(6998);const s=()=>{var e,t;return"simple"!==(null===(e=window)||void 0===e||null===(t=e.videoPressEditorState)||void 0===t?void 0:t.siteType)},i=(e,t)=>{const{kind:r,srcLang:n,label:i,tmpFile:l}=e;return s()?function(e,t){return new Promise((function(r,n){const{kind:o,srcLang:s,label:i,tmpFile:l}=e;(0,a.Z)("upload").then((e=>{let{token:a,blogId:c}=e;const u=new FormData;u.append("kind",o),u.append("srclang",s),u.append("label",i),u.append("vtt",l),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${a}" blog_id="${c}"`},method:"POST",body:u}).then((e=>{try{return r(e.json())}catch(e){return n(e)}})).catch(n)}))}))}({kind:r,srcLang:n,label:i,tmpFile:l},t):o()({method:"POST",path:`/videos/${t}/tracks`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n],["label",i],["vtt",l]]})},l=(e,t)=>{const{kind:r,srcLang:n}=e;if(s())return function(e,t){let{kind:r,srcLang:n}=e;return new Promise((function(e,o){(0,a.Z)("upload").then((a=>{let{token:s,blogId:i}=a;const l=new FormData;l.append("kind",r),l.append("srclang",n),fetch(`https://public-api.wordpress.com/rest/v1.1/videos/${t}/tracks/delete`,{headers:{Authorization:`X_UPLOAD_TOKEN token="${s}" blog_id="${i}"`},method:"POST",body:l}).then((t=>{try{return e(t.json())}catch(e){return o(e)}})).catch(o)}))}))}({kind:r,srcLang:n},t);const i={method:"POST",path:`/videos/${t}/tracks/delete`,apiNamespace:"rest/v1.1",global:!0,parse:!1,formData:[["kind",r],["srclang",n]]};return o()(i)}},4391:(e,t,r)=>{"use strict";r.d(t,{$A:()=>n,Gr:()=>c,O1:()=>a,UJ:()=>o,Vz:()=>s,pf:()=>l,x4:()=>i});const n="public",o="private",a="site-default",s=[n,o,a],i="G",l="PG-13",c="R-17"},1339:(e,t,r)=>{"use strict";function n(e){if(!e)return[];return e.split("\n").map((e=>function(e){const t=/(?<timeBlock>\(?(?<time>\d{1,2}:\d{2}:\d{2}|\d{1,2}:\d{2})\)?)/.exec(e);if(null==t||null==t.groups)return null;const{groups:{timeBlock:r,time:n}}=t,o=e.indexOf(r),a=(o<(e.length-r.length)/2?e.substring(o+r.length,e.length):e.substring(0,o)).trim().replace(/(\s-$)|(^-\s)/,""),s=n.split(":");return 1===s[0].length&&(s[0]=`0${s[0]}`),2===s.length&&s.unshift("00"),{startAt:s.join(":"),title:a}}(e))).filter((e=>null!==e)).sort(((e,t)=>e.startAt.localeCompare(t.startAt)))}r.d(t,{Tn:()=>n,ZP:()=>n})},5197:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>a});var n=r(1339);function o(e){const t=Math.floor(e/36e5);let r=e-36e5*t;const n=Math.floor(r/6e4);r-=6e4*n;return[t,n,Math.floor(r/1e3)].map((e=>e<10?`0${e}`:e)).join(":")}function a(e,t){const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:359999e3;const r=(0,n.Tn)(e);if(0===r.length)return null;let a="WEBVTT\n";a+="\n",a+="NOTE\n",a+="videopress-chapters-auto-generated\n",a+="This file was auto-generated based on Video description.\n",a+="For more information, see https://jetpack.com/support/jetpack-videopress/jetpack-videopress-customizing-your-videos/#adding-subtitles-captions-or-chapters-within-a-video\n";let s=1;for(const[e,n]of r.entries()){const i=0===e?"000":"001",l=e<r.length-1?r[e+1].startAt:o(t);a+=`\n${s++}\n${n.startAt}.${i} --\x3e ${l}.000\n${n.title}\n`}return a}(e,t);return r?new File([r],"chapters.vtt",{type:"text/vtt"}):null}},5178:(e,t,r)=>{"use strict";function n(e){return e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("_","")))}r.d(t,{T:()=>n})},3427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(5908),o=r(9106),a=r(5016),s=r(1662);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}var u=function(){function e(t){i(this,e),this._file=t,this.size=t.size}return c(e,[{key:"slice",value:function(e,t){if((0,a.Z)())return(0,s.Z)(this._file.slice(e,t));var r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}]),e}(),d=function(){function e(t,r){i(this,e),this._chunkSize=r,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return c(e,[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var r=this,n=t<=this._bufferOffset+p(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(e,t),a=null==o&&this._done;return Promise.resolve({value:o,done:a})}return this._reader.read().then((function(n){var o=n.value;return n.done?r._done=!0:void 0===r._buffer?r._buffer=o:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var r=new e.constructor(e.length+t.length);return r.set(e),r.set(t,e.length),r}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var r=0===p(this._buffer);return this._done&&r?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function p(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var f=function(){function e(){i(this,e)}return c(e,[{key:"openFile",value:function(e,t){return(0,n.Z)()&&e&&void 0!==e.uri?(0,o.Z)(e.uri).then((function(e){return new u(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new u(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new d(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"))}}]),e}()},1264:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var n=r(5908);function o(e,t){return(0,n.Z)()?Promise.resolve(function(e,t){var r=e.exif?function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",r,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}},6940:(e,t,r)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}r.d(t,{Z:()=>s});var s=function(){function e(){n(this,e)}return a(e,[{key:"createRequest",value:function(e,t){return new i(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),i=function(){function e(t,r){n(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,r,!0),this._method=t,this._url=r,this._headers={}}return a(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(r,n){e._xhr.onload=function(){r(new l(e._xhr))},e._xhr.onerror=function(e){n(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),l=function(){function e(t){n(this,e),this._xhr=t}return a(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}()},9537:(e,t,r)=>{"use strict";r.d(t,{gq:()=>y});var n=r(3620),o=r(5799),a=r(5866),s=r(6940),i=r(3427),l=r(1264);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=g({},n.Z.defaultOptions,{httpStack:new s.Z,fileReader:new i.Z,urlStorage:a.H?new a.n:new o.Z,fingerprint:l.Z}),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,e);var t,r,o,a,s=(t=i,function(){var e,r=h(t);if(v()){var n=h(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return f(this,e)});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(this,i),t=g({},b,{},t),s.call(this,e,t)}return r=i,a=[{key:"terminate",value:function(e,t,r){return t=g({},b,{},t),n.Z.terminate(e,t,r)}}],(o=null)&&d(r.prototype,o),a&&d(r,a),i}(n.Z),w=window,_=w.XMLHttpRequest,E=w.Blob;_&&E&&E.prototype.slice},5016:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)}},5908:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()}},1662:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(e){r(e)},n.readAsArrayBuffer(e)}))}r.d(t,{Z:()=>n})},9106:(e,t,r)=>{"use strict";function n(e){return new Promise((function(t,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(e)},n.onerror=function(e){r(e)},n.open("GET",e),n.send()}))}r.d(t,{Z:()=>n})},5866:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{H:()=>s,n:()=>i});var o=!1;try{o="localStorage"in window;var a="tusSupport";localStorage.setItem(a,localStorage.getItem(a))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;o=!1}var s=o,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,r=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var r=Math.round(1e12*Math.random()),n="tus::".concat(e,"::").concat(r);return localStorage.setItem(n,JSON.stringify(t)),Promise.resolve(n)}},{key:"_findEntries",value:function(e){for(var t=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(e))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,t.push(o)}catch(e){}}return t}}],r&&n(t.prototype,r),o&&n(t,o),e}()},6971:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},s(e)}function i(e,t,r){return i=l()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&c(o,r.prototype),o},i.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}r.d(t,{Z:()=>d});const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,e);var t,r=(t=n,function(){var e,r=u(t);if(l()){var n=u(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return a(this,e)});function n(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(o(this,n),(t=r.call(this,e)).originalRequest=s,t.originalResponse=i,t.causingError=a,null!=a&&(e+=", caused by ".concat(a.toString())),null!=s){var l=s.getHeader("X-Request-ID")||"n/a",c=s.getMethod(),u=s.getURL(),d=i?i.getStatus():"n/a",p=i?i.getBody()||"":"n/a";e+=", originated from request (method: ".concat(c,", url: ").concat(u,", response code: ").concat(d,", response text: ").concat(p,", request id: ").concat(l,")")}return t.message=e,t}return n}(s(Error))},1336:(e,t,r)=>{"use strict";r.d(t,{c:()=>o});var n=!1;function o(e){n&&console.log(e)}},5799:(e,t,r)=>{"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{Z:()=>o});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,(r=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&n(t.prototype,r),o&&n(t,o),e}()},3620:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(4097),o=r(1294),a=r.n(o),s=r(6971),i=r(1336),l=r(8184);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},v=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in r&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=r,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,r,n;return t=e,r=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var r=this.options.retryDelays;null==r||"[object Array]"===Object.prototype.toString.call(r)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(r){return null==r?(0,i.c)("No fingerprint was calculated meaning that the upload cannot be stored in the URL storage."):(0,i.c)("Calculated fingerprint: ".concat(r)),e._fingerprint=r,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,r=this._size=this._source.size,n=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=function(e,t,r){for(var n=Math.floor(e/t),o=[],a=0;a<t;a++)o.push({start:n*a,end:n*(a+1)});return o[t-1].end=e,r&&o.forEach((function(e,t){e.uploadUrl=r[t]||null})),o}(this._source.size,o,this._parallelUploadUrls);this._parallelUploadUrls=new Array(a.length);var s,l=a.map((function(o,s){var i=0;return t._source.slice(o.start,o.end).then((function(l){var c=l.value;return new Promise((function(l,d){var p=u({},t.options,{uploadUrl:o.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:u({},t.options.headers,{"Upload-Concat":"partial"}),onSuccess:l,onError:d,onProgress:function(e){n=n-i+e,i=e,t._emitProgress(n,r)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[s]=f.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===a.length&&t._saveUploadInUrlStorage()}}),f=new e(c,p);f.start(),t._parallelUploads.push(f)}))}))}));Promise.all(l).then((function(){(s=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=h(t.options.metadata);return""!==e&&s.setHeader("Upload-Metadata",e),t._sendRequest(s,null)})).then((function(e){if(m(e.getStatus(),200)){var r=e.getHeader("Location");null!=r?(t.url=y(t.options.endpoint,r),(0,i.c)("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(s,e,"tus: invalid or missing Location header")}else t._emitHttpError(s,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?((0,i.c)("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?((0,i.c)("Resuming upload from provided URL: ".concat(this.options.url)),this.url=this.options.uploadUrl,void this._resumeUpload()):((0,i.c)("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var r=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return r._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,r,n){this._emitError(new s.Z(r,n,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),b(e,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),r))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,r)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var r,n=h(this.options.metadata);""!==n&&t.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,r=this._addChunkToRequest(t)):r=this._sendRequest(t,null),r.then((function(r){if(m(r.getStatus(),200)){var n=r.getHeader("Location");if(null!=n){if(e.url=y(e.options.endpoint,n),(0,i.c)("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,r):(e._offset=0,e._performUpload())}else e._emitHttpError(t,r,"tus: invalid or missing Location header")}else e._emitHttpError(t,r,"tus: unexpected response while creating upload")})).catch((function(r){e._emitHttpError(t,null,"tus: failed to create upload",r)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(r){var n=r.getStatus();if(!m(n,200))return m(n,400)&&e._removeFromUrlStorage(),423===n?void e._emitHttpError(t,r,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(r.getHeader("Upload-Offset"),10);if(isNaN(o))e._emitHttpError(t,r,"tus: invalid or missing offset value");else{var a=parseInt(r.getHeader("Upload-Length"),10);if(!isNaN(a)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),o===a)return e._emitProgress(a,a),void e._emitSuccess();e._offset=o,e._performUpload()}else e._emitHttpError(t,r,"tus: invalid or missing length value")}})).catch((function(r){e._emitHttpError(t,null,"tus: failed to resume upload",r)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(r){m(r.getStatus(),200)?t._handleUploadResponse(e,r):t._emitHttpError(e,r,"tus: unexpected response while uploading chunk")})).catch((function(r){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),r)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,r=this._offset,n=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(r+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then((function(r){var n=r.value,o=r.done;return t.options.uploadLengthDeferred&&o&&(t._size=t._offset+(n&&n.size?n.size:0),e.setHeader("Upload-Length",t._size)),null===n?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,n))}))}},{key:"_handleUploadResponse",value:function(e,t){var r=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(r))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var r=g(e,t,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return k(e,t,this.options)}}],n=[{key:"terminate",value:function(t,r){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===r&&(r={});var n=g("DELETE",t,r);return k(n,null,r).then((function(e){if(204!==e.getStatus())throw new s.Z("tus: unexpected response while terminating upload",null,n,e)})).catch((function(o){if(o instanceof s.Z||(o=new s.Z("tus: failed to terminate upload",o,n,null)),!b(o,0,r))throw o;var a=r.retryDelays[0],i=r.retryDelays.slice(1),l=u({},r,{retryDelays:i});return new Promise((function(e){return setTimeout(e,a)})).then((function(){return e.terminate(t,l)}))}))}}],r&&p(t.prototype,r),n&&p(t,n),e}();function h(e){var t=[];for(var r in e)t.push("".concat(r," ").concat(n.Base64.encode(e[r])));return t.join(",")}function m(e,t){return e>=t&&e<t+100}function g(e,t,r){var n=r.httpStack.createRequest(e,t);n.setHeader("Tus-Resumable","1.0.0");var o=r.headers||{};for(var a in o)n.setHeader(a,o[a]);if(r.addRequestId){var s=(0,l.Z)();n.setHeader("X-Request-ID",s)}return n}function k(e,t,r){return("function"==typeof r.onBeforeRequest?Promise.resolve(r.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof r.onAfterResponse?Promise.resolve(r.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function b(e,t,r){if(null==r.retryDelays||t>=r.retryDelays.length||null==e.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(e,t,r);var n,o=e.originalResponse?e.originalResponse.getStatus():0;return(!m(o,400)||409===o||423===o)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function y(e,t){return new(a())(t,e).toString()}v.defaultOptions=f;const w=v},8184:(e,t,r)=>{"use strict";function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}r.d(t,{Z:()=>n})},1294:(e,t,r)=>{"use strict";var n=r(2298),o=r(142),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e,t){return h(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function v(e){var t,r=("undefined"!=typeof window||"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(e=e||r);if("blob:"===e.protocol)n=new g(unescape(e.pathname),{});else if("string"===o)for(t in n=new g(e,{}),f)delete n[t];else if("object"===o){for(t in e)t in f||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=i.test(e.href))}return n}function h(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=d(e)).replace(s,""),t=t||{};var r,n=c.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],i=!!n[3],l=0;return a?i?(r=n[2]+n[3]+n[4],l=n[2].length+n[3].length):(r=n[2]+n[4],l=n[2].length):i?(r=n[3]+n[4],l=n[3].length):r=n[4],"file:"===o?l>=2&&(r=r.slice(2)):h(o)?r=n[4]:o?a&&(r=r.slice(2)):l>=2&&h(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||h(o),slashesCount:l,rest:r}}function g(e,t,r){if(e=(e=d(e)).replace(s,""),!(this instanceof g))return new g(e,t,r);var a,i,l,c,f,k,b=p.slice(),y=typeof t,w=this,_=0;for("object"!==y&&"string"!==y&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(i=m(e||"",t=v(t))).protocol&&!i.slashes,w.slashes=i.slashes||a&&t.slashes,w.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||u.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!h(w.protocol)))&&(b[3]=[/(.*)/,"pathname"]);_<b.length;_++)"function"!=typeof(c=b[_])?(l=c[0],k=c[1],l!=l?w[k]=e:"string"==typeof l?~(f="@"===l?e.lastIndexOf(l):e.indexOf(l))&&("number"==typeof c[2]?(w[k]=e.slice(0,f),e=e.slice(f+c[2])):(w[k]=e.slice(f),e=e.slice(0,f))):(f=l.exec(e))&&(w[k]=f[1],e=e.slice(0,f.index)),w[k]=w[k]||a&&c[3]&&t[k]||"",c[4]&&(w[k]=w[k].toLowerCase())):e=c(e,w);r&&(w.query=r(w.query)),a&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(a=!0),r.splice(n,1),s--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&h(w.protocol)&&(w.pathname="/"+w.pathname),n(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&h(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}g.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,l.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";a[e]=t.charAt(0)!==s?s+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(a.username=t.slice(0,i),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(i+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<p.length;c++){var u=p[c];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&h(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var s=a+(r.protocol&&r.slashes||h(r.protocol)?"//":"");return r.username?(s+=r.username,r.password&&(s+=":"+r.password),s+="@"):r.password?(s+=":"+r.password,s+="@"):"file:"!==r.protocol&&h(r.protocol)&&!n&&"/"!==r.pathname&&(s+="@"),(":"===n[n.length-1]||l.test(r.hostname)&&!r.port)&&(n+=":"),s+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(s+=r.hash),s}},g.extractProtocol=m,g.location=v,g.trimLeft=d,g.qs=o,e.exports=g},5744:(e,t,r)=>{"use strict";e.exports=r.p+"images/dynamic-colors-b7ff131e82a4032d9a08.png"},5147:(e,t,r)=>{"use strict";e.exports=r.p+"images/videopress-block-example-image-da9ef73787adca8896f2.jpg"},9196:e=>{"use strict";e.exports=window.React},6989:e=>{"use strict";e.exports=window.wp.apiFetch},2175:e=>{"use strict";e.exports=window.wp.blockEditor},4981:e=>{"use strict";e.exports=window.wp.blocks},5609:e=>{"use strict";e.exports=window.wp.components},4333:e=>{"use strict";e.exports=window.wp.compose},7798:e=>{"use strict";e.exports=window.wp.coreData},9818:e=>{"use strict";e.exports=window.wp.data},7701:e=>{"use strict";e.exports=window.wp.domReady},2238:e=>{"use strict";e.exports=window.wp.editor},9307:e=>{"use strict";e.exports=window.wp.element},1975:e=>{"use strict";e.exports=window.wp.escapeHtml},2694:e=>{"use strict";e.exports=window.wp.hooks},5736:e=>{"use strict";e.exports=window.wp.i18n},444:e=>{"use strict";e.exports=window.wp.primitives},6483:e=>{"use strict";e.exports=window.wp.url},2674:e=>{function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4205:e=>{"use strict";e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"videopress/video","version":"0.1.0","title":"VideoPress","category":"media","icon":"smiley","description":"Embed a video from your media library or upload a new one with VideoPress.","supports":{"align":true,"spacing":{"margin":true,"padding":true}},"attributes":{"autoplay":{"type":"boolean"},"title":{"type":"string"},"description":{"type":"string"},"caption":{"type":"string","source":"html","selector":"figcaption"},"controls":{"type":"boolean","default":true},"loop":{"type":"boolean"},"maxWidth":{"type":"string","default":"100%"},"muted":{"type":"boolean"},"playsinline":{"type":"boolean"},"preload":{"type":"string","default":"metadata"},"seekbarPlayedColor":{"type":"string","default":""},"seekbarLoadingColor":{"type":"string","default":""},"seekbarColor":{"type":"string","default":""},"useAverageColor":{"type":"boolean","default":true},"id":{"type":"number"},"guid":{"type":"string"},"src":{"type":"string","source":"attribute","selector":"video","attribute":"src"},"cacheHtml":{"type":"string","default":""},"poster":{"type":"string"},"videoRatio":{"type":"number"},"tracks":{"type":"array","items":{"type":"object"},"default":[]},"privacySetting":{"type":"number","default":1},"allowDownload":{"type":"boolean","default":true},"rating":{"type":"string"},"isPrivate":{"type":"boolean"},"isExample":{"type":"boolean","default":false}},"textdomain":"jetpack-videopress","editorScript":"file:../../../../../build/block-editor/index.js","editorStyle":"file:../../../../../build/block-editor/index.css","style":"file:../../../../../build/block-editor/style-index.css","viewScript":"file:../../../../../build/block-editor/view.js"}')}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"})(),(()=>{"use strict";r(4470),r(9437),r(2871)})()})();